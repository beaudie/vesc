{
  "comments": [
    {
      "key": {
        "uuid": "9b1763d8_db162729",
        "filename": "src/libANGLE/renderer/gl/cgl/WindowSurfaceCGL.mm",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1002358
      },
      "writtenOn": "2015-11-30T23:57:57Z",
      "side": 1,
      "message": "I\u0027d rather see this read\n\n  BOOL result \u003d NO;\n  pthread_mutex_lock(\u0026mSwapState-\u003emutex);\n  if (mSwapState-\u003elastRendered-\u003eswapId \u003e\n      mSwapState-\u003ebeingPresented-\u003eswapId) {\n    result \u003d YES;\n    std::swap(mSwapState-\u003elastRendered, mSwapState-\u003ebeingPresented);\n  }\n  pthread_mutex_unlock(\u0026mSwapState-\u003emutex);\n  return result;\n\nAs it is, it\u0027s hard to reason about how the state might change between canDrawInCGLContext and drawInCGLContext. This way, drawInCGLContext can always just draw beingPresented.",
      "revId": "002ce2d9faf406e4d877840b30cc8e6a88cbe7eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db09dbde_ba22f1e5",
        "filename": "src/libANGLE/renderer/gl/cgl/WindowSurfaceCGL.mm",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1119849
      },
      "writtenOn": "2015-12-01T15:09:58Z",
      "side": 1,
      "message": "Makes sense, I checked the doc for canDrawInCGLContext, and it says that it will be called before every drawInCGLContext.\n\nDone.",
      "parentUuid": "9b1763d8_db162729",
      "revId": "002ce2d9faf406e4d877840b30cc8e6a88cbe7eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}