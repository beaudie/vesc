{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "be912c21_dff28f2b",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 8886,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-10-16T21:34:03Z",
      "side": 1,
      "message": "I dont think you need this. The other diff in flushToPrimary() should taken care of it.",
      "range": {
        "startLine": 8879,
        "startChar": 16,
        "endLine": 8886,
        "endChar": 17
      },
      "revId": "2f00d326a16e2e188bf548a8008acded31beb24f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a22ce7bc_eed3d4b0",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 8886,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2023-10-16T22:59:53Z",
      "side": 1,
      "message": "That will cause the newly added test `clearColorMorePrecisionThanFBOFormatNoDithering` failing on ARM devices: https://chromium-review.googlesource.com/c/angle/angle/+/4937472/5/src/tests/gl_tests/FramebufferTest.cpp.\n\nWhen there is only one `glClear()`, the code path is not going through `flushToPrimary()`",
      "parentUuid": "be912c21_dff28f2b",
      "range": {
        "startLine": 8879,
        "startChar": 16,
        "endLine": 8886,
        "endChar": 17
      },
      "revId": "2f00d326a16e2e188bf548a8008acded31beb24f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d93c9ba7_c1e56170",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 8886,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-10-16T23:18:09Z",
      "side": 1,
      "message": "I see. That makes sense. How about do this in FramebufferVk::clearImpl(), all clear calls will go through that function. That way you dont need to change here as well as flushToPrimrary. You only need one central place to do the clear, I think.",
      "parentUuid": "a22ce7bc_eed3d4b0",
      "range": {
        "startLine": 8879,
        "startChar": 16,
        "endLine": 8886,
        "endChar": 17
      },
      "revId": "2f00d326a16e2e188bf548a8008acded31beb24f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c31f006_2f467418",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 8886,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2023-10-17T05:50:04Z",
      "side": 1,
      "message": "Thank you. I moved the workaround to the `FramebufferVk::clearImpl()`. Since not all attachments have format `angle::FormatID::R5G5B5A1`, and not all of them need the clear color precision adjustment, I created an array of `VkClearColorValue`, each array element stores the adjusted clear color for each color attachment of the Framebuffer. Only the color attachment needs the adjustment will have the clear color modified, the other attachments will pass the original clear color through. Does that sound good to you?",
      "parentUuid": "d93c9ba7_c1e56170",
      "range": {
        "startLine": 8879,
        "startChar": 16,
        "endLine": 8886,
        "endChar": 17
      },
      "revId": "2f00d326a16e2e188bf548a8008acded31beb24f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}