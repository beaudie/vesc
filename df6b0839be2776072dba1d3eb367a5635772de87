{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3d466554_90c18cb4",
        "filename": "src/libANGLE/Program.cpp",
        "patchSetId": 10
      },
      "lineNbr": 581,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-02T16:03:03Z",
      "side": 1,
      "message": "Please `ASSERT` that one of the two vectors is empty.\n\nBecause otherwise logically the post-link tasks need to be scheduled after the link subtasks are finished.",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a880216_32fb2991",
        "filename": "src/libANGLE/Program.cpp",
        "patchSetId": 10
      },
      "lineNbr": 581,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T16:32:49Z",
      "side": 1,
      "message": "\u003e post-link tasks need to be scheduled after the link subtasks are finished\n\nthe intent i was going with was that post-link subtasks are ready to be kicked off as soon as `Program::MainLinkTask::linkImpl` is done. We could have a backend that has tasks to be done that need to be waited on by `resolveLinkImpl` and tasks that don\u0027t. Would it make more sense to rename it to `mAsyncLinkSubTasks`?",
      "parentUuid": "3d466554_90c18cb4",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c1a1e76_3bda066f",
        "filename": "src/libANGLE/Program.cpp",
        "patchSetId": 10
      },
      "lineNbr": 581,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-03T17:40:30Z",
      "side": 1,
      "message": "My suggestion is not to design for something that may never happen. Calling them \"post-link\" tasks is nice because it\u0027s clear why we don\u0027t wait on them when link is resolved. \"Async link task\" sounds like it\u0027s still part of the link.\n\nIf we ever hit such a situation in the future (including if we want some tasks to be scheduled after others), we can always adjust the code based on the reality of that situation :)",
      "parentUuid": "4a880216_32fb2991",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "711404d4_9c3d90b1",
        "filename": "src/libANGLE/Program.cpp",
        "patchSetId": 10
      },
      "lineNbr": 581,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T20:34:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c1a1e76_3bda066f",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "106efef3_273131c3",
        "filename": "src/libANGLE/renderer/ProgramImpl.h",
        "patchSetId": 10
      },
      "lineNbr": 68,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-02T16:03:03Z",
      "side": 1,
      "message": "Please add a comment that only one list can be populated. Same with `load()`.",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27d1d307_3d593500",
        "filename": "src/libANGLE/renderer/ProgramImpl.h",
        "patchSetId": 10
      },
      "lineNbr": 68,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T16:32:49Z",
      "side": 1,
      "message": "please see comment `the intent i was going with was that...` above",
      "parentUuid": "106efef3_273131c3",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c25d12ab_c99d75f0",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 755,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-02T16:03:03Z",
      "side": 1,
      "message": "Can move to line 780 to make it more explicit it\u0027s about waiting for the cache to be populated.\n\nAlso slightly smaller wait ;)",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d0ed162_80bb404b",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 755,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T16:32:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c25d12ab_c99d75f0",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c8b584b3_4ad3c577",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 782,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-03T17:40:30Z",
      "side": 1,
      "message": "Ref (regarding GL program binary race)",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5dc4ca6b_e27e7de4",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 888,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-02T16:03:03Z",
      "side": 1,
      "message": "nit: You can avoid this copy by having the caller pass in a `vk::GraphicsPipelineDesc **` and make it point to `mWarmUpGraphicsPipelineDesc`.",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24e810cb_91118513",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 888,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T16:32:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5dc4ca6b_e27e7de4",
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79a52b63_0880bbb8",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 1022,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-02T16:03:03Z",
      "side": 1,
      "message": "Could you please split this optimization into a separate CL? Like I mentioned in the next CL, the `addToCache` function would race with the main thread if this path is taken.",
      "range": {
        "startLine": 1011,
        "startChar": 0,
        "endLine": 1022,
        "endChar": 5
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30abd2dd_82921126",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 1022,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T16:32:49Z",
      "side": 1,
      "message": "the only caller of `waitForPostLinkTasksIfNecessary` is `ContextVk::handleDirtyGraphicsPipelineDesc` which should only happen on the main thread before it tries to create a pipeline of its own. there should be no race in `addToCache` due to this code path. feels like i am missing something?",
      "parentUuid": "79a52b63_0880bbb8",
      "range": {
        "startLine": 1011,
        "startChar": 0,
        "endLine": 1022,
        "endChar": 5
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f7935d4_8cad3fa6",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 1022,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-03T17:40:30Z",
      "side": 1,
      "message": "Well you fixed the race^ in the next CL already, so this is not an issue after the next CL lands. Given that the fix is landing after this change, you\u0027d still need to split this optimization to be landed after that.\n\n^ https://chromium-review.googlesource.com/c/angle/angle/+/5408796/comments/eb08306c_274f1554",
      "parentUuid": "30abd2dd_82921126",
      "range": {
        "startLine": 1011,
        "startChar": 0,
        "endLine": 1022,
        "endChar": 5
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f06575b7_26d5ac0f",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 1022,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T20:34:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3f7935d4_8cad3fa6",
      "range": {
        "startLine": 1011,
        "startChar": 0,
        "endLine": 1022,
        "endChar": 5
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2dc47c99_b29dce3d",
        "filename": "src/libANGLE/renderer/vulkan/ProgramVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 78,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-02T16:03:03Z",
      "side": 1,
      "message": "Shouldn\u0027t get into a situation where there are already tasks in the list, so better assert it:\n\n```suggestion\n    ASSERT(linkSubTasksOut \u0026\u0026 linkSubTasksOut-\u003eempty());\n    ASSERT(postLinkSubTasksOut \u0026\u0026 postLinkSubTasksOut-\u003eempty());\n```\n\nSame suggestion for the other backends.",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 78,
        "endChar": 33
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0e9edb53_ecfc4835",
        "filename": "src/libANGLE/renderer/vulkan/ProgramVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 78,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T16:32:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2dc47c99_b29dce3d",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 78,
        "endChar": 33
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f3479ee_035cb0aa",
        "filename": "src/libANGLE/renderer/vulkan/ProgramVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 78,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-04-03T17:40:30Z",
      "side": 1,
      "message": "Could you please do the same with the other backends?",
      "parentUuid": "0e9edb53_ecfc4835",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 78,
        "endChar": 33
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ddd94023_16ba3f5a",
        "filename": "src/libANGLE/renderer/vulkan/ProgramVk.cpp",
        "patchSetId": 10
      },
      "lineNbr": 78,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-04-03T20:34:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f3479ee_035cb0aa",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 78,
        "endChar": 33
      },
      "revId": "df6b0839be2776072dba1d3eb367a5635772de87",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}