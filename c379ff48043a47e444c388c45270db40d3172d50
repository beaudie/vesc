{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "10f639b0_6883db5c",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-07-09T16:29:26Z",
      "side": 1,
      "message": "Thought about this a bit more: I suggest you add `\u0026\u0026 isSwiftShader` for now to reduce the risk for shipping platforms (like B* and chromeOS). Since this has not been tested on any real GPUs and this will be shipped out to user now. Then some months later some driver implements supportsDynamicRenderingLocalRead and all of sudden user see this preferDynamicRendering enabled. There is risk here that they may run into bugs or performance regressions that they do not have an easy way to workaround. Explicitly limit to swiftshader for now and enable it until we have tested at least on one real GPU will avoid most of the risks.",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d71a9f8_c51e8531",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-07-09T16:42:26Z",
      "side": 1,
      "message": "FWIW, Joerg tried this with the r50 ARM driver, and it seems to have worked just fine, including Camera. For desktop drivers, we\u0027ll hear soon enough if Chrome Dev hits issues on Linux. For Android emulators, this is likely not a problem because the Vulkan tunnel still has to implement the extension, and ANGLE won\u0027t use it until they do (at which point they\u0027d test things). ChromeOS also rolls ANGLE infrequently and with lots of testing.\n\nTBH, the risk is minimal (especially given that it works fine on ARM).",
      "parentUuid": "10f639b0_6883db5c",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1831cc9f_58aba8dd",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-07-09T17:05:12Z",
      "side": 1,
      "message": "\u003eFor desktop drivers, we\u0027ll hear soon enough if Chrome Dev hits issues on Linux.\n\nDo they have driver that supports the ext? My concern is mostly on B*, which they ship it and then get a newer VK driver and run into bugs.",
      "parentUuid": "4d71a9f8_c51e8531",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8cc144eb_0221ed31",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-07-09T17:13:20Z",
      "side": 1,
      "message": "Yes. I just confirmed with Steven that this works on his game on Nvidia and AMD on Linux and windows.\n\nWe can check with them for sure. Based on conversations I had with Amirali about B*\u0027s support for VK_EXT_primitives_generated_query, it looks like they explicitly opt into extensions. @mprzybyl@google.com any concerns here?",
      "parentUuid": "1831cc9f_58aba8dd",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "af3584ba_f1027241",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-07-09T22:55:04Z",
      "side": 1,
      "message": "I am fine as long as you are confident that it will not break end users in the above scenario",
      "parentUuid": "8cc144eb_0221ed31",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "faea20d5_4bfaae9b",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1524137
      },
      "writtenOn": "2024-07-10T07:02:51Z",
      "side": 1,
      "message": "Actually, while our default vulkan streaming protocol is indeed opting in for extension, our new streaming protocol that we are rolling out this month will be directly talking to the IHV drivers, exposing all the extensions available in the drivers, so it\u0027s indeed a bit of the concern, as in our rollout period we will not be comparing the same behavior in ANGLE across the two protocols. \n\nLet me think of a reasonable solution for that, and if I have something, I will try to push the changes for review.",
      "parentUuid": "af3584ba_f1027241",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e84461c_2012c97e",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-07-10T13:25:06Z",
      "side": 1,
      "message": "Ok if you\u0027re concerned about this extension, could you please disable it downstream while you\u0027re doing testing? By keeping it enabled upstream, I\u0027m hoping to get early feedback from Chrome users.",
      "parentUuid": "faea20d5_4bfaae9b",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f39246a_e3de3eac",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 15
      },
      "lineNbr": 5275,
      "author": {
        "id": 1524137
      },
      "writtenOn": "2024-07-10T13:32:29Z",
      "side": 1,
      "message": "Yeah, if I don\u0027t have better upstream solution, I will proceed with downstream change here. I don\u0027t want to disable it for all, I\u0027d rather have the ability to disable it for B* specifically in upstream, and I\u0027m not sure if there is already such a mechanism.",
      "parentUuid": "8e84461c_2012c97e",
      "range": {
        "startLine": 5273,
        "startChar": 28,
        "endLine": 5275,
        "endChar": 93
      },
      "revId": "c379ff48043a47e444c388c45270db40d3172d50",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}