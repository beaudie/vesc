{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9dd96e2f_6d097dc6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-03-19T15:46:22Z",
      "side": 1,
      "message": "The buffer age feature AFAIK doesn\u0027t use any particular implementation logic. Cc Mohan/Jeff.\n\nMohan/Jeff could you guys help drive a root cause/fix?",
      "revId": "e1e83de79efd609250ab97e9470eb902f7eca72a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0065a969_d89e2340",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-03-19T16:08:04Z",
      "side": 1,
      "message": "Implementation detail -",
      "revId": "e1e83de79efd609250ab97e9470eb902f7eca72a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d36990f_3245a259",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-03-19T16:08:04Z",
      "side": 1,
      "message": "Because AcquireNextImage doesn\u0027t happen until some draw (late acquire), but BufferAge needs buffer frame number and current frame count, SurfaceVk.cpp -WindowSurfaceVk::getBufferAge can call doDeferredAcquireNextImage() which can take time getting the next buffer.\n\nIf you have 2 buffers, I can see that you may have waits, and you can\u0027t look ahead into the mSwapchainImages[mCurrentSwapchainImageIndex] without ANI.",
      "parentUuid": "9dd96e2f_6d097dc6",
      "revId": "e1e83de79efd609250ab97e9470eb902f7eca72a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ae7d692_8653f06c",
        "filename": "src/libANGLE/renderer/vulkan/DisplayVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 256,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-03-19T05:29:59Z",
      "side": 1,
      "message": "See how other extensions are handled above. We create a feature for such workarounds and then the extension is exposed based on that feature. This has a number of benefits:\n\n- The workaround shows up in chrome://gpu\n- We can modify the workaround in tests\n- The workaround can be modified through env vars.",
      "revId": "e1e83de79efd609250ab97e9470eb902f7eca72a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7523fb2_f40b4297",
        "filename": "src/libANGLE/renderer/vulkan/DisplayVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 256,
      "author": {
        "id": 1106289
      },
      "writtenOn": "2021-03-19T05:46:13Z",
      "side": 1,
      "message": "Thanks for the suggestion, but this isn\u0027t a workaround similar to those applied to other drivers. This is a short-term hack to get SwANGLE launched for Cuttlefish. I don\u0027t see a need for the benefits you listed. See https://chromium-review.googlesource.com/c/angle/angle/+/2727874 for another non-feature workaround/hack.",
      "parentUuid": "3ae7d692_8653f06c",
      "revId": "e1e83de79efd609250ab97e9470eb902f7eca72a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}