{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "02e76015_0477f208",
        "filename": "src/libANGLE/renderer/vulkan/BufferVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 433,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-09-24T14:31:16Z",
      "side": 1,
      "message": "I suspect you don\u0027t want to notify because the buffer is newly being set, but what if it\u0027s being re-set? Shouldn\u0027t you notify then?\n\nSomething like this:\n\n- glBufferData()\n- Use buffer as texture buffer\n- glDrawArrays()\n- glBufferData() // don\u0027t set any other state to avoid dirtying bits by accident\n- glDrawArrays()\n\nIt seems like with this DoNotNotify, the second draw arrays will not syncState(), because nothing is dirty, and that\u0027s not right. Same bug should manifest if VertexArray stops setting dirty bits on ContentsChanged like Texture is doing now.\n\nIn other words, shouldn\u0027t the notification be based on whether before the release() above there was previously a buffer allocated or not?",
      "range": {
        "startLine": 433,
        "startChar": 81,
        "endLine": 433,
        "endChar": 92
      },
      "revId": "3ed13d7e3662f2d3b29adb1ee026d4d0a237793f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a603585_3739b606",
        "filename": "src/libANGLE/renderer/vulkan/BufferVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 433,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-09-24T15:06:24Z",
      "side": 1,
      "message": "I don\u0027t follow your example. If by \"use buffer as texture buffer\", you mean there\u0027s a glTextureBuffer call? That will definitely cause some state updates. I don\u0027t see any possible bug here.",
      "parentUuid": "02e76015_0477f208",
      "range": {
        "startLine": 433,
        "startChar": 81,
        "endLine": 433,
        "endChar": 92
      },
      "revId": "3ed13d7e3662f2d3b29adb1ee026d4d0a237793f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27552b8a_32fb5f05",
        "filename": "src/libANGLE/renderer/vulkan/BufferVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 976,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-09-24T14:31:16Z",
      "side": 1,
      "message": "Do you really need this? It looks to me like if `mBuffer \u003d\u003d nullptr` is the same as `notificationPolicy \u003d\u003d BufferNotificationPolicy::DoNotNotify`.\n\nIn other words, you don\u0027t notify if there is no buffer, and you do notify if there was a buffer that is now being changed (also see other comment)",
      "range": {
        "startLine": 976,
        "startChar": 69,
        "endLine": 976,
        "endChar": 87
      },
      "revId": "3ed13d7e3662f2d3b29adb1ee026d4d0a237793f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "372780d8_b690c4c1",
        "filename": "src/libANGLE/renderer/vulkan/BufferVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 976,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-09-24T15:06:24Z",
      "side": 1,
      "message": "If we BufferData with the same size, we want to treat that as a SubData call. So yes this is necessary. This is for a future implementatino.",
      "parentUuid": "27552b8a_32fb5f05",
      "range": {
        "startLine": 976,
        "startChar": 69,
        "endLine": 976,
        "endChar": 87
      },
      "revId": "3ed13d7e3662f2d3b29adb1ee026d4d0a237793f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}