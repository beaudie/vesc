{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "dd26f87c_e5d7657e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-05-04T14:32:18Z",
      "side": 1,
      "message": "I looked extensively into the NBA2K20 gold failure. The difference is due to it using an rgb8 vertex format which previously used to be emulated with rgb32f but is now emulated with rgba8. I can verify that the added alpha is 1.0 (even though the shader takes a vec3 anyway, so it didn\u0027t matter) and that the vertex data input to the differing draw calls are identical (data exported from renderdoc). However, the affected draw calls have slightly different VS output (like 0.001% difference). I can\u0027t really explain where that difference comes from, but I\u0027d say the new conversion more accurately represents what the native driver does.\n\nAll that said, I think we should accept the new images!",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "caec5ea9_cde16756",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-05-04T14:37:13Z",
      "side": 1,
      "message": "Maybe fails NBA2k on Linux?",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "658fc8e9_4ede574c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-05-04T14:42:13Z",
      "side": 1,
      "message": "^ Other comment",
      "parentUuid": "dd26f87c_e5d7657e",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae9ee3a4_9b0ebbea",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-05-04T14:42:13Z",
      "side": 1,
      "message": "See my other comment.",
      "parentUuid": "caec5ea9_cde16756",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "01ad0c5e_2383a5e4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-05-04T15:01:10Z",
      "side": 1,
      "message": "I figured out what the issue is. ANGLE\u0027s unorm-\u003efloat conversion is producing 0x3f7fffff for 255, which is not exactly 1.0 (that is 0x3f800000). That confirms that the new NBA images are more accurate.\n\nI\u0027ll take a quick look to see if it\u0027s the CPU conversion code that\u0027s making this mistake or the GPU one. It\u0027s one bit of error, so there might not be much to do about it.",
      "parentUuid": "658fc8e9_4ede574c",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9289fdac_ab139c63",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2021-05-04T17:00:21Z",
      "side": 1,
      "message": "None of the diffs look too bad, except for professional_baseball_spirits on QC.   It may be worth re-running the android tests to see if that\u0027s just a flake or not.",
      "parentUuid": "01ad0c5e_2383a5e4",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "82656c98_bb031876",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2021-05-04T17:00:21Z",
      "side": 1,
      "message": "LGTM",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d8a82ae_dc517ab3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-05-04T18:19:26Z",
      "side": 1,
      "message": "@Tim, how can I tell from the GOLD interface if the baseball regression is showing me the results from the first or the second run? The failures have the same link. In particular, I don\u0027t know if the second run is failing baseball with minor differences, but GOLD is showing the images from the first run.\n\nI\u0027ll try to reproduce locally anyway and see what\u0027s going on.\n\n---\n\nBTW, it\u0027s the GPU conversion that\u0027s introducing this error. It\u0027s simply calculating 255.0f / 255.0f as 0x3f7fffff. Other than special-casing 255, I don\u0027t see a way to reliably avoid an off-by-one ULP in the shader.\n\nEither way, that\u0027s an unrelated problem to this change.",
      "parentUuid": "01ad0c5e_2383a5e4",
      "revId": "1e3450039a8e4ddb8eb28e2d9f783ea1c6f7dcc1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}