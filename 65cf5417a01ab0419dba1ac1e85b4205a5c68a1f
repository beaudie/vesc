{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4a76f71d_a12efea9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 33
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-02-04T01:54:09Z",
      "side": 1,
      "message": "Nice, all green!\nLooks good to me with two minor nit.",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cef84d12_0245270c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 33
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-02-06T17:20:24Z",
      "side": 1,
      "message": "Also some memory usage data before and after will be a good plus.",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f8f959f_054fd024",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 33
      },
      "lineNbr": 0,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-02-07T22:43:53Z",
      "side": 1,
      "message": "Sounds good. I will run trace tests to see the difference in memory usage.",
      "parentUuid": "cef84d12_0245270c",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93465ba0_830bb24d",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 33
      },
      "lineNbr": 4065,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-06T16:22:02Z",
      "side": 1,
      "message": "Did you manage to reproduce the failure locally? I fear this is just hiding a bug, like image memory reuse leading to caching issues.",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4aa43824_f791ec84",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 33
      },
      "lineNbr": 4065,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-02-07T22:43:53Z",
      "side": 1,
      "message": "I was able to reproduce the error on Windows (b/267811497). Each of the failing tests passes on its own. However, when run together, we see context comparison failures. Could it be a Swiftshader issue?",
      "parentUuid": "93465ba0_830bb24d",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e95cc58_8684eb56",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 33
      },
      "lineNbr": 4065,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-08T01:05:54Z",
      "side": 1,
      "message": "Maybe SwiftShader, maybe ANGLE; we are likely getting more reuse of memory (which one test alone is not enough to cause).\n\nHow does the repro look like, does the test itself pass during both capture and replay, but some image in the context is different? Does the captured test contain bad data? Or is replay the problem?",
      "parentUuid": "4aa43824_f791ec84",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db096546_bc35881b",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 33
      },
      "lineNbr": 4065,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-02-08T23:18:15Z",
      "side": 1,
      "message": "I also ran the capture/replay tests for `*MipmapTest.*/ES2_Vulkan` (no `_SwiftShader`), and the same tests fail locally.\n\nMany elements in texel levels seem to have become 0s in the replay JSON file.\nExample:\n-*Capture*:\n```\n                \"Texels-Level0-Layer0-hash\": \"SHA1:193FAC92343EC4D0E582B21D8A60EE7BF06ED397\",\n                \"Texels-Level0-Layer0-raw[0-15]\": [\n                    255,\n                    255,\n                    0,\n                    255,\n                    255,\n                    0,\n                    255,\n                    255,\n                    0,\n                    255,\n                    255,\n                    0,\n                    255,\n                    255,\n                    0,\n                    255\n                ],\n                \"Texels-Level0-Layer1-hash\": \"SHA1:6EAA115D3259099E550A8E783FA8BD870A089345\",\n                \"Texels-Level0-Layer1-raw[0-15]\": [\n                    255,\n                    0,\n                    0,\n                    0,\n                    255,\n                    0,\n                    0,\n                    0,\n                    255,\n                    0,\n                    0,\n                    255,\n                    0,\n                    0,\n                    255,\n                    0\n                ],\n```\n-*Replay*:\n```\n                \"Texels-Level0-Layer0-hash\": \"SHA1:F6CE5D67C927E731B75708EAB381320BE66E9F9D\",\n                \"Texels-Level0-Layer0-raw[0-15]\": [\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0\n                ],\n                \"Texels-Level0-Layer1-hash\": \"SHA1:6C699B14FA1B7AF4686000E725E3E1517451C574\",\n                \"Texels-Level0-Layer1-raw[0-15]\": [\n                    255,\n                    0,\n                    0,\n                    0,\n                    255,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0\n                ],\n```\nI tried capturing the tests in RenderDoc. The images look the same.",
      "parentUuid": "1e95cc58_8684eb56",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2a0df6d_f02282b5",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 33
      },
      "lineNbr": 4065,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-09T03:01:02Z",
      "side": 1,
      "message": "Just to be sure, can you try the capture/replay test without SwiftShader _before_ this change? Just to rule out some existing problem.\n\nAssuming that doesn\u0027t fail, there\u0027s a real regression with this change then.\n\n\u003e I tried capturing the tests in RenderDoc. The images look the same.\n\nDid you try capturing the _replay_ with RenderDoc?",
      "parentUuid": "db096546_bc35881b",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "687a8d52_70875546",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 33
      },
      "lineNbr": 4065,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-02-21T21:13:08Z",
      "side": 1,
      "message": "It looks like the replay context is similar to what we see in the baseline. However, the captured context after this CL has changed. It looks like a capture issue. ([More details](http://b/267811497#comment5))",
      "parentUuid": "b2a0df6d_f02282b5",
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fd77ce8_a3457dde",
        "filename": "src/tests/gl_tests/TextureTest.cpp",
        "patchSetId": 33
      },
      "lineNbr": 10104,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-02-04T01:54:09Z",
      "side": 1,
      "message": "Can you test with more, like 8000?",
      "range": {
        "startLine": 10104,
        "startChar": 37,
        "endLine": 10104,
        "endChar": 41
      },
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ab706e28_67def8fb",
        "filename": "src/tests/gl_tests/TextureTest.cpp",
        "patchSetId": 33
      },
      "lineNbr": 10104,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-02-07T22:43:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5fd77ce8_a3457dde",
      "range": {
        "startLine": 10104,
        "startChar": 37,
        "endLine": 10104,
        "endChar": 41
      },
      "revId": "65cf5417a01ab0419dba1ac1e85b4205a5c68a1f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}