{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1e623f03_d4574f9c",
        "filename": "src/libANGLE/renderer/vulkan/UtilsVk.cpp",
        "patchSetId": 11
      },
      "lineNbr": 4434,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-11-04T04:40:26Z",
      "side": 1,
      "message": "Shouldn\u0027t `image`\u0027s layout be overriden here? The `onImageDrawMipmapGenerationWrite` call makes the image think it\u0027s in color attachment layout... I wonder why there are no validation errors when the image is next used as sampler (and ANGLE inserts a COLOR_ATTACHMENT-\u003eSHADER_READ_ONLY transition)",
      "revId": "d8490829e74d57eca81af14b4f84d1bc6f97b8bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01d724b4_3e120707",
        "filename": "src/libANGLE/renderer/vulkan/UtilsVk.cpp",
        "patchSetId": 11
      },
      "lineNbr": 4434,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-11-04T12:27:29Z",
      "side": 1,
      "message": "\u003e I wonder why there are no validation errors when the image is next used as sampler\n\nindeed, once the last mip is transitioned to shader read-only then it is the case that ALL levels have been individually transitioned but the `ImageHelper`\u0027s layout still thinks it is in color attachment layout. Let me see why the subsequent readpixel works fine",
      "parentUuid": "1e623f03_d4574f9c",
      "revId": "d8490829e74d57eca81af14b4f84d1bc6f97b8bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad7ced58_d5b0302a",
        "filename": "src/tests/gl_tests/ImageTest.cpp",
        "patchSetId": 11
      },
      "lineNbr": 2276,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-11-04T04:35:06Z",
      "side": 1,
      "message": "This is not quite the same test as I mentioned in the other comment. The blend one in particular is about making sure the load op of the render pass is LOAD instead of DONT_CARE. The load op is a function of whether the contents of the color attachment are valid or not.\n\nSo it\u0027s the `dstTexture` itself that should be rendered too, not used as a sampler. The content validity tracking has no effect on sampler usage of the texture.\n\nWould you please move this to a separate test where the blend-into-mip-1 is done right after `glGenerateMipmap` with nothing in between it? And the blend should be _into_ mip 1, not _sampling from_ mip 1.",
      "revId": "d8490829e74d57eca81af14b4f84d1bc6f97b8bd",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}