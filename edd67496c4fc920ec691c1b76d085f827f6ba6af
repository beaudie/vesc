{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e82598c4_8e76d52f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2023-02-03T22:00:22Z",
      "side": 1,
      "message": "Could you mention in a new paragraph:\n\nReland: continue to allocate buffers with shared rather than managed mode in BufferPool, as otherwise bug angleproject:7997 is encountered.",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f173482_56fd3eae",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 1449558
      },
      "writtenOn": "2023-02-06T09:26:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e82598c4_8e76d52f",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1639097a_bdf7c431",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2023-02-02T22:08:46Z",
      "side": 1,
      "message": "Do you think we should wait for Quyen\u0027s fix https://chromium-review.googlesource.com/c/angle/angle/+/4217055 to land first at this point? Will re-review later today.",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc97def9_25bb4802",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1449558
      },
      "writtenOn": "2023-02-03T06:31:19Z",
      "side": 1,
      "message": "No, the intention is that whatever bugs were before, would be also after this patch, except the bug being fixed here.\n\nThe bug change of behavior in bas version of this patch would exacerbate the bug that Quyen is fixing, but it is otherwise orthogonal.",
      "parentUuid": "1639097a_bdf7c431",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "96e17356_b3bbaaa4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2023-02-03T22:00:22Z",
      "side": 1,
      "message": "lgtm to reland. A couple of questions.",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17735289_b34e3b40",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.mm",
        "patchSetId": 2
      },
      "lineNbr": 512,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2023-02-03T22:00:22Z",
      "side": 1,
      "message": "Could you add a TODO stating that this mapping to FrequentCPU isn\u0027t really accurate based on these usages, but that this matches earlier behavior of this code which allocated buffers of these usages in shared memory?",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2e77b6b_20705ef7",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.mm",
        "patchSetId": 2
      },
      "lineNbr": 512,
      "author": {
        "id": 1449558
      },
      "writtenOn": "2023-02-06T09:26:57Z",
      "side": 1,
      "message": "If you think FrequentCPU is not accurate, I don\u0027t want to add that with a todo.\n\nThe original idea was to express what the current implementation does (\"accesses frequently with CPU\"), not what OpenGL states these hints should do. We don\u0027t need yet-another enum for marking up what OpenGL spec wrote in those tables. That\u0027s pointless.\n\nIf the existing implementation wants to create a shared buffer, that is frequent cpu access, not frequent gpu access. \n\nWhat would be accurate to you?\n\nSuggesting one alternative formulation of this. Unfortunately it needs a todo then, too.",
      "parentUuid": "17735289_b34e3b40",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6f039f6d_9d0bf396",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.mm",
        "patchSetId": 2
      },
      "lineNbr": 512,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2023-02-06T20:17:46Z",
      "side": 1,
      "message": "Thanks for restructuring this - it looks better to me in this form.",
      "parentUuid": "a2e77b6b_20705ef7",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88203c83_a02a6936",
        "filename": "src/libANGLE/renderer/metal/mtl_buffer_pool.mm",
        "patchSetId": 2
      },
      "lineNbr": 116,
      "author": {
        "id": 1449558
      },
      "writtenOn": "2023-02-02T12:40:28Z",
      "side": 1,
      "message": "So here was the unintended change of behavior:\n\nPreviously, BufferPool would always create Shared buffers, unless test feature forceBufferGPUStorage was on.\n\nAfter, BufferPool would respect alwaysUseManagedStorageModeForBuffers and alwaysUseSharedStorageModeForBuffers, too.\n\nThis would run into bug angleproject:7997, as it would create the buffer as Managed, and they don\u0027t work.\n\n--\n\nWith the reland, the behavior is the same as previously: BufferPool always creates Shared buffers, unless test feature forceBufferGPUStorage is on.",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e82e3329_e732243b",
        "filename": "src/libANGLE/renderer/metal/mtl_buffer_pool.mm",
        "patchSetId": 2
      },
      "lineNbr": 116,
      "author": {
        "id": 1449558
      },
      "writtenOn": "2023-02-02T19:56:40Z",
      "side": 1,
      "message": "(resolved)",
      "parentUuid": "88203c83_a02a6936",
      "revId": "edd67496c4fc920ec691c1b76d085f827f6ba6af",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}