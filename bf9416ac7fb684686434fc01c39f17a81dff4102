{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ebdaa7f0_d418a129",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-07-25T01:47:44Z",
      "side": 1,
      "message": "No opinion, leaving to Igor to +2",
      "revId": "bf9416ac7fb684686434fc01c39f17a81dff4102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a3b3884_95350669",
        "filename": "src/libANGLE/Thread.cpp",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-07-25T11:21:55Z",
      "side": 1,
      "message": "Looks strange.\n\nWhy need to call `threadCleanup()` when no Context is current, but do **not** need when Context from some other Display is Current?\n\nI think that we need to call `threadCleanup()` for all Displays to cleanup from any previous use by these Displays.\n\nI still think that my 2 CLs simpler and handle more cases. I do not know why you decided to rewrite what I originally proposed? Something was originally wrong with my CLs?",
      "revId": "bf9416ac7fb684686434fc01c39f17a81dff4102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f082c2c_d0b00b28",
        "filename": "src/libANGLE/Thread.cpp",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-07-25T11:39:54Z",
      "side": 1,
      "message": "In any case I still want to submit:\n4708328: Perform Display terminate(InternalCleanup) from makeCurrent() | https://chromium-review.googlesource.com/c/angle/angle/+/4708328\n\n... because it handles different problem.\n\nHowever, if above CL lends, yours:\n4708978: Clean up current context marked for destroy during thread exit | https://chromium-review.googlesource.com/c/angle/angle/+/4708978\n\n... will look overly complicated and everything in `Display::threadCleanup()` can be replaced with `makeCurrent(context, nullptr, nullptr, nullptr)`.\nResult will be almost the same, except that Context will be also unmade from current when thread terminates. I think it is better to do this rather than keep Context current to a terminated thread. Need to check spec. about this.",
      "parentUuid": "6a3b3884_95350669",
      "revId": "bf9416ac7fb684686434fc01c39f17a81dff4102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f82b294_e37dd2ce",
        "filename": "src/libANGLE/Thread.cpp",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2023-07-25T17:07:09Z",
      "side": 1,
      "message": "\u003e Why need to call threadCleanup() when no Context is current, but do not need when Context from some other Display is Current?\n\nthis change was in response to your comment [1] about the currentcontext not being from this display and has nothing to do with any other change\n\n\u003e I think that we need to call threadCleanup() for all Displays to cleanup from any previous use by these Displays.\n\nthere can only be 1 current context on a thread associated with a given display, any subsequent makecurrent calls will trigger an unmakecurrent on previous bound context\n\n\n\u003e I still think that my 2 CLs simpler and handle more cases. I do not know why you decided to rewrite what I originally proposed? Something was originally wrong with my CLs?\n\n1. it is not necessary for terminate to have been called during threadcleanup in which case your change will not cleanup a destroyed context\n2. calling releasethread when the app hasnt even terminated the display seems strange and confusing\n3. not clear what \"more cases\" are you trying to fix\n\n\"simpler\" is subjective. Given the timeline constraints and internal validation requirements the goal was to have a targeted change with minimal code change and maximum code reuse that fixes the issue at hand. I honestly do not know what your change is trying to fix given the lack of test cases.\n\ndue to bandwidth constraints i need to switch gears to other issues but if you want to sync about co-ordinating better please reach out to me via internal channels and will be happy to chat\n\n[1] - https://chromium-review.googlesource.com/c/angle/angle/+/4708978/5#message-190d38c90a38cfc2f03a227b7f329af079178089",
      "parentUuid": "4f082c2c_d0b00b28",
      "revId": "bf9416ac7fb684686434fc01c39f17a81dff4102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35d7a243_e52ff28f",
        "filename": "src/libANGLE/Thread.cpp",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-07-25T17:21:59Z",
      "side": 1,
      "message": "\u003e it is not necessary for terminate to have been called during threadcleanup in which case your change will not cleanup a destroyed context\n\nI do not understand this.\n\n\u003e calling releasethread when the app hasnt even terminated the display seems strange and confusing\n\nI added this becase app with the problem was calling `releaseThread()` and now it will be ignored.\n\n\u003e not clear what \"more cases\" are you trying to fix\n\nLike fully terminate Display when last Context is made not current, for example...\n\n\u003e \"simpler\" is subjective. Given the timeline constraints and internal validation requirements the goal was to have a targeted change with minimal code change and maximum code reuse that fixes the issue at hand. I honestly do not know what your change is trying to fix given the lack of test cases\n\nMy change was the original fix. And I believe it has less diff. You decided that you need to rewrite without contacting me. This is demotivating to suggest fixes in the future. Do you want this?\n\n\u003e due to bandwidth constraints i need to switch gears to other issues but if you want to sync about co-ordinating better please reach out to me via internal channels and will be happy to chat\n\nI do not think that I would be happy to chat, sorry. I already had change to review you change and I do not ant to repeat. This is too much  physiological stress for me...\n\nSo do as you see necessary.",
      "parentUuid": "0f82b294_e37dd2ce",
      "revId": "bf9416ac7fb684686434fc01c39f17a81dff4102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}