{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8e281106_8b99ca95",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 42
      },
      "lineNbr": 748,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-06-07T21:58:45Z",
      "side": 1,
      "message": "So we are compiling two programs immediately regardless if both rotation will actually used or not. Wouldn\u0027t this causing unnecessary memory consumption and double launch time? Would you consider just pick one program to warm up and leave the other one compile as needed (or compile in separate thread)?",
      "range": {
        "startLine": 739,
        "startChar": 0,
        "endLine": 748,
        "endChar": 0
      },
      "revId": "ac2591513681afa51ed8189ce9715ee59433d7cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6a1ee64_5f8a26d9",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 42
      },
      "lineNbr": 748,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-06-08T01:40:02Z",
      "side": 1,
      "message": "The problem is you can\u0027t know which rotation the program will actually be used in.\n\nI agree that a trick like \"compile for the current rotation, compile the other rotation in a background thread\" is a good idea, but that\u0027s sort of irrelevant for us with https://chromium-review.googlesource.com/c/angle/angle/+/3692270\n\nIf you don\u0027t mind, I\u0027d rather leave that for a future CL.",
      "parentUuid": "8e281106_8b99ca95",
      "range": {
        "startLine": 739,
        "startChar": 0,
        "endLine": 748,
        "endChar": 0
      },
      "revId": "ac2591513681afa51ed8189ce9715ee59433d7cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e746112_ba55b41d",
        "filename": "src/libANGLE/renderer/vulkan/ProgramExecutableVk.cpp",
        "patchSetId": 42
      },
      "lineNbr": 748,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-06-08T21:24:12Z",
      "side": 1,
      "message": "Could you try with app trace to see how much more memory it uses and how long the first frame it takes before/after the CL. My worry is that we are wasting extra time/memory here for nothing because the program is used only for FBO (it only uses one rotation).\n\nOr, maybe you could gather some statistics to see the percentages of programs are running with rotation and pick one has the most statistics. My guess is most program is for FBO, so no rotation is applied, and we could just bet on that.",
      "parentUuid": "d6a1ee64_5f8a26d9",
      "range": {
        "startLine": 739,
        "startChar": 0,
        "endLine": 748,
        "endChar": 0
      },
      "revId": "ac2591513681afa51ed8189ce9715ee59433d7cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}