{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7286f2f1_b0efa30a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-02-01T19:58:17Z",
      "side": 1,
      "message": "LGTM",
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea988602_a094258d",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 407,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-01T20:02:21Z",
      "side": 1,
      "message": "naming nit: `Comands*` everywhere, we prefer complete names over shorthand for clarity.",
      "range": {
        "startLine": 407,
        "startChar": 15,
        "endLine": 407,
        "endChar": 19
      },
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a31c4c78_f5aa6114",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 407,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-02T16:41:59Z",
      "side": 1,
      "message": "Understand.",
      "parentUuid": "ea988602_a094258d",
      "range": {
        "startLine": 407,
        "startChar": 15,
        "endLine": 407,
        "endChar": 19
      },
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0dfc0279_af39ac14",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 407,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-02T20:03:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a31c4c78_f5aa6114",
      "range": {
        "startLine": 407,
        "startChar": 15,
        "endLine": 407,
        "endChar": 19
      },
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e84c99ee_8458942d",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 414,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-01T20:02:21Z",
      "side": 1,
      "message": "Feel free to move this out of this class, and have it be used everywhere (including RendererVk, ContextVk etc) so we can avoid all the bools.",
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fdcdd1da_1e24a574",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 414,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-02T16:41:59Z",
      "side": 1,
      "message": "Not sure if I will be able to do that.\n\n`hasProtectedContent()` originates from `gl::State` which is common layer.\nThere are also many other such functions in other classes and they are abstract.\n\nAdditionally, what the name of the enum should be? Because I do not understand what new items may appear in the future. And if there will be some additional items, splitting `CmdsState` structure for the new item may be incorrect. Because right now, there must be only 2 `CmdsState` instances - future is unknown.\n\nSo maybe just keep 2 separate `CommandsState` members (assuming renaming):\n```\nCommandsState \u0026getCmmandsState(bool hasProtectedContent)\n{\n    return hasProtectedContent ? mProtectedCommandsStateMap : mCommandsStateMap;\n}\n ```",
      "parentUuid": "e84c99ee_8458942d",
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "791dfaf5_259e2446",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 414,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-02T17:39:37Z",
      "side": 1,
      "message": "That\u0027s ok, let\u0027s defer that to another time. I was thinking of something that\u0027s internal to the Vulkan backend (so bool-\u003eenum happening somewhere in the backend). Regarding the name, it could simply be `CommandPriority` and we can change that if and when we need to extend it.\n\n(For future reference, I had marked this comment \"Resolved\", which implies you don\u0027t have to take action on it for this CL if you prefer not to ðŸ˜Š)",
      "parentUuid": "fdcdd1da_1e24a574",
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "48609a75_1019e552",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 414,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-02T18:04:11Z",
      "side": 1,
      "message": "Yeah. I know it is resolved, I really wanted to made changes, but than stumbled.\n\nRegarding name. For me `CommandPriority` is confusing with `egl::ContextPriority`. Maybe you wanted to write \u0027CommandContent\u0027?\n\n\u003e I was thinking of something that\u0027s internal to the Vulkan backend (so bool-\u003eenum happening somewhere in the backend)\n\nMost methods pure virtual and need to keep `bool`.\n\nAnd for the `ContextVk::hasProtectedContent()` I think it is better to add additional method with enum. Otherwise there will be conversion to `bool` in the `QueryContextAttrib()`.\n\nAnyway, I need to submit this refactoring. And for that I need at lest rename `Cmds*` to `Commands*`. Also move `CmdsContentType` out of the class, but with the different name. Refactoring in other classes add later with different CL.",
      "parentUuid": "791dfaf5_259e2446",
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7c724e7_10c6ef84",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 414,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-03T14:48:18Z",
      "side": 1,
      "message": "\u003e I really wanted to made changes\n\n:thumbsup:\n\n\u003e For me CommandPriority is confusing with egl::ContextPriority. Maybe you wanted to write \u0027CommandContent\u0027?\n\nCommandPriority is better IMO, or QueuePriority, it _is_ corresponding to the context priority after all! \"Content\" is maybe a little too generic. Anyway, bikeshedding, no big deal either way.\n\n\u003e And for the ContextVk::hasProtectedContent() I think it is better to add additional method with enum. Otherwise there will be conversion to bool in the QueryContextAttrib().\n\nJust to avoid confusion, `ContextVk` is a backend object, `Context` is a front-end object. `QueryContextAttrib()` is a front-end function that uses the front-end object. The front-end mirrors the GL/EGL specs, so state can indeed stay bool (not necessarily, but that\u0027s another story). There should be no problem there whatever happens in the backend.\n\n`ContextVk::hasProtectedContent` looks at the front-end state (`mState`), and actually that _would_ be a good place to convert that bool to an enum. The rest of the _backend_ would only use the enum.\n\n\u003e Anyway, I need to submit this refactoring.\n\nSounds good, this can be a follow up.",
      "parentUuid": "48609a75_1019e552",
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35671542_7d0eb3d4",
        "filename": "src/libANGLE/renderer/vulkan/CommandProcessor.h",
        "patchSetId": 1
      },
      "lineNbr": 414,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-03T14:59:09Z",
      "side": 1,
      "message": "Thanks for detailed answer.\n\n\u003e Just to avoid confusion, ContextVk is a backend object, Context is a front-end object.\nI know this, just made a mistake. Happens some times)\n\n\u003e CommandPriority is better IMO, or QueuePriority, it is corresponding to the context priority after all! \"Content\" is maybe a little too generic. Anyway, bikeshedding, no big deal either way.\n\nI still do not understand. How is this related to context priority.\nIt is all abound protected/unprotected content.\nWe need different Command Pools ans well as Command Buffers.\n\nPriority is another level. We may use same Command Pool with different priorities.\nSo first split based on protected/unprotected, and the based on priority (optional).",
      "parentUuid": "a7c724e7_10c6ef84",
      "revId": "5d7bca9207b004b9edd956eebed7f474e02c8c66",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}