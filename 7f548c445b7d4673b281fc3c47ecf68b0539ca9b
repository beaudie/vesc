{
  "comments": [
    {
      "key": {
        "uuid": "846ba738_a6590bb7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 31
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-10T21:28:57Z",
      "side": 1,
      "message": "PTAL",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be2af1b1_9f1b3011",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4322,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-08-10T22:31:36Z",
      "side": 1,
      "message": "I think this should be \nif(mRenderPassCommanbds-\u003euseBufferForWrite(*buffer))\n    endRenderPass();",
      "range": {
        "startLine": 4322,
        "startChar": 29,
        "endLine": 4322,
        "endChar": 39
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c05824c0_9a8462ee",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4322,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-10T22:47:05Z",
      "side": 1,
      "message": "Would it be alright to land this as a follow-up? I know this works so would like to be conservative. Happy to make a quick follow up with that change.",
      "parentUuid": "be2af1b1_9f1b3011",
      "range": {
        "startLine": 4322,
        "startChar": 29,
        "endLine": 4322,
        "endChar": 39
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14245512_0c63afb9",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4322,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-08-10T22:59:31Z",
      "side": 1,
      "message": "yes, of course!",
      "parentUuid": "c05824c0_9a8462ee",
      "range": {
        "startLine": 4322,
        "startChar": 29,
        "endLine": 4322,
        "endChar": 39
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c9040a9_1322aa2d",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4376,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-11T00:12:38Z",
      "side": 1,
      "message": "Similar to ContextVk::onBufferRead() above, can this only end the render pass if the image has only been read so far?",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c4ed9d8_756f52f6",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4376,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-11T18:28:56Z",
      "side": 1,
      "message": "Again the code changed so much I forget all the iterations of things I tried. Just guessing, the issue is that read layout changes are not compatible. e.g. transfer vs shader read only. I left a comment here although I haven\u0027t fully verified this.",
      "parentUuid": "7c9040a9_1322aa2d",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab98befd_8305b832",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4376,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-12T18:29:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5c4ed9d8_756f52f6",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23fc213b_69137801",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4410,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-11T00:12:38Z",
      "side": 1,
      "message": "Is the \"flush\" part of this name still accurate without flushing the outside render pass anymore?   Or are we considing endRenderPass() as flushing the current render pass?",
      "range": {
        "startLine": 4410,
        "startChar": 25,
        "endLine": 4410,
        "endChar": 30
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a7470ea_f68bfa48",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4410,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-11T18:28:56Z",
      "side": 1,
      "message": "I renamed this to beginNewRenderPass and added an ASSERT. Let\u0027s see if it picks up anything on the bots.",
      "parentUuid": "23fc213b_69137801",
      "range": {
        "startLine": 4410,
        "startChar": 25,
        "endLine": 4410,
        "endChar": 30
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5253fa9a_839840ec",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 4410,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-12T18:29:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8a7470ea_f68bfa48",
      "range": {
        "startLine": 4410,
        "startChar": 25,
        "endLine": 4410,
        "endChar": 30
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bab5e215_efbff63a",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 1964,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-08-10T22:59:31Z",
      "side": 1,
      "message": "It will be more straight forward if you can just do this:\nASSERT(commands.getCommandBuffer().empty());\n\nAlso I am a bit confused why we need this new block of logic (between line 1962 to 2011) here? Is it refactor or required due to the functional change?",
      "range": {
        "startLine": 1964,
        "startChar": 16,
        "endLine": 1964,
        "endChar": 61
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6093289_66d6fadb",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 1964,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-11T00:12:38Z",
      "side": 1,
      "message": "I agree, these clear changes seem unrelated.   Can they be split off?",
      "parentUuid": "bab5e215_efbff63a",
      "range": {
        "startLine": 1964,
        "startChar": 16,
        "endLine": 1964,
        "endChar": 61
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3565639e_6490d3f0",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 1964,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-11T18:28:56Z",
      "side": 1,
      "message": "Because we\u0027re no longer breaking RenderPasses as often the LoadOp clears get mucked up if we don\u0027t handle them explicitly. I\u0027d guess this new code isn\u0027t reachable before this CL so putting it in a prior CL won\u0027t necessarily be testable.\n\nLMK if this is OK.",
      "parentUuid": "a6093289_66d6fadb",
      "range": {
        "startLine": 1964,
        "startChar": 16,
        "endLine": 1964,
        "endChar": 61
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "702349be_e2e4e64b",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 31
      },
      "lineNbr": 1964,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-12T18:29:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3565639e_6490d3f0",
      "range": {
        "startLine": 1964,
        "startChar": 16,
        "endLine": 1964,
        "endChar": 61
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64c78cb7_0cc6a58e",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 31
      },
      "lineNbr": 667,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-11T00:12:38Z",
      "side": 1,
      "message": "Why don\u0027t we need to treat these like storage buffers and only track usages when aliasing is disallowed?",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0714860b_ee0cd930",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 31
      },
      "lineNbr": 667,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-11T18:28:56Z",
      "side": 1,
      "message": "It\u0027s a good question and I forget the details. This code changed so many times I don\u0027t recall the iteration where I disabled tracking for storage buffers. Is that a satisfactory answer or would you like me to look into it?",
      "parentUuid": "64c78cb7_0cc6a58e",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57798064_365bf159",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 31
      },
      "lineNbr": 667,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-12T18:29:38Z",
      "side": 1,
      "message": "Please leave a comment here explaining why images are treated differently from buffers.",
      "parentUuid": "0714860b_ee0cd930",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7aa91da6_dde9c69a",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 31
      },
      "lineNbr": 667,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-12T22:02:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "57798064_365bf159",
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4a73eac8_8da1c52b",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 31
      },
      "lineNbr": 980,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-08-10T22:40:41Z",
      "side": 1,
      "message": "Can\u0027t this be symmetrical to buffer API, i.e. usesImage()?",
      "range": {
        "startLine": 980,
        "startChar": 9,
        "endLine": 980,
        "endChar": 30
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e40df62_c08fd45a",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 31
      },
      "lineNbr": 980,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-10T22:47:05Z",
      "side": 1,
      "message": "It\u0027s only tracked for RenderPasses. Hence the nomenclature.",
      "parentUuid": "4a73eac8_8da1c52b",
      "range": {
        "startLine": 980,
        "startChar": 9,
        "endLine": 980,
        "endChar": 30
      },
      "revId": "7f548c445b7d4673b281fc3c47ecf68b0539ca9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}