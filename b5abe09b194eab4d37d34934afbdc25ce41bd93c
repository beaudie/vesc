{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0d24b295_0f502393",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1509302
      },
      "writtenOn": "2022-04-11T23:45:33Z",
      "side": 1,
      "message": "Some additional updates might be needed here per `EGL_KHR_mutable_render_buffer` spec:\n```\n    If surface is a single-buffered window, pixmap, or pbuffer surface for which\n    there is a pending change to the EGL_RENDER_BUFFER attribute, eglSwapBuffers\n    performs an implicit flush operation on the context and effects the\n    attribute change. If surface is a single-buffered window, pixmap, or pbuffer\n    surface for which there is no pending change to the EGL_RENDER_BUFFER\n    attribute, eglSwapBuffers has no effect.\n```\nI can see now `glFlush` is doing the right thing. Can we update `eglSwapBuffers` to follow the spec as well? I see some apps doing redundant `eglSwapBuffers` but ANGLE is still doing the `WindowSurfaceVk::present` there (hurts performance). That is better to be avoided I think.",
      "revId": "b5abe09b194eab4d37d34934afbdc25ce41bd93c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6dff10c_3a61bd0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1509302
      },
      "writtenOn": "2022-04-11T23:47:06Z",
      "side": 1,
      "message": "I mean `WindowSurfaceVk::present` better to be switched with a hook to `ContextVk::flushImpl` with autorefresh mode.",
      "parentUuid": "0d24b295_0f502393",
      "revId": "b5abe09b194eab4d37d34934afbdc25ce41bd93c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "564c4a84_74a2749c",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-04-12T02:39:54Z",
      "side": 1,
      "message": "This is incorrect. We don\u0027t want this unless render buffer is specifically EGL_SINGLE_BUFFER.\n\nIt seems to me otherwise that for swap interval 1 we\u0027ll now always pick DEMAND/CONTINUOUS instead of FIFO. That can\u0027t be right, can it?",
      "revId": "b5abe09b194eab4d37d34934afbdc25ce41bd93c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62e83ff8_4e08a82b",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1945,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-04-12T02:39:54Z",
      "side": 1,
      "message": "I think you can remove DEMAND_REFRESH. The current logic is not correct for it (IIUC, DEMAND_REFRESH is really more like the normal ones (like FIFO/IMMEDIATE/etc) in ANI/QP behavior. It\u0027s only CONTINUOUS_REFRESH that\u0027s special in that regard.\n\nI don\u0027t know if we ever need DEMAND_REFRESH, unless you know an EGL extension that maps to it?",
      "range": {
        "startLine": 1945,
        "startChar": 35,
        "endLine": 1945,
        "endChar": 76
      },
      "revId": "b5abe09b194eab4d37d34934afbdc25ce41bd93c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}