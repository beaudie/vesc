{
  "comments": [
    {
      "key": {
        "uuid": "f1cd8579_a552ce10",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-02-27T16:53:46Z",
      "side": 1,
      "message": "I think it was actually the do / while refactor. So you could probably update this.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 21,
        "endChar": 13
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c269cdb_54682bf2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-02-27T16:56:20Z",
      "side": 1,
      "message": "Yeap, that\u0027s what I was gonna say as well. Now the question is why it was working on debug!\n\nAlso, the issue with sentences that say \"... the compiler ...\" is that there is no such thing as _the_ compiler. If you try it on some compiler version, there is no guarantee it would work on another compiler, or even a different version of the same compiler.",
      "parentUuid": "f1cd8579_a552ce10",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 21,
        "endChar": 13
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36561a6e_1494a68c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-02-27T17:43:01Z",
      "side": 1,
      "message": "Yeah, I started there but that did NOT fix the issue. I had to add the static variable for things to behave the way I wanted. Maybe I could put the do / while back the way it was but that seems wrong - scope ends at the end of the macro which I don\u0027t think what\u0027s intended.\n\nI could see that some compilers wouldn\u0027t have the issue because they always waited until end-of-scope to call the destructor. For those that do call the destructor early, by having an obvious side effect, the compiler is required to wait to destroy the object until the end of scope - at least that\u0027s the general consensus on StackOverflow. If the compiler were to do the destroy earlier that would be a bug.",
      "parentUuid": "4c269cdb_54682bf2",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 21,
        "endChar": 13
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a625c278_5ba7b304",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-03-01T14:38:20Z",
      "side": 1,
      "message": "I don\u0027t see why using a static variable would be considered to have side effects while calling an external function would not. It does sound like a compiler bug. I checked on the Windows clang distribution. And it correctly destroyed at the end of the scope without the static. Could you double check? I\u0027ll double check myself too next time I\u0027m in the office. We should report the compiler bug if there is one.",
      "parentUuid": "36561a6e_1494a68c",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 21,
        "endChar": 13
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71e500ee_b9378b02",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-03-01T14:41:05Z",
      "side": 1,
      "message": "Sure, I\u0027ll double check.",
      "parentUuid": "a625c278_5ba7b304",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 21,
        "endChar": 13
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83c68583_aaef3a17",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-03-01T18:05:49Z",
      "side": 1,
      "message": "Okay, this time I get good behavior. I must have had something confusing things last time.\nYay, this change makes sense.",
      "parentUuid": "71e500ee_b9378b02",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 21,
        "endChar": 13
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7bb5048_2df1537e",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 474,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-02-27T16:53:46Z",
      "side": 1,
      "message": "aha, the do while refactor got us! good catch. I broke this accidentally in https://chromium-review.googlesource.com/c/1446493",
      "range": {
        "startLine": 466,
        "startChar": 0,
        "endLine": 474,
        "endChar": 5
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa493f4e_e7d8541d",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 479,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-02-27T17:53:46Z",
      "side": 1,
      "message": "I should probably remove any other do / while\u0027s in these macros as well.",
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64fa17e2_505a4c78",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 479,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-02-27T18:06:05Z",
      "side": 1,
      "message": "No, this should be okay. We are\u0027t creating the gl::TraceEvent::TraceEndOnScopeClose object here. Here we are just adding an event. No scoping involved.",
      "parentUuid": "fa493f4e_e7d8541d",
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f79d3cc3_62608e12",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 533,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-02-27T16:53:46Z",
      "side": 1,
      "message": "you can remove this",
      "range": {
        "startLine": 533,
        "startChar": 0,
        "endLine": 533,
        "endChar": 39
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02f8c722_2f812930",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 533,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-02-27T17:43:01Z",
      "side": 1,
      "message": "Without this, Android\u0027s compiler will immediately destroy the scoped trace.",
      "parentUuid": "f79d3cc3_62608e12",
      "range": {
        "startLine": 533,
        "startChar": 0,
        "endLine": 533,
        "endChar": 39
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93055c6b_73cc254c",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 533,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-02-27T17:45:33Z",
      "side": 1,
      "message": "What compiler are you using? Isn\u0027t the same one Chrome uses? (e.g. a new version of Clang)",
      "parentUuid": "02f8c722_2f812930",
      "range": {
        "startLine": 533,
        "startChar": 0,
        "endLine": 533,
        "endChar": 39
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42596bfb_18c36079",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 533,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-02-27T17:53:46Z",
      "side": 1,
      "message": "Using the standard compiler. Build shows: \n../../third_party/llvm-build/Release+Asserts/bin/clang++",
      "parentUuid": "93055c6b_73cc254c",
      "range": {
        "startLine": 533,
        "startChar": 0,
        "endLine": 533,
        "endChar": 39
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aaa23a93_a71e897b",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 713,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-02-27T16:53:46Z",
      "side": 1,
      "message": "and these",
      "range": {
        "startLine": 710,
        "startChar": 0,
        "endLine": 713,
        "endChar": 29
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a22b9db_bab5da4c",
        "filename": "src/third_party/trace_event/trace_event.h",
        "patchSetId": 2
      },
      "lineNbr": 713,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2019-02-27T17:43:01Z",
      "side": 1,
      "message": "Won\u0027t work without this.",
      "parentUuid": "aaa23a93_a71e897b",
      "range": {
        "startLine": 710,
        "startChar": 0,
        "endLine": 713,
        "endChar": 29
      },
      "revId": "fe587a3bb5494cad0d780a842fbd68a97aed78f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}