{
  "comments": [
    {
      "key": {
        "uuid": "fab26d1a_a6416d19",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-06-18T23:42:20Z",
      "side": 1,
      "message": "What things are you referring to here?\n\nWhy is this necessary?   Shouldn\u0027t the files being downloaded mean this is the first time the build has seen them so they necessarily have to be part of whatever build includes them?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 12,
        "endChar": 8
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "602ae645_c0f6b808",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T02:02:25Z",
      "side": 1,
      "message": "According to Jamie, the build bots do not clean out the files prior to building so we have whatever files were left from the last build. If the next build pulls down different trace files that have a timestamp older than the dependent binaries the build doesn\u0027t think there is anything that needs to happen.\nWe aren\u0027t doing a git checkout here, we are extracting files from a zip which tries to preserve file modification times.",
      "parentUuid": "fab26d1a_a6416d19",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 12,
        "endChar": 8
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c2cb05e_ea0f0c0e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T15:38:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "602ae645_c0f6b808",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 12,
        "endChar": 8
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f755eb9b_59d2440a",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-06-18T23:42:20Z",
      "side": 1,
      "message": "This should target Python 3.   Python 2 went EOL January 1, 2020 (6 months ago).",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 18
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6ed1866_0397a8f8",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T02:02:25Z",
      "side": 1,
      "message": "Great question. I don\u0027t know what the expectation is for build scripts. If so, there are a bunch of scripts that need to update.",
      "parentUuid": "f755eb9b_59d2440a",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 18
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "556b486e_c06ee4c5",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-06-19T03:14:56Z",
      "side": 1,
      "message": "I\u0027m fine with fixing scripts that already exist as we need to, but I think any new scripts should target Python 3.",
      "parentUuid": "f6ed1866_0397a8f8",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 18
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "962f2a5d_21aeb676",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-19T12:45:14Z",
      "side": 1,
      "message": "This is true, we should target py3. I guess the CQ is unblocked now so no need to force this through.",
      "parentUuid": "556b486e_c06ee4c5",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 18
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcd3bb79_ae0a4f38",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T15:38:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "962f2a5d_21aeb676",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 18
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c9b64f5_fc185bf1",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2020-06-18T23:11:05Z",
      "side": 1,
      "message": "Need to update this",
      "range": {
        "startLine": 7,
        "startChar": 2,
        "endLine": 7,
        "endChar": 25
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ca779a1_433e2c91",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T02:02:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5c9b64f5_fc185bf1",
      "range": {
        "startLine": 7,
        "startChar": 2,
        "endLine": 7,
        "endChar": 25
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b8d5518_793fc4a0",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-06-18T23:42:20Z",
      "side": 1,
      "message": "Does using \u0027--force\u0027 help instead of needing this script?\n\n    -f, --force           Force download even if local file exists.",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 47,
        "endChar": 5
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7bf1746e_3e21c32b",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T02:02:25Z",
      "side": 1,
      "message": "No, the download_from_google_storage script (well the tar library it uses) will set the modification time to match the time of the file when the zip was created. The build then sees these files as old and thus the dependent binaries don\u0027t need to be updated.\nVs. what git checkout does which always updates the modification time even though you may be checking out older versions of a file.",
      "parentUuid": "5b8d5518_793fc4a0",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 47,
        "endChar": 5
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eda2ca03_16aade0b",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-06-19T03:14:56Z",
      "side": 1,
      "message": "Can we add an option to that script to use the \u0027--touch\u0027 flag for tar?\n\n    -m, --touch                don\u0027t extract file modified time\n\nThat seems like a simpler fix than this script, which could also benefit other people.",
      "parentUuid": "7bf1746e_3e21c32b",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 47,
        "endChar": 5
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d3dd10a_ac5687f5",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-06-19T03:45:23Z",
      "side": 1,
      "message": "That script uses `TarFile.extractall` [1], which doesn\u0027t have this feature.\n\nThe logic in this script should eventually be ported to depot_tools though I agree. It\u0027s probably best to commit this to resolve our immediate issue, then port it to depot_tools.\n\n[1]: https://docs.python.org/3/library/tarfile.html#tarfile.TarFile.extractall",
      "parentUuid": "eda2ca03_16aade0b",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 47,
        "endChar": 5
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b468a037_9233491c",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-06-19T03:50:20Z",
      "side": 1,
      "message": "Ah, ok. That\u0027s a shame. Thanks for digging into that.",
      "parentUuid": "7d3dd10a_ac5687f5",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 47,
        "endChar": 5
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c46c3960_b812413e",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T15:38:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b468a037_9233491c",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 47,
        "endChar": 5
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2fcd32c_d215a145",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2020-06-18T23:11:05Z",
      "side": 1,
      "message": "I tested this locally and it worked for the files in the directories, but not the directories themselves.  Can we update this to touch the directories as well?  Then you can see very quickly that all the traces have been updated, rather than navigate into each directory.",
      "range": {
        "startLine": 61,
        "startChar": 8,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b678247_9e8defd5",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-06-18T23:42:20Z",
      "side": 1,
      "message": "Should be easy enough with:\n\n    target \u003d os.path.relpath(dirname, os.path.join(trace_dir, trace))\n    os.utime(target, None)",
      "parentUuid": "f2fcd32c_d215a145",
      "range": {
        "startLine": 61,
        "startChar": 8,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ad1d365_eebded3f",
        "filename": "src/tests/perf_tests/restricted_traces/download_restricted_traces.py",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-19T02:02:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b678247_9e8defd5",
      "range": {
        "startLine": 61,
        "startChar": 8,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "d2b558ad1e4acfda7f960e4655bcc22610d080d6",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}