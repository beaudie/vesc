{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "33a32b0d_534932fd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-30T00:03:04Z",
      "side": 1,
      "message": "Thanks",
      "revId": "e69c4306100080e30bb077da65558ee5b9e7eb3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a6275ae_0a3b93b5",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 8
      },
      "lineNbr": 9991,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-07-30T00:10:52Z",
      "side": 1,
      "message": "This should be moved to line 9964. Otherwise image will be retained multiple times and mess up the heuristic.",
      "revId": "e69c4306100080e30bb077da65558ee5b9e7eb3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d93b54cd_79b00512",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 8
      },
      "lineNbr": 9991,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-30T00:27:29Z",
      "side": 1,
      "message": "After this change, some tests start failing the assert below. (e.g., `dEQP-GLES3.functional.texture.mipmap.2d.base_level.nearest_linear`)",
      "parentUuid": "5a6275ae_0a3b93b5",
      "revId": "e69c4306100080e30bb077da65558ee5b9e7eb3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "809e9887_38a8f7ce",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 8
      },
      "lineNbr": 9991,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-07-30T00:45:49Z",
      "side": 1,
      "message": "I guess  it is because line 9973 end up did submission because there is hazard in update.refCounted.image. \n\nThen maybe do this: Replace the assertion at line 10001 with this\n```\nif(mUse.getSerials()[commandBuffer-\u003egetQueueSerial().getIndex()] !\u003d\n           commandBuffer-\u003egetQueueSerial().getSerial());\n{\n    // There is a submission after we called retainImage, update the queueSerial again\n     setQueueSerial(commandBuffer-\u003egetQueueSerial());\n}\n```\nThen you don\u0027t need the change at line 9965 as well.",
      "parentUuid": "d93b54cd_79b00512",
      "revId": "e69c4306100080e30bb077da65558ee5b9e7eb3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c98668b_5d8cd03d",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 8
      },
      "lineNbr": 9991,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-30T01:15:26Z",
      "side": 1,
      "message": "Thanks! Updated.",
      "parentUuid": "809e9887_38a8f7ce",
      "revId": "e69c4306100080e30bb077da65558ee5b9e7eb3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "890cd6b1_d946edac",
        "filename": "src/tests/gl_tests/VulkanPerformanceCounterTest.cpp",
        "patchSetId": 8
      },
      "lineNbr": 655,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-30T00:03:04Z",
      "side": 1,
      "message": "Before using `retainImage()` at the end of the update loop, this test would crash if `{}` was used instead of `transferAccess`, but after adding `retainImage()`, both cases pass.",
      "range": {
        "startLine": 655,
        "startChar": 37,
        "endLine": 655,
        "endChar": 83
      },
      "revId": "e69c4306100080e30bb077da65558ee5b9e7eb3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6191cdd4_9439f6d3",
        "filename": "src/tests/gl_tests/VulkanPerformanceCounterTest.cpp",
        "patchSetId": 8
      },
      "lineNbr": 655,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-31T21:27:27Z",
      "side": 1,
      "message": "Successfully reproduced and fixed using a new test, `Texture1UploadThenTexture2UploadThenTexture1Delete`.",
      "parentUuid": "890cd6b1_d946edac",
      "range": {
        "startLine": 655,
        "startChar": 37,
        "endLine": 655,
        "endChar": 83
      },
      "revId": "e69c4306100080e30bb077da65558ee5b9e7eb3b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}