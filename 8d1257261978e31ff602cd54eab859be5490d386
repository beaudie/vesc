{
  "comments": [
    {
      "key": {
        "uuid": "870c6ac1_ad2b0924",
        "filename": "src/libANGLE/renderer/d3d/d3d11/InputLayoutCache.cpp",
        "patchSetId": 5
      },
      "lineNbr": 406,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2016-01-20T17:37:22Z",
      "side": 1,
      "message": "sorry, I\u0027m not sure if I understand -\n\neven if the draw call is DrawElements (not instanced), the divisor still matters. it\u0027s treated as though the number of instances is \u003d\u003d 1. I think this impacts this code below.",
      "range": {
        "startLine": 406,
        "startChar": 47,
        "endLine": 406,
        "endChar": 69
      },
      "revId": "8d1257261978e31ff602cd54eab859be5490d386",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "47efd232_fd4d8774",
        "filename": "src/libANGLE/renderer/d3d/d3d11/InputLayoutCache.cpp",
        "patchSetId": 5
      },
      "lineNbr": 406,
      "author": {
        "id": 1115159
      },
      "writtenOn": "2016-01-20T18:32:09Z",
      "side": 1,
      "message": "I added this bool to prevent this code from being entered for non-instanced rendering calls using divisors of non-zero.  To support that case, the emulation would require the outer for-loop to properly render each instanced attribute correctly.\nI ran ES3 dEQP points rendering tests and discovered that non-instanced GL render calls with divisors of non-zero do not work with this emulation without major additions to the non-instanced code paths.  That will have to come in a later patch as it is most likely more intrusive.\nSeems odd to set a divisor and not use the instanced version of the api call, but it is being in the dEQP tests.  The GL documentation suggest using the instanced calls for non-zero divisors.\n\nWhat are your thoughts?",
      "parentUuid": "870c6ac1_ad2b0924",
      "range": {
        "startLine": 406,
        "startChar": 47,
        "endLine": 406,
        "endChar": 69
      },
      "revId": "8d1257261978e31ff602cd54eab859be5490d386",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7096eb1_71da8a6e",
        "filename": "src/libANGLE/renderer/d3d/d3d11/InputLayoutCache.cpp",
        "patchSetId": 5
      },
      "lineNbr": 406,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2016-01-22T14:39:06Z",
      "side": 1,
      "message": "Can you reference where the spec (or docs) where you\u0027re referring to? My main desire is to keep the intrusiveness, extra parameters, etc as miminal as we can to keep the code relatively clean and maintainable. I don\u0027t understand the patches too well, but am hoping that if I do we can maybe figure out a way to keep it as clean as we can. Which tests, (if any) does the bool instancedRenderingUsed flag make pass?",
      "parentUuid": "47efd232_fd4d8774",
      "range": {
        "startLine": 406,
        "startChar": 47,
        "endLine": 406,
        "endChar": 69
      },
      "revId": "8d1257261978e31ff602cd54eab859be5490d386",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14cb4a3e_8bb68df7",
        "filename": "src/libANGLE/renderer/d3d/d3d11/InputLayoutCache.cpp",
        "patchSetId": 5
      },
      "lineNbr": 406,
      "author": {
        "id": 1115159
      },
      "writtenOn": "2016-01-22T16:52:06Z",
      "side": 1,
      "message": "To be honest.  The same tests pass/fail even without this bool here.  I only added it because I thought you wanted to ensure that this code didn\u0027t be run for non-instanced calls using a divisor of non-zero. :) Hahaha.  Actually, I can remove all of this tracking because it doesn\u0027t change anything.  I would prefer to not have to track this bool.  It makes things cleaner for the entire patch.\n\nThe dEQP tests where I discovered failures were dEQP GLES3 points rendering tests.  I forced emulation to be enabled for non-FL93 so I could see how good the emulation impl was.  The following 5 failures called out this divisor usage difference.\n\ndEQP-GLES3.functional.draw.draw_arrays.points.instanced_attributes\ndEQP-GLES3.functional.draw.draw_arrays_instanced.points.instanced_attributes\ndEQP-GLES3.functional.draw.draw_elements_instanced.points.multiple_attributes\ndEQP-GLES3.functional.draw.draw_elements_instanced.points.instanced_attributes\ndEQP-GLES3.functional.draw.draw_elements_instanced.points.default_attribute",
      "parentUuid": "a7096eb1_71da8a6e",
      "range": {
        "startLine": 406,
        "startChar": 47,
        "endLine": 406,
        "endChar": 69
      },
      "revId": "8d1257261978e31ff602cd54eab859be5490d386",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}