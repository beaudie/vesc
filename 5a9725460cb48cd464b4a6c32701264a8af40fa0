{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d218ad84_65ecc982",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-10-12T12:38:13Z",
      "side": 1,
      "message": "Thanks for the fix! Is there a way to add a regression test for this? We can test the async command queue in angle_end2end_tests.",
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "124cdfb1_24de6cb0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-10-12T14:02:14Z",
      "side": 1,
      "message": "I haven\u0027t yet looked into fixing end2end tests to actually test async queue. Maybe this fixes it? :D\n\nhttps://chromium-review.googlesource.com/c/angle/angle/+/3193420",
      "parentUuid": "d218ad84_65ecc982",
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6190c81_6ae38371",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 1523,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-10-12T14:02:14Z",
      "side": 1,
      "message": "Are we losing anything in CPU perf by using unordered_map instead of abseil?\n\nI\u0027m assuming the issue is that we are passing the address of RenderPassHelper::mRenderPass to the worker thread. What if instead we copied that? I realize we generally don\u0027t copy wrapped Vulkan objects, but if it\u0027s a cause of inefficiency/bugs, I think we should find a way to do that. We might want to add a \"weak\" class to make it clear who owns the actual Vulkan object.",
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a57b1387_6107499a",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 1523,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-10-12T14:52:28Z",
      "side": 1,
      "message": "Yeah adding a weak reference class would be the best solution. Maybe in Debug it can keep a back-pointer to the original unique pointer (vk wrapper type) to ensure validity.\n\nIt will add (slight) extra cost to the render pass lookup if we change to unordered_map.",
      "parentUuid": "f6190c81_6ae38371",
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "340bf3a4_ca0f7a9b",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 1523,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-10-12T14:53:01Z",
      "side": 1,
      "message": "Given that this is a bug fix though we might want to land this first with the small perf regression.",
      "parentUuid": "a57b1387_6107499a",
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "072a71a4_b4c27dca",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 1523,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-10-12T15:03:57Z",
      "side": 1,
      "message": "SGTM",
      "parentUuid": "340bf3a4_ca0f7a9b",
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74985e0a_213f67e8",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 1523,
      "author": {
        "id": 1446209
      },
      "writtenOn": "2021-10-14T03:39:16Z",
      "side": 1,
      "message": "Shahbaz,yes,you\u0027re right,this is the null renderpass pointer issue,which could be found in https://bugs.chromium.org/p/angleproject/issues/detail?id\u003d6436.",
      "parentUuid": "072a71a4_b4c27dca",
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14499c4a_c5320fe0",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 1525,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-10-12T12:38:13Z",
      "side": 1,
      "message": "you can take out the #ifdef, if abseil is false this resolves to unordered map. Can you leave a comment about the need for pointer stability?",
      "range": {
        "startLine": 1518,
        "startChar": 0,
        "endLine": 1525,
        "endChar": 0
      },
      "revId": "5a9725460cb48cd464b4a6c32701264a8af40fa0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}