{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3e8e07c9_462930d6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-09-30T19:43:24Z",
      "side": 1,
      "message": "Vulkan",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 6
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9eb73767_d402a44e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1550788
      },
      "writtenOn": "2024-09-30T20:06:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3e8e07c9_462930d6",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 6
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "09bc1d90_5448da33",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-09-30T19:43:24Z",
      "side": 1,
      "message": "Bug: b/368429977\nBug: b/352595520",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 29
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0a413fc_5f1fe109",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1550788
      },
      "writtenOn": "2024-09-30T20:06:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "09bc1d90_5448da33",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 29
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "397818de_70051a97",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-09-30T19:36:27Z",
      "side": 1,
      "message": "Thank you, we discussed this internally and the change makes sense. It should be good to land once you address Charlie\u0027s comment.",
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "785b2be6_5c2f0732",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 416,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-09-30T19:42:10Z",
      "side": 1,
      "message": "should also assert it is 0 when isExternal\u003d\u003dfalse",
      "range": {
        "startLine": 416,
        "startChar": 22,
        "endLine": 416,
        "endChar": 59
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c83ee873_fdf718b2",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 416,
      "author": {
        "id": 1550788
      },
      "writtenOn": "2024-09-30T20:06:42Z",
      "side": 1,
      "message": "Per spec:\n\"externalFormat is an implementation-defined external format identifier for use with VkExternalFormatANDROID. It must not be zero.\n\nformat is the Vulkan format corresponding to the Android hardware bufferâ€™s format, or VK_FORMAT_UNDEFINED if there is not an equivalent Vulkan format.\"\n\nCorrect me if I\u0027m wrong, but here `isExternal` actually means it\u0027s an external format without an equivalent VkFormat. So externalFormat can still be populated in this case.",
      "parentUuid": "785b2be6_5c2f0732",
      "range": {
        "startLine": 416,
        "startChar": 22,
        "endLine": 416,
        "endChar": 59
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bebd06b_7ed8734b",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 416,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-09-30T21:09:11Z",
      "side": 1,
      "message": "Right. What I am saying is that when `isExternal` is false, `bufferFormatProperties.externalFormat` should be 0.",
      "parentUuid": "c83ee873_fdf718b2",
      "range": {
        "startLine": 416,
        "startChar": 22,
        "endLine": 416,
        "endChar": 59
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48b3a363_16353d00",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 416,
      "author": {
        "id": 1550788
      },
      "writtenOn": "2024-09-30T21:18:32Z",
      "side": 1,
      "message": "Err my understanding is it should never be 0. \"It *must* not be zero.\"\n\nWhen `isExternal` is false, `bufferFormatProperties.format` is an equivalent VkFormat and `bufferFormatProperties.externalFormat` should still be the original external format that it was mapped from.",
      "parentUuid": "6bebd06b_7ed8734b",
      "range": {
        "startLine": 416,
        "startChar": 22,
        "endLine": 416,
        "endChar": 59
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8162086_0371b84a",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 416,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-09-30T21:57:28Z",
      "side": 1,
      "message": "I see. Then I think you should pass in 0 to YcbcrConversionDesc::update() isExternal\u003d\u003dfalse. Otherwise, if you look atYcbcrConversionDesc::update() implementation, it will end up with mIsExternalFormat set to true, which appears to me incorrect.",
      "parentUuid": "48b3a363_16353d00",
      "range": {
        "startLine": 416,
        "startChar": 22,
        "endLine": 416,
        "endChar": 59
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7c31094_10edaad0",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 416,
      "author": {
        "id": 1550788
      },
      "writtenOn": "2024-09-30T22:07:48Z",
      "side": 1,
      "message": "Ahh I see.\n\nmExternalOrVkFormat will also get set to externalFormat as well instead of VkFormat.",
      "parentUuid": "b8162086_0371b84a",
      "range": {
        "startLine": 416,
        "startChar": 22,
        "endLine": 416,
        "endChar": 59
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "183c4752_77414505",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 420,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2024-09-30T19:34:33Z",
      "side": 1,
      "message": "It should be imageFormat.id if it is not external format.",
      "range": {
        "startLine": 420,
        "startChar": 69,
        "endLine": 420,
        "endChar": 90
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18b753a6_39ef0bb0",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 1
      },
      "lineNbr": 420,
      "author": {
        "id": 1550788
      },
      "writtenOn": "2024-09-30T20:06:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "183c4752_77414505",
      "range": {
        "startLine": 420,
        "startChar": 69,
        "endLine": 420,
        "endChar": 90
      },
      "revId": "1804ebcbc0054d7bee1a100635ae268f2382af83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}