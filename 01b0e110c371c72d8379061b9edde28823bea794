{
  "comments": [
    {
      "key": {
        "uuid": "1210f8db_99ea0b5d",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2018-10-15T22:28:49Z",
      "side": 1,
      "message": "nit: Could you please comment about how this initialization addresses the 2 issues:\n1. Setting color mask without active program.\n2. updatePipelineColorMask for the first active program.",
      "range": {
        "startLine": 119,
        "startChar": 6,
        "endLine": 119,
        "endChar": 29
      },
      "revId": "01b0e110c371c72d8379061b9edde28823bea794",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47f7c742_1da08b72",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 1001426
      },
      "writtenOn": "2018-10-15T23:03:10Z",
      "side": 1,
      "message": "1. If we get into updateColorMask before mProgram has been set, we want to do the usual job of updateColorMask which we will because mProgramHasOutput is true.\n2. The first time mProgram is set we need to call updatePipelineColorMask only if the program doesn\u0027t have output, i.e. mProgramHasOutput is now false and different from the initial value of true.\n\nShall I put all of the above into a comment in the code?  I\u0027m not sure how enlightening I can make it.",
      "parentUuid": "1210f8db_99ea0b5d",
      "range": {
        "startLine": 119,
        "startChar": 6,
        "endLine": 119,
        "endChar": 29
      },
      "revId": "01b0e110c371c72d8379061b9edde28823bea794",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b64e3663_72ea78a8",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2018-10-16T01:39:06Z",
      "side": 1,
      "message": "I think I would rather you just update the color mask unconditionally if the program changes. Rather than storing this dirty bit. Just to simplify the state tracking. Unless there\u0027s some other reason I\u0027m missing?\n\nYou could also move the program dirty bit to a lower index if you want to make sure that is synced first.",
      "parentUuid": "47f7c742_1da08b72",
      "range": {
        "startLine": 119,
        "startChar": 6,
        "endLine": 119,
        "endChar": 29
      },
      "revId": "01b0e110c371c72d8379061b9edde28823bea794",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed065bed_f22cbcaa",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 7
      },
      "lineNbr": 866,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2018-10-15T22:28:49Z",
      "side": 1,
      "message": "Will this work if you clear the program to 0?\nAlso, what should be mProgramHasOutput value if you clear the program to 0 for updatePipelineColorMask() to do the right thing?",
      "range": {
        "startLine": 866,
        "startChar": 0,
        "endLine": 866,
        "endChar": 92
      },
      "revId": "01b0e110c371c72d8379061b9edde28823bea794",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ebd8aea_8278c06e",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 7
      },
      "lineNbr": 866,
      "author": {
        "id": 1001426
      },
      "writtenOn": "2018-10-15T23:03:10Z",
      "side": 1,
      "message": "We don\u0027t reach here on glUseProgram(0) so there is no crash.\nI will add an assert though that mProgram is not 0.\nAfter glUseProgram(0) drawing is undefined, so I think anything is the right thing.",
      "parentUuid": "ed065bed_f22cbcaa",
      "range": {
        "startLine": 866,
        "startChar": 0,
        "endLine": 866,
        "endChar": 92
      },
      "revId": "01b0e110c371c72d8379061b9edde28823bea794",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a22d074_a3680e48",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 7
      },
      "lineNbr": 866,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2018-10-16T01:39:06Z",
      "side": 1,
      "message": "I think you should update on the executable dirty bit. Not the binding. Imagine you a) first link a program that has outputs. b) call UseProgram. c) rebind the fragment shader to have no outputs and call LinkProgram. Then you won\u0027t get the mask applied.",
      "parentUuid": "8ebd8aea_8278c06e",
      "range": {
        "startLine": 866,
        "startChar": 0,
        "endLine": 866,
        "endChar": 92
      },
      "revId": "01b0e110c371c72d8379061b9edde28823bea794",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}