{
  "comments": [
    {
      "key": {
        "uuid": "44826ddb_eaef58d0",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 53,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "Thanks for the detailed comment.\n\nUsing inheritance is a good pattern. What you want to avoid are virtual functions because they destroy inlining and generally degrade performance. Could you do something like\n\n  mtl::BufferRef getCurrentBuffer() {\n     return mIsWeakReference ? mRef.weak.lock() : mRef.simple;\n  }\n\nprotected:\n  union SimpleOrWeakRef {\n     mtl::BufferRef simple;\n     mtl::BufferWeakRef weak;\n  };\n  bool mIsWeakReference;\n  SimpleOrWeakRef mRef;\n\n?",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 53,
        "endChar": 2
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc7c47b1_815635fc",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 53,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. I don\u0027t think union can be used though. Since BufferRef and BufferWeakRef are non-trivial type.",
      "parentUuid": "44826ddb_eaef58d0",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 53,
        "endChar": 2
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "51cbc1ff_5a920939",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 153,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "also would recommend you move these outside the class.",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 153,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9badef9a_0c4eee4c",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 153,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "IndexConversionBuffer has been moved outside. VertexConversionBuffer I would keep inside since the outside code doesn\u0027t use it directly.",
      "parentUuid": "51cbc1ff_5a920939",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 153,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c89aef90_727c6bd6",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 153,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "That\u0027s fine. I like moving all classes outside as I find it is rare that the encapsulation helps.",
      "parentUuid": "9badef9a_0c4eee4c",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 153,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e2ef062_ffc77c63",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 250,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "style-wise, you can omit all the unreferenced parameter fixes. We won\u0027t ever support the warning for unused parameters. It would be way too difficult.",
      "range": {
        "startLine": 250,
        "startChar": 4,
        "endLine": 250,
        "endChar": 18
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddd9e0e4_8835af59",
        "filename": "src/libANGLE/renderer/metal/BufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 250,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8e2ef062_ffc77c63",
      "range": {
        "startLine": 250,
        "startChar": 4,
        "endLine": 250,
        "endChar": 18
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e954506_46811b47",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 227,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "style comment: try to avoid default arguments for ANGLE. We prefer making all parameters explicit.",
      "range": {
        "startLine": 227,
        "startChar": 21,
        "endLine": 227,
        "endChar": 60
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c36fef5_64bb7b09",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 227,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e954506_46811b47",
      "range": {
        "startLine": 227,
        "startChar": 21,
        "endLine": 227,
        "endChar": 60
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e0ff3587_552c3f2a",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 358,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "I recommend you extract these nested types as well.",
      "range": {
        "startLine": 340,
        "startChar": 0,
        "endLine": 358,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7589178_96804bb1",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 358,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e0ff3587_552c3f2a",
      "range": {
        "startLine": 340,
        "startChar": 0,
        "endLine": 358,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfc63354_596579f3",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 358,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "Same comment here. Pretty minor request. If you must keep the types in the classes, please follow the ordering guidelines here:\n\nhttps://google.github.io/styleguide/cppguide.html#Declaration_Order",
      "parentUuid": "c7589178_96804bb1",
      "range": {
        "startLine": 340,
        "startChar": 0,
        "endLine": 358,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3e2ba0c_9679ccbf",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 359,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "same here. you can extract the type and leave the member variable.",
      "range": {
        "startLine": 359,
        "startChar": 11,
        "endLine": 359,
        "endChar": 27
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdfce3fa_e62f362d",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 359,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3e2ba0c_9679ccbf",
      "range": {
        "startLine": 359,
        "startChar": 11,
        "endLine": 359,
        "endChar": 27
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "705c9cb7_5d088dec",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 132,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: spelling",
      "range": {
        "startLine": 132,
        "startChar": 23,
        "endLine": 132,
        "endChar": 34
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c2a8a0d_b513f420",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 132,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "705c9cb7_5d088dec",
      "range": {
        "startLine": 132,
        "startChar": 23,
        "endLine": 132,
        "endChar": 34
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff39d536_f87ca4b1",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 784,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: These functions don\u0027t seem to be necessary right now. Can we remove them?",
      "range": {
        "startLine": 769,
        "startChar": 0,
        "endLine": 784,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08135789_fb189f61",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 784,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. The first version is being used, so keeping it.",
      "parentUuid": "ff39d536_f87ca4b1",
      "range": {
        "startLine": 769,
        "startChar": 0,
        "endLine": 784,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf4bd1fe_63f7b6e9",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 1031,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "does it makes sense to make a utils helper function for this?",
      "range": {
        "startLine": 1017,
        "startChar": 0,
        "endLine": 1031,
        "endChar": 9
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "86d55a4d_172021d4",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 1031,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. Removed utils function.",
      "parentUuid": "bf4bd1fe_63f7b6e9",
      "range": {
        "startLine": 1017,
        "startChar": 0,
        "endLine": 1031,
        "endChar": 9
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fdbf07c7_bad47c47",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 1031,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "Question - there doesn\u0027t seem to be a change here. Did you mean to include a helper?",
      "parentUuid": "86d55a4d_172021d4",
      "range": {
        "startLine": 1017,
        "startChar": 0,
        "endLine": 1031,
        "endChar": 9
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b33a4c7_7d598ad8",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 1110,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "is it necessary to keep a shadow copy of the default attributes?",
      "range": {
        "startLine": 1110,
        "startChar": 2,
        "endLine": 1110,
        "endChar": 96
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e76f14e_2a2b2b8b",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 1110,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "I\u0027m not sure the default attributes stored in glState are continuous in memory. I want them to be continuous so I can send all to one of Metal\u0027s buffer binding slots.",
      "parentUuid": "8b33a4c7_7d598ad8",
      "range": {
        "startLine": 1110,
        "startChar": 2,
        "endLine": 1110,
        "endChar": 96
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd02c4f5_a156639d",
        "filename": "src/libANGLE/renderer/metal/ContextMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 1110,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4e76f14e_2a2b2b8b",
      "range": {
        "startLine": 1110,
        "startChar": 2,
        "endLine": 1110,
        "endChar": 96
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80068e1f_569f8639",
        "filename": "src/libANGLE/renderer/metal/DisplayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "The split between RendererVk/DisplayVk is sort of an artifact of bad code design. Could you merge RendererMtl into DisplayMtl and use DisplayMtl everywhere you\u0027re using RendererMtl? Sorry, should probably have suggested this in the prior patch.",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03fb78a6_613c49e3",
        "filename": "src/libANGLE/renderer/metal/DisplayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "I understand, but at least it makes sense to split in this Metal codebase. Since if I move the RendererMtl code to DisplayMtl, it means the DisplayMtl has to house Metal\u0027s objective-C pointer to MTLDevice object. And this pointer has to be declared in DisplayMtl.h.\nThat header is in turn included by C++ file Display.cpp. Since C++ file (without .mm extension) won\u0027t understand objective-C syntax, the compiler will complain.\nOne solution is declare an opaque pointer member to a forward declared DisplayMtlImpl in the header. But isn\u0027t that the same as splitting the code into RendererMtl(in place of DisplayMtlImpl) and DisplayMtl?",
      "parentUuid": "80068e1f_569f8639",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e9bd282_34505b22",
        "filename": "src/libANGLE/renderer/metal/DisplayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "OK, I understand. I\u0027ll think about this for a sec. I think what we can do is instead expose functions like \"CreateMetalDisplay()\" that are implemented in DisplayMtl.cpp. Then we don\u0027t need to include the full DisplayMtl header in Display.cpp. We just need to define the prototype for CreateMetalDisplay().",
      "parentUuid": "03fb78a6_613c49e3",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d46b1ee4_e93498db",
        "filename": "src/libANGLE/renderer/metal/DisplayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "RendererMtl has been merged into DisplayMtl. In my subsequent comments if mistakenly mentioning renderer, it will mean DisplayMtl.",
      "parentUuid": "6e9bd282_34505b22",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0999ffbf_5392f483",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 29,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: avoid default arguments, as mentioned in another comment.",
      "range": {
        "startLine": 27,
        "startChar": 28,
        "endLine": 29,
        "endChar": 66
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a66da42_9013560d",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 29,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0999ffbf_5392f483",
      "range": {
        "startLine": 27,
        "startChar": 28,
        "endLine": 29,
        "endChar": 66
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "25758677_61d74d8e",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "can you use RenderTargetCache here? If there\u0027s something missing in RenderTargetCache maybe I can help add it.",
      "range": {
        "startLine": 134,
        "startChar": 3,
        "endLine": 134,
        "endChar": 73
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dce42759_10727940",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "I will see what I can do. At first I don\u0027t use RenderTargetCache because it assumes depth and stencil has to be the same buffer, I cannot retrieve separate depth and stencil buffer from it. From the documents, Metal uses separate texture attachments in RenderPass descriptor for depth and stencil.\nThe official documents never say anything about this depth and stencil has to be in the same buffer.\nOnly until I tested the sample apps, the Metal runtime notified me that if render pass has both depth and stencil attachment, it must be reference to a same depth stencil texture.\nSo maybe RenderTargetCache is usable after all.",
      "parentUuid": "25758677_61d74d8e",
      "range": {
        "startLine": 134,
        "startChar": 3,
        "endLine": 134,
        "endChar": 73
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8fb7025_90993cc4",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "OK, good to know. Sounds like you can probably use RenderTargetCache.",
      "parentUuid": "dce42759_10727940",
      "range": {
        "startLine": 134,
        "startChar": 3,
        "endLine": 134,
        "endChar": 73
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1374a730_75836dbd",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Update: Cannot use RenderTargetCache for now. since it only supports packed depth stencil buffer. On iOS devices, metal supports separate depth \u0026 stencil, furthermore, it doesn\u0027t support packed depth24stencil8, so using separate depth \u0026 stencil will save space instead of using the fallback format depth32stencil8x24. \nIn contrast, on macos computers, metal only permits packed depth stencil, and depth24stenil8 is supported on this platform.\nWill leave this as TODO in future CL when RenderTargetCache is updated to support separate depth \u0026 stencil.",
      "parentUuid": "c8fb7025_90993cc4",
      "range": {
        "startLine": 134,
        "startChar": 3,
        "endLine": 134,
        "endChar": 73
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab79a5bf_19cad467",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "Ack. Can you please leave links to the ANGLE docs that describe these limitations?",
      "parentUuid": "1374a730_75836dbd",
      "range": {
        "startLine": 134,
        "startChar": 3,
        "endLine": 134,
        "endChar": 73
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b33f32d3_e4a1f10b",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "is it possible to make a FeatureMtl class that you populate on startup and check that here? Similar to FeatureVk? It\u0027s preferable to avoid as many compile-time conditionals as possible.",
      "range": {
        "startLine": 246,
        "startChar": 5,
        "endLine": 246,
        "endChar": 44
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d499b208_60c22a4b",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "This is runtime requirement from Apple. It is not stated in the official docs. However, when running the sample apps, Metal runtime throws exception when I try to use separate depth \u0026 stencil buffers. This could be set as a flag in a limitations struct. However, who know in future Apple might change the runtime behavior.\n\nUpdate: I actually checked the behavior on both macos and ios device. On ios device, Apple allows the depth and stencil buffers to be separate. Furthermore, on ios, packed depth24stencil8 is not supported. If packed depth stencil is required, then the only format supported is depth32stencil8 which is 64 bit texture actually, and it is waste of space of devices when they can just use separate depth32 and stencil8 buffers. So RenderTargetCache cannot be used either, because it assumes depth \u0026 stencil is packed.\nFor now, I will use a limitation flag indicating separate depth \u0026 stencil is supported or not. Until RenderTargetCache is updated to support separate depth \u0026 stencil I will use my own rendertarget cache implementation here.",
      "parentUuid": "b33f32d3_e4a1f10b",
      "range": {
        "startLine": 246,
        "startChar": 5,
        "endLine": 246,
        "endChar": 44
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8a64de3a_7deb70c3",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "Hm. This is good to know. I\u0027m curious to know what other Metal developers would do here. I suspect packed depth/stencil is preferable even if it seems like a waste of space. Can you leave a note describing your findings in the code?",
      "parentUuid": "d499b208_60c22a4b",
      "range": {
        "startLine": 246,
        "startChar": 5,
        "endLine": 246,
        "endChar": 44
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "33d370ec_a6b08e79",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T18:17:38Z",
      "side": 1,
      "message": "Update: an Apple dev confirmed that the recommended practice is to use packed D32S8. He said he\u0027d ask internally as well. I think the best resolution is that we use D32S8 packed and the RenderTargetCache. I\u0027m fine if we leave that as a follow-up.",
      "parentUuid": "8a64de3a_7deb70c3",
      "range": {
        "startLine": 246,
        "startChar": 5,
        "endLine": 246,
        "endChar": 44
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc68585b_cbb56e0e",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-29T06:33:30Z",
      "side": 1,
      "message": "Could you ask Apple dev why https://developer.apple.com/metal/Metal-Feature-Set-Tables.pdf says that BGRA8Unorm is only supported on macos if depth24Stencil8PixelFormatSupported capability property is true, yet BGRA8Unorm can be used to create swapchain\u0027s surface regardless of that property? In fact, it is the default format of swapchain\u0027s surface.\nI asked them via email and forums, but no response yet.\nThanks,",
      "parentUuid": "33d370ec_a6b08e79",
      "range": {
        "startLine": 246,
        "startChar": 5,
        "endLine": 246,
        "endChar": 44
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c65947a7_87a466a3",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 704,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "same as other comments - use angle::MemoryBuffer or std::vector.",
      "range": {
        "startLine": 704,
        "startChar": 9,
        "endLine": 704,
        "endChar": 27
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c12ce8e0_f69fa041",
        "filename": "src/libANGLE/renderer/metal/FrameBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 704,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c65947a7_87a466a3",
      "range": {
        "startLine": 704,
        "startChar": 9,
        "endLine": 704,
        "endChar": 27
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "07d47883_068cdf37",
        "filename": "src/libANGLE/renderer/metal/GlslangWrapper.h",
        "patchSetId": 10
      },
      "lineNbr": 19,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "As mentioned in another CL, I think you can dispense with the \"wrapper class\" idiom and just use helper functions.",
      "range": {
        "startLine": 19,
        "startChar": 6,
        "endLine": 19,
        "endChar": 23
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd75d888_3ea36b45",
        "filename": "src/libANGLE/renderer/metal/GlslangWrapper.h",
        "patchSetId": 10
      },
      "lineNbr": 19,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. See mtl_glslang_utils.h/.mm",
      "parentUuid": "07d47883_068cdf37",
      "range": {
        "startLine": 19,
        "startChar": 6,
        "endLine": 19,
        "endChar": 23
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fcfdde9f_fece2c35",
        "filename": "src/libANGLE/renderer/metal/GlslangWrapper.mm",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "As mentioned in another CL, can we call these files GlslangWrapperMtl.h/cpp? To keep them uniquely named from Vulkan.",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fc1f6d0_54c13fe1",
        "filename": "src/libANGLE/renderer/metal/GlslangWrapper.mm",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. See mtl_glslang_utils.mm",
      "parentUuid": "fcfdde9f_fece2c35",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "415014f9_0a56340c",
        "filename": "src/libANGLE/renderer/metal/ProgramMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 163,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: extract types.",
      "range": {
        "startLine": 145,
        "startChar": 0,
        "endLine": 163,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19ca243b_24c9f55a",
        "filename": "src/libANGLE/renderer/metal/ProgramMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 163,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Sorry, what do you mean?",
      "parentUuid": "415014f9_0a56340c",
      "range": {
        "startLine": 145,
        "startChar": 0,
        "endLine": 163,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90e69787_9b60d5b8",
        "filename": "src/libANGLE/renderer/metal/ProgramMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 163,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "Was the same suggestion as in other places - move the type outside the class. Mostly optional.",
      "parentUuid": "19ca243b_24c9f55a",
      "range": {
        "startLine": 145,
        "startChar": 0,
        "endLine": 163,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "94dc2454_adeabf4c",
        "filename": "src/libANGLE/renderer/metal/ProgramMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 165,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: use using syntax.",
      "range": {
        "startLine": 165,
        "startChar": 4,
        "endLine": 165,
        "endChar": 11
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb389fc8_449cddfa",
        "filename": "src/libANGLE/renderer/metal/ProgramMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 165,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Removed",
      "parentUuid": "94dc2454_adeabf4c",
      "range": {
        "startLine": 165,
        "startChar": 4,
        "endLine": 165,
        "endChar": 11
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e974c67a_3497f454",
        "filename": "src/libANGLE/renderer/metal/RenderBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 56,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: use explicit types for this and above",
      "range": {
        "startLine": 56,
        "startChar": 4,
        "endLine": 56,
        "endChar": 8
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4cbc0363_32c461d0",
        "filename": "src/libANGLE/renderer/metal/RenderBufferMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 56,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e974c67a_3497f454",
      "range": {
        "startLine": 56,
        "startChar": 4,
        "endLine": 56,
        "endChar": 8
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7cfdbe8_9eea7a7f",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "Kinda bike shedding, but I suggest we use a naming pattern like mtl::StateCache instead of mtl::StateCacheMtl. The \"Mtl\" suffix is usually reserved for implementations of the Impl interface classes: BufferMtl, TextureMtl, etc. That would mean renaming these files to StateCache.h/cpp.",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9f2488c_c5b12562",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. This file is renamed to mtl_state_cache.h",
      "parentUuid": "a7cfdbe8_9eea7a7f",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1252ecd_40f73165",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 29,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "can you also give this a constructor that memsets everything to \"0\"?",
      "range": {
        "startLine": 29,
        "startChar": 7,
        "endLine": 29,
        "endChar": 18
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8af77913_37a6c5b5",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 29,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "StencilDesc is not a descriptor to be used by outer code directly, it is always used inside DepthStencilDesc (backFaceStencil and frontFaceStencil). And DepthStencilDesc already zeroize inside constructor, so I don\u0027t think it is needed.",
      "parentUuid": "d1252ecd_40f73165",
      "range": {
        "startLine": 29,
        "startChar": 7,
        "endLine": 29,
        "endChar": 18
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd6cfa30_7881cd5b",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 29,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "Ack, again a comment wouldn\u0027t hurt.",
      "parentUuid": "8af77913_37a6c5b5",
      "range": {
        "startLine": 29,
        "startChar": 7,
        "endLine": 29,
        "endChar": 18
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5259f044_03f9534d",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 48,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "It\u0027s preferably generally to put anything not important for performance in the cpp to minimize binary size and recompile time. Could you move these into StateCache.cpp?",
      "range": {
        "startLine": 48,
        "startChar": 4,
        "endLine": 48,
        "endChar": 58
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97f95cad_bb5afa20",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 159,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "maybe make this a part of FeaturesMtl as well.",
      "range": {
        "startLine": 159,
        "startChar": 4,
        "endLine": 159,
        "endChar": 48
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9a97b88_b8deb778",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 159,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "I don\u0027t think it\u0027s possible. This is compiling time condition. iOS SDK prior to version 13 doesn\u0027t have this primitive topology declaration.",
      "parentUuid": "97f95cad_bb5afa20",
      "range": {
        "startLine": 159,
        "startChar": 4,
        "endLine": 159,
        "endChar": 48
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a09c6b4_29368667",
        "filename": "src/libANGLE/renderer/metal/StateCacheMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 159,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d9a97b88_b8deb778",
      "range": {
        "startLine": 159,
        "startChar": 4,
        "endLine": 159,
        "endChar": 48
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "01545c46_85d2a6ff",
        "filename": "src/libANGLE/renderer/metal/SurfaceMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "maybe make a new define for ANGLE_ENABLE_METAL_FRAME_CAPTURE that defaults to ANGLE_ENABLE_ASSERTS. Potentially you could control this via GN as well.",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 40,
        "endChar": 5
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58ecd0a9_3eb098a6",
        "filename": "src/libANGLE/renderer/metal/SurfaceMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "I set this flag default to false in release build. This is quite aggressive frame capture. If turning on, it will capture every frame. Xcode can capture frames without enabling this code, all just by simply clicking a capture button.\nThis code is only for finely controlling which frame to capture. Useful when I want to capture the very first frame rendered (Xcode cannot do that due to button click timing).",
      "parentUuid": "01545c46_85d2a6ff",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 40,
        "endChar": 5
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05976df4_05a115da",
        "filename": "src/libANGLE/renderer/metal/SurfaceMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 41,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: can you use explicit type for these (and below) as the type isn\u0027t clear to the reader?",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 9
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2c47019_7af84307",
        "filename": "src/libANGLE/renderer/metal/SurfaceMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 41,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Come on. This is standard lib function. They are supposed to know at least where to look.",
      "parentUuid": "05976df4_05a115da",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 41,
        "endChar": 9
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "556ba603_5302ba27",
        "filename": "src/libANGLE/renderer/metal/TextureMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 368,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "this is an ES 3.0 feature in any case. You can throw in an UNIMPLEMENTED() or UNREACHABLE() if you want.",
      "range": {
        "startLine": 368,
        "startChar": 8,
        "endLine": 368,
        "endChar": 83
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b3f8f80_f47ff03c",
        "filename": "src/libANGLE/renderer/metal/TextureMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 368,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Changed to NOTE",
      "parentUuid": "556ba603_5302ba27",
      "range": {
        "startLine": 368,
        "startChar": 8,
        "endLine": 368,
        "endChar": 83
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ded9026b_32e0587a",
        "filename": "src/libANGLE/renderer/metal/UtilsMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "Another naming request: can we call these class and files mtl::ShaderLibrary/ShaderLibrary.cpp/.h? I\u0027ll put up a CL to renaming the Vulkan classes. Utils is just too vague.",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "866ac121_f50c2706",
        "filename": "src/libANGLE/renderer/metal/UtilsMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Changed class name to RenderUtils. File has been renamed to mtl_render_utils.h/.mm",
      "parentUuid": "ded9026b_32e0587a",
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f424fce_ef1b05e1",
        "filename": "src/libANGLE/renderer/metal/UtilsMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 57,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "I also suggest you extract these structs into the namespace, instead of using nesting. Just makes them easier to work with.",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 57,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11a62f1b_18e3b329",
        "filename": "src/libANGLE/renderer/metal/UtilsMtl.h",
        "patchSetId": 10
      },
      "lineNbr": 57,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. See mtl_render_utils.h",
      "parentUuid": "4f424fce_ef1b05e1",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 57,
        "endChar": 6
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ff12c08_e60c03af",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "is this something you\u0027re using for debugging? Maybe add a comment with your intent.",
      "range": {
        "startLine": 18,
        "startChar": 8,
        "endLine": 18,
        "endChar": 36
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d9ff2f5_dcdc7453",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Removed.",
      "parentUuid": "7ff12c08_e60c03af",
      "range": {
        "startLine": 18,
        "startChar": 8,
        "endLine": 18,
        "endChar": 36
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0aca73e6_4b357907",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 141,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "can you use explicit types for these? makes it easier to read.",
      "range": {
        "startLine": 141,
        "startChar": 9,
        "endLine": 141,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fd219ae_591f5532",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 141,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0aca73e6_4b357907",
      "range": {
        "startLine": 141,
        "startChar": 9,
        "endLine": 141,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e6df846f_433d9130",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 165,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "same for these",
      "range": {
        "startLine": 165,
        "startChar": 9,
        "endLine": 165,
        "endChar": 13
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89c97062_9847927b",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 165,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. anw, readers could read the declaration of mCurrentArrayBuffers in the header counterpart of this file.",
      "parentUuid": "e6df846f_433d9130",
      "range": {
        "startLine": 165,
        "startChar": 9,
        "endLine": 165,
        "endChar": 13
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "99a2f53d_a025b66f",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 273,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: to flatten this, switch the condition.\n\nif (!dirty)\n return\n\n...",
      "range": {
        "startLine": 269,
        "startChar": 0,
        "endLine": 273,
        "endChar": 13
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8a3cde5_3dcf4a4d",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 273,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Thanks, that could be cleaner. However, for now, I avoid doing it since I don\u0027t want to duplicate the output parameters assignment upon returning.",
      "parentUuid": "99a2f53d_a025b66f",
      "range": {
        "startLine": 269,
        "startChar": 0,
        "endLine": 273,
        "endChar": 13
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e6d184d0_a696c0a1",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 278,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "can you use an explicit type here? same comment reasoning.",
      "range": {
        "startLine": 278,
        "startChar": 8,
        "endLine": 278,
        "endChar": 12
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b7b75a2_c2c47812",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 278,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Come on. vertexDescOut is a pointer declared in this function\u0027s parameters. It is just declared a few lines above. The readers should easily see its type there.",
      "parentUuid": "e6d184d0_a696c0a1",
      "range": {
        "startLine": 278,
        "startChar": 8,
        "endLine": 278,
        "endChar": 12
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "07831051_2ab7421f",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 278,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "I was going based on the style guide:\n\nhttps://google.github.io/styleguide/cppguide.html#Type_deduction\n\n\"use type deduction only to make the code clearer or safer, and do not use it merely to avoid the inconvenience of writing an explicit type\"\n\nIMO it\u0027s cleaner with the explicit type. Very minor thing.",
      "parentUuid": "9b7b75a2_c2c47812",
      "range": {
        "startLine": 278,
        "startChar": 8,
        "endLine": 278,
        "endChar": 12
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2fd6bd24_cc1eec45",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 283,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "same comment here about helper functions over macros.",
      "range": {
        "startLine": 283,
        "startChar": 8,
        "endLine": 283,
        "endChar": 50
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27bafd20_af04191c",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 283,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. I mistakenly named the helper function: setDefaultVertexBufferLayout. It should have had an uppercase first letter like: SetDefaultVertexBufferLayout.\nChanged in local code. But cannot upload, still hanging.",
      "parentUuid": "2fd6bd24_cc1eec45",
      "range": {
        "startLine": 283,
        "startChar": 8,
        "endLine": 283,
        "endChar": 50
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec083ccb_33f56205",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 359,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "I don\u0027t think this should be a goal. It\u0027s quite tricky. I\u0027d recommend you just drop the TODO.",
      "range": {
        "startLine": 359,
        "startChar": 4,
        "endLine": 359,
        "endChar": 41
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0ac270b_07dbfd03",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 359,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ec083ccb_33f56205",
      "range": {
        "startLine": 359,
        "startChar": 4,
        "endLine": 359,
        "endChar": 41
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "13158c47_1d5598d8",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 373,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "It\u0027s very undefined behaviour if the user gives us any kind of invalid pointer. ANGLE does check for nullptr already though so you can change this to an ASSERT.",
      "range": {
        "startLine": 373,
        "startChar": 12,
        "endLine": 373,
        "endChar": 32
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73f4c65c_05baaf17",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 373,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "13158c47_1d5598d8",
      "range": {
        "startLine": 373,
        "startChar": 12,
        "endLine": 373,
        "endChar": 32
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f33d849_512d3bb5",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 379,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "is this ref necessary? If so, use ANGLE_UNUSED_VARIABLE. otherwise drop it.",
      "range": {
        "startLine": 379,
        "startChar": 12,
        "endLine": 379,
        "endChar": 32
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bded9f0a_a7a4e0a2",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 379,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f33d849_512d3bb5",
      "range": {
        "startLine": 379,
        "startChar": 12,
        "endLine": 379,
        "endChar": 32
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d27a7638_e9d625d4",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 460,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "you can make this an ASSERT if you want.",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 20
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33ff114c_402ecdad",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 460,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d27a7638_e9d625d4",
      "range": {
        "startLine": 459,
        "startChar": 0,
        "endLine": 460,
        "endChar": 20
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75d3780f_7e60e721",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 487,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "maybe make this a part of FeatureMtl as suggested elsewhere.",
      "range": {
        "startLine": 487,
        "startChar": 4,
        "endLine": 487,
        "endChar": 31
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7640ed25_af41d921",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 487,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "I will do it in future. For now, I just remove convertIndexBufferCPU() from the code.",
      "parentUuid": "75d3780f_7e60e721",
      "range": {
        "startLine": 487,
        "startChar": 4,
        "endLine": 487,
        "endChar": 31
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78d0beb1_21c2c06c",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 541,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: can you make this explicit?",
      "range": {
        "startLine": 541,
        "startChar": 10,
        "endLine": 541,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74057dfb_c5d22162",
        "filename": "src/libANGLE/renderer/metal/VertexArrayMtl.mm",
        "patchSetId": 10
      },
      "lineNbr": 541,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "This code is removed.",
      "parentUuid": "78d0beb1_21c2c06c",
      "range": {
        "startLine": 541,
        "startChar": 10,
        "endLine": 541,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b1337ea_2fd3fe2f",
        "filename": "src/libANGLE/renderer/metal/mtl_buffer_pool.h",
        "patchSetId": 10
      },
      "lineNbr": 28,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: naming. dynamic buffer -\u003e buffer pool. There\u0027s a couple instances in these comments.",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 28,
        "endChar": 18
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06585f07_f86be828",
        "filename": "src/libANGLE/renderer/metal/mtl_buffer_pool.h",
        "patchSetId": 10
      },
      "lineNbr": 28,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2b1337ea_2fd3fe2f",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 28,
        "endChar": 18
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a4f211c_6b3520b0",
        "filename": "src/libANGLE/renderer/metal/mtl_buffer_pool.mm",
        "patchSetId": 10
      },
      "lineNbr": 25,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-13T12:24:04Z",
      "side": 1,
      "message": "This variable is not used atm. Since I don\u0027t see any equivalent of Vulkan\u0027s flushBuffer() in metal yet. Will see what is the best way to notify GPU of the data portion change.\nCurrently I just commit/flush the whole buffer.",
      "range": {
        "startLine": 25,
        "startChar": 6,
        "endLine": 25,
        "endChar": 34
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc137187_3e48dbf5",
        "filename": "src/libANGLE/renderer/metal/mtl_buffer_pool.mm",
        "patchSetId": 10
      },
      "lineNbr": 25,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "Metal might handle this automatically. Vulkan is often the most manual API to use. You can remove it if it is not used. It would clean up the code slightly.",
      "parentUuid": "5a4f211c_6b3520b0",
      "range": {
        "startLine": 25,
        "startChar": 6,
        "endLine": 25,
        "endChar": 34
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e4716d1_57c6272f",
        "filename": "src/libANGLE/renderer/metal/mtl_buffer_pool.mm",
        "patchSetId": 10
      },
      "lineNbr": 25,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc137187_3e48dbf5",
      "range": {
        "startLine": 25,
        "startChar": 6,
        "endLine": 25,
        "endChar": 34
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82b0adce_6341f4bb",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 53,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "can you add some short comments as to what the functions do?",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 53,
        "endChar": 66
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d449b4d_bec13657",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 53,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "82b0adce_6341f4bb",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 53,
        "endChar": 66
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dfddc62c_85efdabc",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 65,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "general style comment: prefer using \u003cname\u003e \u003d \u003ctype\u003e syntax as it is more modern and more readable.",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 59
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84a82d8d_1f2afdc5",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 65,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dfddc62c_85efdabc",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 59
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0fdbf49b_51621b60",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 72,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "std::deque is probably not what you want. I think internally it uses a linked list. I\u0027d recommend you just use std::vector here. A few extra lines of code to do the deletion calls is not that bad, and in return you get a much less opaque type.\n\nAlso I think you can call these mQueueCmdBuffers/Tmp, we probably will always be storing Metal command buffers here.",
      "range": {
        "startLine": 72,
        "startChar": 9,
        "endLine": 72,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a070444_bcb7b43f",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 72,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "I think deque store data in a somewhat similar way to vector, even though its contained elements might not continuous, but the memory allocated, including the buckets are probably continuous, otherwise it is just another std::list.\nI found this article having some benchmarks on deque, vector and list: https://baptiste-wicht.com/posts/2012/12/cpp-benchmark-vector-list-deque.html\ndeque and vector are very similar in a lot of benchmarks. And it\u0027s faster than vector when push front and pop front.\nBut anw, i think the cost of vector\u0027s pop front in this CommandQueue is irrelevant, since there won\u0027t be many command buffers queued at a time.",
      "parentUuid": "0fdbf49b_51621b60",
      "range": {
        "startLine": 72,
        "startChar": 9,
        "endLine": 72,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ecee450b_2bee3e32",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 72,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "OK, let me read that and get back to you. I could be wrong.",
      "parentUuid": "9a070444_bcb7b43f",
      "range": {
        "startLine": 72,
        "startChar": 9,
        "endLine": 72,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11160295_2685ed06",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 72,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "Cool. Looks like I had some incorrect assumptions. dequeue is almost as fast as vector for random and back ops and way faster for front ops.\n\nReference: https://baptiste-wicht.com/posts/2012/12/cpp-benchmark-vector-list-deque.html",
      "parentUuid": "ecee450b_2bee3e32",
      "range": {
        "startLine": 72,
        "startChar": 9,
        "endLine": 72,
        "endChar": 14
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d4e26a9_d2a98f92",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "how did you end up with std::atomic for serials? Are you doing multi-threading in your testing? Or is this a defensive measure?\n\nAt least I think for serials you could define a mtl::Serial or rx::SerialMtl class that is just a \u0027using\u0027 pattern.",
      "range": {
        "startLine": 76,
        "startChar": 9,
        "endLine": 76,
        "endChar": 15
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "393bd84d_8bd69f49",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "I was just thinking OpenGL allows multiple contexts, and multiple contexts can run on multiple threads. Each context uses one command buffer, so if their command buffers compete with each other when notifying the command queue, this flag has to be atomic (wait, not true, in this case, the command queue use mutex, so atomic is not needed here, but there is a next point). This flag is also used when Resource wants to check if its serial\u0027s command buffer is still in progress. For fast checking in that case, I don\u0027t use lock, so atomic is useful here.",
      "parentUuid": "5d4e26a9_d2a98f92",
      "range": {
        "startLine": 76,
        "startChar": 9,
        "endLine": 76,
        "endChar": 15
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "edeeab25_11e85f73",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "Ah. Right now we lock in the front-end code for any multithreaded scenarios. You should be safe to use normal ints instead of atomics. I don\u0027t think we\u0027ll be changing this any time soon so I think we should go ahead and use normal ints.",
      "parentUuid": "393bd84d_8bd69f49",
      "range": {
        "startLine": 76,
        "startChar": 9,
        "endLine": 76,
        "endChar": 15
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0205f5e_14e65bd5",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "I will keep it as atomic for now. We can profile the performance in future to see if any optimization is needed. Metal reporting finished command buffer actually happens on a separate thread from the thread that the reading of last finished command buffer\u0027s id takes place. So atomic is necessary since integer reading is not guaranteed to be atomic.",
      "parentUuid": "edeeab25_11e85f73",
      "range": {
        "startLine": 76,
        "startChar": 9,
        "endLine": 76,
        "endChar": 15
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe892f86_49bfbcbc",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 203,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "general comment: can you extract as many nested classes as possible into public classes? I\u0027ve found it\u0027s usually easier to work with non-nested classes.",
      "range": {
        "startLine": 161,
        "startChar": 4,
        "endLine": 203,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "452f524c_71a2ad6f",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 203,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "I think this is unneeded code anymore. But anw, actually I thought the inner struct actually will have a namespace (i.e. its parent class name), so it can keep its pure English name instead of having postix like Mtl.\nBut nvm, that\u0027s just my 2c.",
      "parentUuid": "fe892f86_49bfbcbc",
      "range": {
        "startLine": 161,
        "startChar": 4,
        "endLine": 203,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ffc9b82_98dc26f3",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 203,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "Understood. If you can remove the code, great. For other nested structs, the suffix is okay. It allows people to forward-declare them if necessary.",
      "parentUuid": "452f524c_71a2ad6f",
      "range": {
        "startLine": 161,
        "startChar": 4,
        "endLine": 203,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1cce0700_6a64a0ed",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.h",
        "patchSetId": 10
      },
      "lineNbr": 203,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Removed.",
      "parentUuid": "9ffc9b82_98dc26f3",
      "range": {
        "startLine": 161,
        "startChar": 4,
        "endLine": 203,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3068bb79_42d6d4fc",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.mm",
        "patchSetId": 10
      },
      "lineNbr": 78,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: !mQueuedCmdBuffers.empty()",
      "range": {
        "startLine": 78,
        "startChar": 49,
        "endLine": 78,
        "endChar": 78
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "367009b2_65063cc0",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.mm",
        "patchSetId": 10
      },
      "lineNbr": 78,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3068bb79_42d6d4fc",
      "range": {
        "startLine": 78,
        "startChar": 49,
        "endLine": 78,
        "endChar": 78
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "99f7b7b8_a9360b88",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.mm",
        "patchSetId": 10
      },
      "lineNbr": 424,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "could this be a helper function? Again I\u0027m not as familiar with ObjC and templates. Try to avoid macros whenever possible. They\u0027re quite tricky to debug.",
      "range": {
        "startLine": 424,
        "startChar": 8,
        "endLine": 424,
        "endChar": 42
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "759fdab1_ee020b8d",
        "filename": "src/libANGLE/renderer/metal/mtl_command_buffer.mm",
        "patchSetId": 10
      },
      "lineNbr": 424,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. initWriteDependencyAndStoreAction() replaces this.",
      "parentUuid": "99f7b7b8_a9360b88",
      "range": {
        "startLine": 424,
        "startChar": 8,
        "endLine": 424,
        "endChar": 42
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5bf149de_c59034a8",
        "filename": "src/libANGLE/renderer/metal/mtl_common.h",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "can you put all these in the mtl:: namespace to keep them isolated?",
      "range": {
        "startLine": 47,
        "startChar": 19,
        "endLine": 47,
        "endChar": 37
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8aedf85_45905ac3",
        "filename": "src/libANGLE/renderer/metal/mtl_common.h",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done. Moved inside mtl. See below.",
      "parentUuid": "5bf149de_c59034a8",
      "range": {
        "startLine": 47,
        "startChar": 19,
        "endLine": 47,
        "endChar": 37
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d4085cf_00100c45",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 39,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: prefer \u0027using\u0027 to \u0027typedef\u0027 as mentioned elsewhere",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 39,
        "endChar": 8
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9ee56d3_245835ac",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 39,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5d4085cf_00100c45",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 39,
        "endChar": 8
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "365a0e1f_9a5dde5f",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "You\u0027re using a shared_ptr to a Texture, and internally each Texture is a Resource that has a shared_ptr to a Ref. I kinda wish there was some way to use a single sharing mechanism. I\u0027m not familiar enough with the code to know if that\u0027s possible. Maybe at worse you can leave a couple comments explaining some of the use case.",
      "range": {
        "startLine": 40,
        "startChar": 13,
        "endLine": 40,
        "endChar": 23
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94cfbada_36050325",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "the internal Ref (actually just stores serial of the cmd buffer that is using it) has to be shared_ptr since some Resources might just be a view of other resource. For example, a cube face view will share the Ref with its original cube texture, since once cmd buffer starts using one of them, it means both are being used. The cube face view and original cube texture are appeared as regular Texture with different size and slices to outside code.\nThe Resource itself needed to be shared_ptr since it will be used all over the places, for example, textures are used in Render Pass descriptor, and framebuffers.",
      "parentUuid": "365a0e1f_9a5dde5f",
      "range": {
        "startLine": 40,
        "startChar": 13,
        "endLine": 40,
        "endChar": 23
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b54249d_200c209e",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "Okay, maybe just leave or one two comments explaining the use cases like you did here. SGTM",
      "parentUuid": "94cfbada_36050325",
      "range": {
        "startLine": 40,
        "startChar": 13,
        "endLine": 40,
        "endChar": 23
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49702b26_81c86638",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 40,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b54249d_200c209e",
      "range": {
        "startLine": 40,
        "startChar": 13,
        "endLine": 40,
        "endChar": 23
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8aa564b_dceb38ee",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: no need to use \u0027mCmd\u0027 prefix for basic structs. Just cmBufferQueueSerial/cpuReadMemDirty.",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 76,
        "endChar": 38
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e5c6f6b_434bf7a3",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.h",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c8aa564b_dceb38ee",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 76,
        "endChar": 38
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a350f79_74537fb6",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.mm",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "can you make this a small helper function? I\u0027m not as familiar with ObjC.",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28b50b17_28eaa74d",
        "filename": "src/libANGLE/renderer/metal/mtl_resources.mm",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a350f79_74537fb6",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ee8d556_c950bf6f",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.h",
        "patchSetId": 10
      },
      "lineNbr": 32,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "using TextureRef by value is going to copy a shared_ptr. This could internally trigger heap memory allocations. Try passing Refs by const \u0026 when possible.",
      "range": {
        "startLine": 32,
        "startChar": 40,
        "endLine": 32,
        "endChar": 51
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2617277_3e55f52c",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.h",
        "patchSetId": 10
      },
      "lineNbr": 32,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3ee8d556_c950bf6f",
      "range": {
        "startLine": 32,
        "startChar": 40,
        "endLine": 32,
        "endChar": 51
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a5e888eb_793e3a0d",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "is this an implementation error? maybe you should just change this to an ASSERT.",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 38,
        "endChar": 5
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6263a0d9_3b383da0",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 38,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "Actually I call this function in many places when I want to initialize the texture. So the caller doesn\u0027t have to check this condition.",
      "parentUuid": "a5e888eb_793e3a0d",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 38,
        "endChar": 5
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b63fd11b_53d1a6b5",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "Ack, maybe leave a comment?",
      "parentUuid": "6263a0d9_3b383da0",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 38,
        "endChar": 5
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3dc1c50e_9a38f906",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-28T17:44:17Z",
      "side": 1,
      "message": "Re-nit for comment.",
      "parentUuid": "b63fd11b_53d1a6b5",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 38,
        "endChar": 5
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fbcb201_92db49b2",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "does metal allow you to use STL types like std::vector? I\u0027d use that here. or angle::MemoryBuffer. This will let you use an RAII pattern.",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 71
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcc38f9b_ae3afaaa",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-15T08:01:39Z",
      "side": 1,
      "message": "OK, this is an old code. Actually I think I switched to std::unique_ptr recently. I didn\u0027t use std::vector, because std::vector doesn\u0027t notify caller about failed memory alloc unless exceptions are turned on.",
      "parentUuid": "6fbcb201_92db49b2",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 71
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0788ab10_64f2d77f",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-15T12:58:21Z",
      "side": 1,
      "message": "I suggest using angle::MemoryBuffer. It does notify.",
      "parentUuid": "dcc38f9b_ae3afaaa",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 71
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a23fa604_75d1f68d",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0788ab10_64f2d77f",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 71
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a401df3_a22eae32",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 53,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "same here",
      "range": {
        "startLine": 53,
        "startChar": 4,
        "endLine": 53,
        "endChar": 77
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e313880_20c243c1",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 53,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a401df3_a22eae32",
      "range": {
        "startLine": 53,
        "startChar": 4,
        "endLine": 53,
        "endChar": 77
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82231bcf_a26000f8",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 60,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "you will be able to use TRY macros here too.",
      "range": {
        "startLine": 54,
        "startChar": 0,
        "endLine": 60,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "371c306d_a3def028",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 60,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "82231bcf_a26000f8",
      "range": {
        "startLine": 54,
        "startChar": 0,
        "endLine": 60,
        "endChar": 0
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d382474_af4735b9",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 66,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "nit: can you use an explicit type here? It would make it clearer to the reader.",
      "range": {
        "startLine": 66,
        "startChar": 4,
        "endLine": 66,
        "endChar": 9
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "977a4034_6808c07c",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 66,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "It\u0027s Apple convention, they have a family of functions like \u003ctype\u003eMake(). So by looking at the function name, you know the return type is MTLRegion.",
      "parentUuid": "4d382474_af4735b9",
      "range": {
        "startLine": 66,
        "startChar": 4,
        "endLine": 66,
        "endChar": 9
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "71574d17_4c17d3d0",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 403,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-10-14T16:06:07Z",
      "side": 1,
      "message": "this function looks useful. Can you move it into common/utilities.h/cpp?",
      "range": {
        "startLine": 403,
        "startChar": 5,
        "endLine": 403,
        "endChar": 27
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63d698cd_61ca9f44",
        "filename": "src/libANGLE/renderer/metal/mtl_utils.mm",
        "patchSetId": 10
      },
      "lineNbr": 403,
      "author": {
        "id": 1374244
      },
      "writtenOn": "2019-10-25T16:47:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "71574d17_4c17d3d0",
      "range": {
        "startLine": 403,
        "startChar": 5,
        "endLine": 403,
        "endChar": 27
      },
      "revId": "72710eef3c966c0b2e544eb105fb112ab36cc2cc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}