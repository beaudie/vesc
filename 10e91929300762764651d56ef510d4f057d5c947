{
  "comments": [
    {
      "key": {
        "uuid": "7108c6af_607fbed6",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2956,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-05-19T17:50:29Z",
      "side": 1,
      "message": "we are",
      "range": {
        "startLine": 2956,
        "startChar": 18,
        "endLine": 2956,
        "endChar": 20
      },
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "121af05e_c9bd9571",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2956,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-05-19T18:45:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7108c6af_607fbed6",
      "range": {
        "startLine": 2956,
        "startChar": 18,
        "endLine": 2956,
        "endChar": 20
      },
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d359ca4_77ea4c2d",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2970,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-05-19T18:16:49Z",
      "side": 1,
      "message": "Why don\u0027t we need a \u0027mCurrentLayout \u003d newLayout\u0027 here also?   The layouts don\u0027t match exactly, so we\u0027re losing this new information.",
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0d7a45e_f833fdda",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2970,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-05-19T18:26:13Z",
      "side": 1,
      "message": "Good catch, Tim! I will fix that.",
      "parentUuid": "6d359ca4_77ea4c2d",
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e1add1d_77a4abcd",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2970,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-05-19T18:45:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0d7a45e_f833fdda",
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a1e524ae_3581fd68",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2995,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-05-19T18:16:49Z",
      "side": 1,
      "message": "Why is mCurrentLayout guaranteed not to be a non-shaderRead layout here?\n\nIt looks like \u0027mCurrentLayout \u003d newLayout\u0027 will be executed if we are transitioning to a shaderRead layout from something else, so the next time around it will contain that shaderRead layout which will result in mLastNonShaderReadOnlyLayout containing a shaderReadOnly layout value (even though it\u0027s name implies otherwise).",
      "range": {
        "startLine": 2989,
        "startChar": 0,
        "endLine": 2995,
        "endChar": 13
      },
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8db7771_86928b37",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2995,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-05-19T18:26:13Z",
      "side": 1,
      "message": "As your previous comment pointed out, the line bellow \"mCurrentLayout \u003d newLayout;\" should move outside one level. you only get to here when mCurrentLayout is not a shaderReadOnly. Otherwise, you should get to line 2956.",
      "parentUuid": "a1e524ae_3581fd68",
      "range": {
        "startLine": 2989,
        "startChar": 0,
        "endLine": 2995,
        "endChar": 13
      },
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1604b40_8cf08e05",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2995,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-05-19T19:00:39Z",
      "side": 1,
      "message": "\u003e you only get to here when mCurrentLayout is not a shaderReadOnly\n\nHow is that enforced?\n\nI still don\u0027t understand what\u0027s preventing mLastNonShaderReadOnlyLayout from containing a ShaderReadOnly value here.   If this is transitioning from a ShaderReadOnly to ShaderReadOnly, mCurrentLayout will contain a ReadOnly layout, which will then be given to mLastNonShaderReadOnlyLayout.   It seems the only thing preventing that is \u0027mLastNonShaderReadOnlyLayout !\u003d ImageLayout::Undefined\u0027 above, which may not necessarily be true (otherwise, presumably you wouldn\u0027t need to check it).\n\nMaybe I\u0027m missing what\u0027s forcing a layout that\u0027s not ReadOnly to be set before a ReadOnly so that \u0027mLastNonShaderReadOnlyLayout !\u003d ImageLayout::Undefined\u0027 is guaranteed to be true when doing ReadOnly-\u003eReadOnly?",
      "parentUuid": "f8db7771_86928b37",
      "range": {
        "startLine": 2989,
        "startChar": 0,
        "endLine": 2995,
        "endChar": 13
      },
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2593ca64_875e359b",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 6
      },
      "lineNbr": 2995,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-05-19T19:29:15Z",
      "side": 1,
      "message": "Could be nice to sprinkle ASSERTs verifying that mLastNonShaderReadOnlyLayout doesn\u0027t contain a ShaderReadOnly value.",
      "parentUuid": "b1604b40_8cf08e05",
      "range": {
        "startLine": 2989,
        "startChar": 0,
        "endLine": 2995,
        "endChar": 13
      },
      "revId": "10e91929300762764651d56ef510d4f057d5c947",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}