{
  "comments": [
    {
      "key": {
        "uuid": "3920245f_7b418f96",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-07-18T03:40:11Z",
      "side": 1,
      "message": "LGTM with Shabi\u0027s comments addressed.   This should help clarify things in the future.",
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8aa91c7_28a4ef76",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T16:41:44Z",
      "side": 1,
      "message": "Important answer/question to Tim below ... I\u0027ll push a new patch set once I get done with the work on my other CL.",
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "749ada83_aa5bb7b3",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-07-18T03:40:11Z",
      "side": 1,
      "message": "Is this rotated?",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8972f908_43046484",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-07-18T04:44:57Z",
      "side": 1,
      "message": "Hacking with my MSAA stuff some more, it turns out that this is not rotated, so updating the scissor is breaking the render pass.",
      "parentUuid": "749ada83_aa5bb7b3",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b472d12_7cb2eb54",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T16:41:44Z",
      "side": 1,
      "message": "\u003e Is this rotated?\n\nIt is based on what render area was previously given.  When rendering to an offscreen FBO, it will not be rotated (and neither will scissoredRenderArea).  When rendering to an onscreen swapchain image, it WILL be rotated (as will scissoredRenderArea).  From what I\u0027ve seen from GFXBench and app testing (so far) is that the render pass (RP) is broken when switching rendering between an onscreen swapchain image and an offscreen FBO.  Everything I\u0027ve seen has made sense.\n\nPlease tell me more about your MSAA case.  Is this a case where the MSAA is for the window (i.e. will eventually be resolved to a swapchain image, but is still an offscreen MSAA image)?  I wonder if we have a case where ANGLE thinks the destination drawable is rotated (because of the window), but really isn\u0027t (because it\u0027s an offscreen MSAA image)?",
      "parentUuid": "8972f908_43046484",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a7d20e76_a0698e57",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T19:08:45Z",
      "side": 1,
      "message": "From talking about it in the \"stand-up meeting\", it\u0027s not clear that there\u0027s anything wrong happening.  Most of the rendering is happening to a non-rotated offscreen image, and then the final render pass renders to an offscreen image.  There\u0027s a necessary break in the render pass because of a break in the draw framebuffer (with a different orientation).\n\nTim asked about rotating all of the offscreen objects, the same way as the main window.  At this point, we only rotate onscreen objects.  Courtney pointed out that if we ever determine that this is a large performance factor, we can look at doing it then.\n\nI would like to reproduce this with my instrumentation turned on, just to check (e.g. run the game on my phone and look at the logcat output).  In the mean time, I\u0027m going to resolve this.  Tim, please un-resolve if you think there\u0027s more to discuss at this time.",
      "parentUuid": "9b472d12_7cb2eb54",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c47f8c3a_2437d1db",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-07-20T19:13:59Z",
      "side": 1,
      "message": "I\u0027m not sure what you\u0027re looking for, but here\u0027s a renderdoc capture:\nhttps://drive.google.com/file/d/1i3L3lKyj_rm3QrCi25OtBghzDEg_1QUJ/view?usp\u003dsharing\n\nThis is what works for me to prevent breaking the RP by making the dimensions match:\nhttps://chromium-review.googlesource.com/c/angle/angle/+/2298663/3/src/libANGLE/renderer/vulkan/ContextVk.cpp",
      "parentUuid": "9b472d12_7cb2eb54",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "76a2bb18_95b4ad02",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T19:50:56Z",
      "side": 1,
      "message": "Interesting.\n\nWhat game(s) and/or test(s) have you tried this with?  Is it rendering correctly?\n\nLooks like your CL is addressing a new MSAA path, and so it may be that we need something like what you\u0027re doing (perhaps with an additional check for when doing an MSAA resolve)?  I\u0027ll try to catch up on your CL sometime",
      "parentUuid": "c47f8c3a_2437d1db",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "621a9eda_627c740a",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-07-20T20:29:35Z",
      "side": 1,
      "message": "This is running Asphalt 8.\n\nAs far as that portion of my hack CL is concerned, the app has the multisampled image bound as the read FBO and the draw FBO will be resolved into with the blit() that\u0027s being performed when that ContextVk::updateScissor() call is performed.   I don\u0027t think either image will be presented, so presumably the rotation should match (or be corrected to match) when comparing the extents.",
      "parentUuid": "76a2bb18_95b4ad02",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ca01acc_e86d631c",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2645,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-21T00:10:05Z",
      "side": 1,
      "message": "I\u0027m going to land this CL, and look more at this later (potential follow-on CL, or in your CL).\n\nAfter doing the analysis that Prahlad wanted (and experimenting with various options/CLs), I\u0027ve run out of day.",
      "parentUuid": "621a9eda_627c740a",
      "range": {
        "startLine": 2645,
        "startChar": 34,
        "endLine": 2645,
        "endChar": 47
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7e1c19b_3d85b344",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 321,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-07-18T03:18:54Z",
      "side": 1,
      "message": "Typo I think.",
      "range": {
        "startLine": 321,
        "startChar": 52,
        "endLine": 321,
        "endChar": 55
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cfd2c5d_ebf76ced",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 321,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T16:41:44Z",
      "side": 1,
      "message": "YES!  I had it correct on Android, and mis-did the cleanup step.",
      "parentUuid": "e7e1c19b_3d85b344",
      "range": {
        "startLine": 321,
        "startChar": 52,
        "endLine": 321,
        "endChar": 55
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d748f707_331a8503",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 321,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T18:41:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9cfd2c5d_ebf76ced",
      "range": {
        "startLine": 321,
        "startChar": 52,
        "endLine": 321,
        "endChar": 55
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d517ffc_582bfd94",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 554,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-07-20T18:52:21Z",
      "side": 1,
      "message": "can this also use the newAPI?",
      "range": {
        "startLine": 549,
        "startChar": 4,
        "endLine": 554,
        "endChar": 61
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c083f467_9759b676",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 554,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T19:08:45Z",
      "side": 1,
      "message": "Unfortunately, no.  The new API rotates based upon the draw framebuffer (contextVk-\u003eisRotatedAspectRatioForDrawFBO()), and this needs to rotate based on the read framebuffer (contextVk-\u003eisRotatedAspectRatioForReadFBO())",
      "parentUuid": "1d517ffc_582bfd94",
      "range": {
        "startLine": 549,
        "startChar": 4,
        "endLine": 554,
        "endChar": 61
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a493eb58_88e08302",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 726,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-07-18T03:18:54Z",
      "side": 1,
      "message": "Is this a bug fix? Would be nice if a test was added for it, though I\u0027m surprised it wasn\u0027t caught with the current tests.",
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c1fb6a1_aa69536d",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 726,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T16:41:44Z",
      "side": 1,
      "message": "It is a bug fix, and I am surprised it hasn\u0027t been seen with the current tests.  I\u0027ll look to see if a test is exercising this.",
      "parentUuid": "a493eb58_88e08302",
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd77b988_72e6904c",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 726,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T19:08:45Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0c1fb6a1_aa69536d",
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baefdeee_5bf7d572",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1405,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-07-18T03:18:54Z",
      "side": 1,
      "message": "getRotated*",
      "range": {
        "startLine": 1405,
        "startChar": 36,
        "endLine": 1405,
        "endChar": 39
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "335139ce_106296f9",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1405,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-07-18T03:40:11Z",
      "side": 1,
      "message": "Can you expand/clarify this, or just remove it?   It looks like you\u0027re referring to the flushDeferredClears() call below, but that won\u0027t be obvious without a diff like this.",
      "range": {
        "startLine": 1405,
        "startChar": 63,
        "endLine": 1405,
        "endChar": 89
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b46ac8ed_0a05f0e2",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1405,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T16:41:44Z",
      "side": 1,
      "message": "Agree, I\u0027ll remove it",
      "parentUuid": "335139ce_106296f9",
      "range": {
        "startLine": 1405,
        "startChar": 63,
        "endLine": 1405,
        "endChar": 89
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "617b9704_8fbdfd25",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1405,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T18:41:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baefdeee_5bf7d572",
      "range": {
        "startLine": 1405,
        "startChar": 36,
        "endLine": 1405,
        "endChar": 39
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8757339c_c1321050",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1405,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T18:41:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b46ac8ed_0a05f0e2",
      "range": {
        "startLine": 1405,
        "startChar": 63,
        "endLine": 1405,
        "endChar": 89
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "892dea22_ee91dd76",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1474,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-07-18T03:18:54Z",
      "side": 1,
      "message": "getRotated",
      "range": {
        "startLine": 1474,
        "startChar": 26,
        "endLine": 1474,
        "endChar": 29
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7cc727f9_d2e347cf",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1474,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-07-20T18:41:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "892dea22_ee91dd76",
      "range": {
        "startLine": 1474,
        "startChar": 26,
        "endLine": 1474,
        "endChar": 29
      },
      "revId": "c176b5c98c78dfb85729aea97721358ba608bd3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}