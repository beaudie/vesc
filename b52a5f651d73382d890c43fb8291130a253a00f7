{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d68aa792_4d09f2d7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-21T04:11:26Z",
      "side": 1,
      "message": "This is a followup to https://chromium-review.googlesource.com/c/angle/angle/+/4178311/6..9/src/tests/gl_tests/gles1/PalettedTextureTest.cpp#b61",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b859b09_294416cb",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-06-21T13:20:10Z",
      "side": 1,
      "message": "Do we also have a test to check that the readback is correct by itself? Like a test that uploads a fixed paletted texture and on readback ensures the colors are right.",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a397d47e_e4186e10",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-21T15:30:11Z",
      "side": 1,
      "message": "No, we don\u0027t",
      "parentUuid": "0b859b09_294416cb",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "00f7ecc5_87a91052",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-06-21T15:33:44Z",
      "side": 1,
      "message": "Ack, would be good to have one. Because `readback` and `reacback2` could be equally garbage, lol",
      "parentUuid": "a397d47e_e4186e10",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5228ffc6_33c37702",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-21T15:36:25Z",
      "side": 1,
      "message": "Yeah I\u0027ll do it shortly. The way I\u0027d test would be to take a bunch of samples after the first paletted upload, from the R8G8B8A8_UNORM readback data, and compare them for equality",
      "parentUuid": "00f7ecc5_87a91052",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac095ee2_fda6bca1",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-06-21T15:48:00Z",
      "side": 1,
      "message": "What if they are all wrong? Isn\u0027t it better to handcraft a paletted texture that will give out known colors and make sure each color is correct? Like a 2Nx2M texture with red/green/blue/yellow in each NxN block, and then the readback would verify each NxM has the right color.",
      "parentUuid": "5228ffc6_33c37702",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "326e41d5_46dd8f83",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-21T15:51:27Z",
      "side": 1,
      "message": "We already have a test that verifies that paletted textures upload and render correctly: PalettedTextureTest.PalettedTextureSampling/* .",
      "parentUuid": "ac095ee2_fda6bca1",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2476c9f2_deb2bb61",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-21T16:12:09Z",
      "side": 1,
      "message": "The test as is still doesn\u0027t verify that samples are any particular values, but an easy change would be to manually verify the value at framebuffer location, say, (0, 0) and write it down in the kPalettedFormats (perhaps would be more appropriate to rename it to kPalettedTests or something)",
      "parentUuid": "326e41d5_46dd8f83",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "743cf306_8f0b61b3",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-06-21T16:17:47Z",
      "side": 1,
      "message": "\u003e verifies that paletted textures upload and render correctly\n\nIt verifies upload and _render_, but not upload and _readback_.\n\nWhat I\u0027m trying to say is that with all these tests, readback could return all 0s and the test would be none the wiser.",
      "parentUuid": "2476c9f2_deb2bb61",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29966b78_16e0d803",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-21T16:30:57Z",
      "side": 1,
      "message": "\u003e It verifies upload and render, but not upload and readback.\n\nThe current test verifies that. It builds upon the assumption that upload and render of paletted textures (tested by PalettedTextureSampling) and glReadPixel work. It draws a palette textured quad, takes a number of random samples within the framebuffer using glReadPixel, then reads back the texture, recompresses it, and repeats the upload, draw, gather samples process, and then expects the collected samples to be equal. So if readback was to return just zeros, the test would fail, because the second samples would be zeros.",
      "parentUuid": "743cf306_8f0b61b3",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05c819b0_dd8916de",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-21T16:35:48Z",
      "side": 1,
      "message": "Actually just realized we can just capture the entire framebuffer both times and compare that instead of taking a small number of samples, which ends up being somewhat more involved.",
      "parentUuid": "29966b78_16e0d803",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad9b92b2_02e8450d",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-06-21T16:46:30Z",
      "side": 1,
      "message": "Oh right, I didn\u0027t notice one of the readbacks is from a render. Test is good üëç\n\n(also didn\u0027t realize it\u0027s GLES1 so you aren\u0027t reading back from the texture itself anyway)",
      "parentUuid": "05c819b0_dd8916de",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aaf0dba3_b94831db",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1533513
      },
      "writtenOn": "2023-06-26T06:11:44Z",
      "side": 1,
      "message": "Can we merge this or do we need someone else to review and give code review +1? I\u0027m guessing Cody is away for the time being.",
      "parentUuid": "ad9b92b2_02e8450d",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "93952579_f5d3b68d",
        "filename": "src/tests/gl_tests/GetImageTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1177,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-06-26T15:40:07Z",
      "side": 1,
      "message": "Cody\u0027s back today according to his calendar. Let\u0027s give it a day",
      "parentUuid": "aaf0dba3_b94831db",
      "revId": "b52a5f651d73382d890c43fb8291130a253a00f7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}