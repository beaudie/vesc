{
  "comments": [
    {
      "key": {
        "uuid": "177e9389_f62b9540",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 41
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-13T19:59:38Z",
      "side": 1,
      "message": "Removed some problematic ASSERTs.",
      "revId": "45a3eb1f65f0379269e3a572b65355051b258597",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "869c76e2_783a0cba",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 41
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-13T22:10:17Z",
      "side": 1,
      "message": "Tim/Charlie, this is good to go. We\u0027re fixing the perftests flake in http://anglebug.com/4943 . It\u0027s unrelated to this CL.",
      "revId": "45a3eb1f65f0379269e3a572b65355051b258597",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "329f58a2_a5bdab2a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 41
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-08-13T22:30:04Z",
      "side": 1,
      "message": "Awesome, ship it!",
      "revId": "45a3eb1f65f0379269e3a572b65355051b258597",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da666f10_76b70beb",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 41
      },
      "lineNbr": 1827,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-13T22:43:25Z",
      "side": 1,
      "message": "Wasn\u0027t there a bunch of discussion a few months ago about queries and render passes?   I see stuff like:\n\n    if (isOcclusionQuery())\n    {\n        // For pathological usage case where begin/end is called back to back without flush and get\n        // result, we have to force flush so that the same mQueryHelper will not encoded in the same\n        // renderpass twice without resetting it.\n        if (mQueryHelper.hasPendingWork(contextVk))\n        {\n            ANGLE_TRY(contextVk-\u003eflushImpl(nullptr));\n            // As soon as beginQuery is called, previous query\u0027s result will not retrievable by API.\n            // We must clear it so that it will not count against current beginQuery call.\n            mStashedQueryHelpers.clear();\n            mQueryHelper.deinit();\n            ANGLE_TRY(contextVk-\u003egetQueryPool(getType())-\u003eallocateQuery(contextVk, \u0026mQueryHelper));\n        }\n        contextVk-\u003ebeginOcclusionQuery(this);\n    }\n\nIs that work still necessary with these additions?",
      "range": {
        "startLine": 1824,
        "startChar": 0,
        "endLine": 1827,
        "endChar": 5
      },
      "revId": "45a3eb1f65f0379269e3a572b65355051b258597",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f07cb7eb_ec0dab8d",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 41
      },
      "lineNbr": 1827,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-08-13T22:48:16Z",
      "side": 1,
      "message": "Right, that seems a regression. Is there a reason for this change?",
      "parentUuid": "da666f10_76b70beb",
      "range": {
        "startLine": 1824,
        "startChar": 0,
        "endLine": 1827,
        "endChar": 5
      },
      "revId": "45a3eb1f65f0379269e3a572b65355051b258597",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc6dfec5_e3ee3d80",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 41
      },
      "lineNbr": 1827,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-13T22:59:03Z",
      "side": 1,
      "message": "These methods are for non-occlusion queries. Occlusion queries use \"beginOcclusionQuery\" etc below. I did have the some concern and double-checked with Manhattan before landing. I could rename these to something like \"beginNonOcclusionQuery\" to prevent future mishaps. In any case we can do that in a follow-up.\n\nYou can confirm by looking in QueryVk.",
      "parentUuid": "f07cb7eb_ec0dab8d",
      "range": {
        "startLine": 1824,
        "startChar": 0,
        "endLine": 1827,
        "endChar": 5
      },
      "revId": "45a3eb1f65f0379269e3a572b65355051b258597",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba84a5cb_6fd3a63b",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 41
      },
      "lineNbr": 1852,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-13T22:59:03Z",
      "side": 1,
      "message": "ref",
      "range": {
        "startLine": 1852,
        "startChar": 18,
        "endLine": 1852,
        "endChar": 37
      },
      "revId": "45a3eb1f65f0379269e3a572b65355051b258597",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}