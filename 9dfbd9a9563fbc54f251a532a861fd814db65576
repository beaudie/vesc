{
  "comments": [
    {
      "key": {
        "uuid": "1626356d_70fcb540",
        "filename": "src/libANGLE/renderer/vulkan/ImageVk.cpp",
        "patchSetId": 40
      },
      "lineNbr": 100,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T17:19:55Z",
      "side": 1,
      "message": "BTW - this looks a bit risky. What if we use EGL image targets for external images that are not YUV conversions?",
      "range": {
        "startLine": 100,
        "startChar": 7,
        "endLine": 100,
        "endChar": 55
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f7e9e5b_457738e1",
        "filename": "src/libANGLE/renderer/vulkan/ImageVk.cpp",
        "patchSetId": 40
      },
      "lineNbr": 100,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-23T14:57:49Z",
      "side": 1,
      "message": "I believe that any external image already has it\u0027s contents defined, that\u0027s the expected use for importing external images.",
      "parentUuid": "1626356d_70fcb540",
      "range": {
        "startLine": 100,
        "startChar": 7,
        "endLine": 100,
        "endChar": 55
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e58d49f4_9e38d6ad",
        "filename": "src/libANGLE/renderer/vulkan/ImageVk.cpp",
        "patchSetId": 40
      },
      "lineNbr": 100,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-23T15:07:10Z",
      "side": 1,
      "message": "Having contents defined is different from supporting a staging buffer. A staging buffer allows updates to the image. And there\u0027s no limitation on updating an external image from the external image spec that I know of. Can you check?",
      "parentUuid": "1f7e9e5b_457738e1",
      "range": {
        "startLine": 100,
        "startChar": 7,
        "endLine": 100,
        "endChar": 55
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96f015d7_9d6eb7ec",
        "filename": "src/libANGLE/renderer/vulkan/SamplerVk.cpp",
        "patchSetId": 40
      },
      "lineNbr": 42,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "nullptr instead of 0?",
      "range": {
        "startLine": 42,
        "startChar": 40,
        "endLine": 42,
        "endChar": 42
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "512d2c73_f00c52f8",
        "filename": "src/libANGLE/renderer/vulkan/SamplerVk.cpp",
        "patchSetId": 40
      },
      "lineNbr": 42,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T14:53:41Z",
      "side": 1,
      "message": "That\u0027s not a pointer argument, it\u0027s the external format, e.g. AHARDWAREBUFFER_FORMAT_* except Android doesn\u0027t have a define for 0 or NA.\nWe define our own version of ndk includes in android_ndk_types.h, I could add one for this there. AHARDWAREBUFFER_FORMAT_NONE 0\nThoughts?",
      "parentUuid": "96f015d7_9d6eb7ec",
      "range": {
        "startLine": 42,
        "startChar": 40,
        "endLine": 42,
        "endChar": 42
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c02b77b0_973f8e37",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 40
      },
      "lineNbr": 171,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "nit: imageFormat.hasDepthOrStencilBits()",
      "range": {
        "startLine": 171,
        "startChar": 41,
        "endLine": 171,
        "endChar": 97
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1be8adf_877b3679",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 40
      },
      "lineNbr": 171,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T14:53:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c02b77b0_973f8e37",
      "range": {
        "startLine": 171,
        "startChar": 41,
        "endLine": 171,
        "endChar": 97
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c015ea61_ad770ae3",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 40
      },
      "lineNbr": 235,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "what happens if this is not enabled? Is this a runtime error? Maybe should make ANGLE_VK_CHECK?",
      "range": {
        "startLine": 235,
        "startChar": 7,
        "endLine": 235,
        "endChar": 73
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ac342e0_c6111f68",
        "filename": "src/libANGLE/renderer/vulkan/android/HardwareBufferImageSiblingVkAndroid.cpp",
        "patchSetId": 40
      },
      "lineNbr": 235,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T14:53:41Z",
      "side": 1,
      "message": "We probably couldn\u0027t be here (wouldn\u0027t have a buffer where format \u003d\u003d VK_FORMAT_UNDEFINED) if don\u0027t have this extension, but I can add ANGLE_VK_CHECK.",
      "parentUuid": "c015ea61_ad770ae3",
      "range": {
        "startLine": 235,
        "startChar": 7,
        "endLine": 235,
        "endChar": 73
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eefe31c2_b737c774",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "can we revert this?",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "deecc83b_87b3e583",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T14:53:41Z",
      "side": 1,
      "message": "No, I don\u0027t think so, I need the VK_FORMAT_NONE in the table. external format buffers use that as their VkFormat.",
      "parentUuid": "eefe31c2_b737c774",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "171d97bc_d294fb4e",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-22T14:59:54Z",
      "side": 1,
      "message": "That seems wrong. Why can\u0027t we learn their real format?",
      "parentUuid": "deecc83b_87b3e583",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ef11493_13084e8d",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T16:38:18Z",
      "side": 1,
      "message": "They may not be using a real format we understand.\nThese external buffers are allowed to use any, possibly proprietary, format. We need to pass along the externFormat so that the driver knows what to do, but there is no corresponding Vulkan format. And that\u0027s why that extension requires the use of VK_FORMAT_UNDEFINED a.k.a. angle::FormatID::NONE.\nI guess we could define another FormatID for this case. FormatID::EXTERNAL or something.",
      "parentUuid": "171d97bc_d294fb4e",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6704da46_a5d9e1c8",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-22T16:44:46Z",
      "side": 1,
      "message": "What formats can they have? It\u0027s fine if it\u0027s not covered by Vulkan. We don\u0027t use Vulkan formats to identify formats in ANGLE, we use angle::Format precisely for this reason.",
      "parentUuid": "7ef11493_13084e8d",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "767b4297_6c868748",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T17:01:21Z",
      "side": 1,
      "message": "One example is the use of a proprietary format for camera data that the sampler knows how to work with but is not documented otherwise. Android treats it as a black box.",
      "parentUuid": "6704da46_a5d9e1c8",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd05ded5_89ae08db",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T17:06:11Z",
      "side": 1,
      "message": "How about an ANDROID_EXTERNAL_FORMAT for this mystery format?",
      "parentUuid": "767b4297_6c868748",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0905c378_59465c39",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-22T17:57:57Z",
      "side": 1,
      "message": "How about just EXTERNAL or EXTERNAL_UNDEFINED ?",
      "parentUuid": "cd05ded5_89ae08db",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8154f9a5_7f894424",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-23T14:57:49Z",
      "side": 1,
      "message": "Will save this for a follow-up task. Trying to add an angle::FormatID that aliases an existing GL format (GL_NONE) breaks the generation scripts. Will take a bit to sort out so leave for later.",
      "parentUuid": "0905c378_59465c39",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9accc42_e68020f8",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-23T14:57:49Z",
      "side": 1,
      "message": "Spent a bit of time looking at this yesterday. Trouble here is that the GL format that most makes sense is GL_NONE since the external format is unknown. However, the FormatID scripts expect a 1:1 relationship between ANGLE FormatID and GL format. Adding a new FormatID that is also GL_NONE would require significant changes to the generation scripts. Basically have to hand code the FormatID::EXTERNAL_UNDEFINED to GL_NONE relationship into the scripts.\nDiscussing with Jamie, decided that can be an activity for later.",
      "parentUuid": "0905c378_59465c39",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50ac9197_0dd06c81",
        "filename": "src/libANGLE/renderer/vulkan/gen_vk_format_table.py",
        "patchSetId": 40
      },
      "lineNbr": 147,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-23T15:07:10Z",
      "side": 1,
      "message": "To clarify - a new angle::Format::ID is required to match the external format. There is no 1:1 mapping to GL format required, we add new GLenums to a header for formats that don\u0027t exist in GL.",
      "parentUuid": "e9accc42_e68020f8",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc799c53_d7e60936",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 40
      },
      "lineNbr": 2232,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "this isn\u0027t how angle::Result is used. for the caches we generally have a single get method that creates the entry if it\u0027s not there and returns a possible error. See other caches for examples.",
      "range": {
        "startLine": 2225,
        "startChar": 0,
        "endLine": 2232,
        "endChar": 31
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "906e6d9a_a14db80e",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 40
      },
      "lineNbr": 2232,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-23T14:57:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc799c53_d7e60936",
      "range": {
        "startLine": 2225,
        "startChar": 0,
        "endLine": 2232,
        "endChar": 31
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed39b73a_43b3bd88",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 40
      },
      "lineNbr": 2254,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "need error handling here",
      "range": {
        "startLine": 2254,
        "startChar": 25,
        "endLine": 2254,
        "endChar": 29
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37343479_5286b8f9",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 40
      },
      "lineNbr": 2254,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-23T14:57:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed39b73a_43b3bd88",
      "range": {
        "startLine": 2254,
        "startChar": 25,
        "endLine": 2254,
        "endChar": 29
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2bef01b_c2a3236f",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 40
      },
      "lineNbr": 639,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "nah, this is fine. you can remove the TODO.",
      "range": {
        "startLine": 639,
        "startChar": 0,
        "endLine": 639,
        "endChar": 88
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1cd70bb_e9c99eb9",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 40
      },
      "lineNbr": 639,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T14:53:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e2bef01b_c2a3236f",
      "range": {
        "startLine": 639,
        "startChar": 0,
        "endLine": 639,
        "endChar": 88
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e142ec4_dd5026df",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 40
      },
      "lineNbr": 666,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-17T15:51:53Z",
      "side": 1,
      "message": "you can omit this comment, it is redundant with the static_assert.",
      "range": {
        "startLine": 664,
        "startChar": 0,
        "endLine": 666,
        "endChar": 87
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f431192c_caa7fcdf",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.h",
        "patchSetId": 40
      },
      "lineNbr": 666,
      "author": {
        "id": 1263724
      },
      "writtenOn": "2020-06-22T14:53:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8e142ec4_dd5026df",
      "range": {
        "startLine": 664,
        "startChar": 0,
        "endLine": 666,
        "endChar": 87
      },
      "revId": "9dfbd9a9563fbc54f251a532a861fd814db65576",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}