{
  "comments": [
    {
      "key": {
        "uuid": "68df9eec_cb1e3fa9",
        "filename": "src/compiler/translator/OutputVulkanGLSL.cpp",
        "patchSetId": 4
      },
      "lineNbr": 176,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2019-12-12T17:21:46Z",
      "side": 1,
      "message": "From a readability perspective, I think this would be better as:\n\n    strlen(inOutQualifier) \u003d\u003d 0",
      "range": {
        "startLine": 176,
        "startChar": 35,
        "endLine": 176,
        "endChar": 60
      },
      "revId": "9ab01f1cef8d7964f8917301adcad067d1178cce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb49ee56_cd9ba36c",
        "filename": "src/compiler/translator/OutputVulkanGLSL.cpp",
        "patchSetId": 4
      },
      "lineNbr": 176,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-12-13T17:19:28Z",
      "side": 1,
      "message": "... which would also unnecessarily iterate over the whole string.\n\nI changed it to `strcmp(inOutQualifier, \"\") \u003d\u003d 0`.",
      "parentUuid": "68df9eec_cb1e3fa9",
      "range": {
        "startLine": 176,
        "startChar": 35,
        "endLine": 176,
        "endChar": 60
      },
      "revId": "9ab01f1cef8d7964f8917301adcad067d1178cce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc62912_9e625ae5",
        "filename": "src/compiler/translator/OutputVulkanGLSL.cpp",
        "patchSetId": 4
      },
      "lineNbr": 176,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2019-12-13T18:03:36Z",
      "side": 1,
      "message": "I\u0027m not sure strcmp() is any faster in practice.\n\nReally, all you\u0027re trying to do is see if there needs to be an extra space or not, when having too many spaces doesn\u0027t hurt anything (functionality or readability).   This seems easiest:\n\n    const char *inOutQualifier \u003d \"\";\n    if (IsShaderIn(qualifier) || IsShaderOut(qualifier))\n    {\n        inOutQualifier \u003d mapQualifierToString(qualifier);\n    }\n    std::string memoryQualifiers \u003d getMemoryQualifiers(type);\n\n    TInfoSinkBase \u0026out \u003d objSink();\n    out \u003c\u003c \"@@ QUALIFIER-\" \u003c\u003c name.data() \u003c\u003c \"(\" \u003c\u003c inOutQualifier \u003c\u003c \" \" \u003c\u003c memoryQualifiers\n        \u003c\u003c \") @@ \";\n\nThis improves performance without sacrificing any readability with the chance there will occasionally be an extra space in the (already not very pretty) translated shader code.",
      "parentUuid": "bb49ee56_cd9ba36c",
      "range": {
        "startLine": 176,
        "startChar": 35,
        "endLine": 176,
        "endChar": 60
      },
      "revId": "9ab01f1cef8d7964f8917301adcad067d1178cce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a784cb07_bfdcfa14",
        "filename": "src/libANGLE/renderer/glslang_wrapper_utils.cpp",
        "patchSetId": 4
      },
      "lineNbr": 672,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2019-12-12T17:21:46Z",
      "side": 1,
      "message": "Unrelated, but since you\u0027re in here, can this be cleaned up or removed?\n\nWe support ES 3.0 shaders, but this assert still isn\u0027t being hit even though we are (or should be?) getting all active and inactive attributes.   Is the assert here worth keeping anymore and the comment just needs to be cleaned up, or should it just be removed?",
      "revId": "9ab01f1cef8d7964f8917301adcad067d1178cce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47d495d1_c443603e",
        "filename": "src/libANGLE/renderer/glslang_wrapper_utils.cpp",
        "patchSetId": 4
      },
      "lineNbr": 672,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-12-13T17:19:28Z",
      "side": 1,
      "message": "Removed the comment as it seems outdated. Found this in Program.cpp:\n\n    if (shaderVersion \u003e\u003d 300)\n    {\n        // In GLSL ES 3.00.6, aliasing checks should be done with all declared attributes -\n        // see GLSL ES 3.00.6 section 12.46. Inactive attributes will be pruned after\n        // aliasing checks.\n        mState.mProgramInputs \u003d vertexShader-\u003egetAllAttributes();\n    }\n    else\n    {\n        // In GLSL ES 1.00.17 we only do aliasing checks for active attributes.\n        mState.mProgramInputs \u003d vertexShader-\u003egetActiveAttributes();\n    }\n\nwhich must be the reason for this comment. But later, the same function does this:\n\n    // Prune inactive attributes. This step is only needed on shaderVersion \u003e\u003d 300 since on earlier\n    // shader versions we\u0027re only processing active attributes to begin with.\n    if (shaderVersion \u003e\u003d 300)\n    {\n        for (auto attributeIter \u003d mState.mProgramInputs.begin();\n             attributeIter !\u003d mState.mProgramInputs.end();)\n        {\n            if (attributeIter-\u003eactive)\n            {\n                ++attributeIter;\n            }\n            else\n            {\n                attributeIter \u003d mState.mProgramInputs.erase(attributeIter);\n            }\n        }\n    }\n\nSo we should never get inactive attributes in mProgramInputs. The code in Program.cpp comes form Mar 2018 and the comment from April 2018. I don\u0027t know why the comment was added; either the author\u0027s local repo was a few weeks old or they simply missed the second loop.",
      "parentUuid": "a784cb07_bfdcfa14",
      "revId": "9ab01f1cef8d7964f8917301adcad067d1178cce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f3ce923_914ae905",
        "filename": "src/libANGLE/renderer/glslang_wrapper_utils.cpp",
        "patchSetId": 4
      },
      "lineNbr": 672,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2019-12-13T18:03:36Z",
      "side": 1,
      "message": "Cool, thanks for looking into that.\n\nThe obvious next question is: can the second loop be removed, since presumably getActiveAttributes() already only contains active attributes?   Or, should the distinction between getAllAttributes() and getActiveAttributes() be removed and we only need getAllAttributes(), since we will clean up mProgramInputs for shaderVersion \u003e\u003d 300 later anyway.\n\nThat\u0027s probably a question for another time though.",
      "parentUuid": "47d495d1_c443603e",
      "revId": "9ab01f1cef8d7964f8917301adcad067d1178cce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}