{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e452ec75_6766a7eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-11-14T15:52:22Z",
      "side": 1,
      "message": "Thanks for the fix",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee782eae_74c86c1f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2022-11-14T16:48:45Z",
      "side": 1,
      "message": "thanks for fix.",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f33601b8_9b4e0285",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-11-14T18:36:12Z",
      "side": 1,
      "message": "going to land this since it has been verified internally",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e50e637_0f6f895f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-11-14T18:42:06Z",
      "side": 1,
      "message": "@sywow.choi@samsung.com can you please confirm you have verified this patch internally?",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f36344de_54346585",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1433074
      },
      "writtenOn": "2022-11-14T23:05:27Z",
      "side": 1,
      "message": "Thank you for the review ðŸ˜Š\n\n@Mohan,\nSure. I verified with the change:\nhttps://chromium-review.googlesource.com/c/angle/angle/+/3596045\n\nHowever, that change which is in-review also has some points to be fixed, in file src/libANGLE/renderer/vulkan/linux/gbm/DisplayVkGbm.cpp, generateConfigs() function.\n1) It\u0027s just overwriting the visual id.\n2) I guess kColorFormats\u003d{GL_BGRA8_EXT} will return ARGB8888 by default. But the Weston\u0027s default format is XRGB8888(Not sure need check again..).\n\nI\u0027ll do more check and leave the comments to that change after this change is merged.",
      "parentUuid": "1e50e637_0f6f895f",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "685c116a_1b9f6f44",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-11-14T23:40:04Z",
      "side": 1,
      "message": "thanks, merging this for now",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b640765c_594be664",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-11-14T23:42:07Z",
      "side": 1,
      "message": "@sywow.choi@samsung.com please fix bot failures and ping for retry",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "059f5c82_c2d96ebd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2022-11-28T16:24:58Z",
      "side": 1,
      "message": "\"2) I guess kColorFormats\u003d{GL_BGRA8_EXT} will return ARGB8888 by default. But the Weston\u0027s default format is XRGB8888(Not sure need check again..).\"\n\nThere are no X8 in the Vulkan formats, Blending should be off anyway. This should map to VK_FORMAT_A8B8G8R8_UNORM_PACK32VK_FORMAT_A8B8G8R8_UNORM_PACK32 or VK_FORMAT_A8B8G8R8_SRGB_PACK32 as I understand it.",
      "parentUuid": "f36344de_54346585",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06fa628c_4105a646",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1433074
      },
      "writtenOn": "2022-11-29T06:45:26Z",
      "side": 1,
      "message": "@Jeff\n\u003e There are no X8 in the Vulkan formats, Blending should be off anyway. This should map to VK_FORMAT_A8B8G8R8_UNORM_PACK32VK_FORMAT_A8B8G8R8_UNORM_PACK32 or VK_FORMAT_A8B8G8R8_SRGB_PACK32 as I understand it.\n\nYou\u0027re right. But I meant the fourcc code. \nIf we use GL_BGRA8_EXT internal format to generate config sets and remove the overwriting part from https://chromium-review.googlesource.com/c/angle/angle/+/3596045/44/src/libANGLE/renderer/vulkan/linux/gbm/DisplayVkGbm.cpp#81, the problem will be occurred because the current \u0027GLInternalFormatToGbmFourCCFormat()\u0027 returns GBM_FORMAT_ARGB8888(\u0027AR24\u0027), which has different fourcc code from GBM_FORMAT_XRGB8888(\u0027XR24\u0027). \nThe configs\u0027s visual id will be set as ARGB8888. And also Weston fails to find matched config set at the first time with default fourcc code, XRGB8888. \n### weston-8.0.0/libweston/renderer-gl/egl-glue.c +260\n``` c\nstatic bool\negl_config_pixel_format_matches(struct gl_renderer *gr,\nÂ»   Â»   Â»   Â»   EGLConfig config,\nÂ»   Â»   Â»   Â»   const struct pixel_format_info *pinfo)\n{\nÂ»   static const EGLint attribs[4] \u003d {\nÂ»   Â»   EGL_ALPHA_SIZE, EGL_RED_SIZE, EGL_GREEN_SIZE, EGL_BLUE_SIZE\nÂ»   };\nÂ»   const int *argb[4] \u003d {\nÂ»   Â»   \u0026pinfo-\u003ebits.a, \u0026pinfo-\u003ebits.r, \u0026pinfo-\u003ebits.g, \u0026pinfo-\u003ebits.b\nÂ»   };\nÂ»   unsigned i;\nÂ»   EGLint value;\n\nÂ»   if (gr-\u003eplatform \u003d\u003d EGL_PLATFORM_GBM_KHR) {\nÂ»   Â»   if (!eglGetConfigAttrib(gr-\u003eegl_display, config,\nÂ»   Â»   Â»   Â»   Â»   EGL_NATIVE_VISUAL_ID, \u0026value))\nÂ»   Â»   Â»   return false;\n\nÂ»   Â»   return ((uint32_t)value) \u003d\u003d pinfo-\u003eformat;\nÂ»   }\n\nÂ»   for (i \u003d 0; i \u003c 4; i++) {\nÂ»   Â»   if (!eglGetConfigAttrib(gr-\u003eegl_display, config,\nÂ»   Â»   Â»   Â»   Â»   attribs[i], \u0026value))\nÂ»   Â»   Â»   return false;\nÂ»   Â»   if (value !\u003d *argb[i])\nÂ»   Â»   Â»   return false;\nÂ»   }\n\nÂ»   return true;\n}\n```",
      "parentUuid": "059f5c82_c2d96ebd",
      "revId": "206785d13a7201f5694d1c1c375d1e93155a1a12",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}