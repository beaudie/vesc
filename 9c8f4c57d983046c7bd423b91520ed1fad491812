{
  "comments": [
    {
      "key": {
        "uuid": "27b376bf_9d5573bc",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4618,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-06-10T21:51:18Z",
      "side": 1,
      "message": "need some feedback here",
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32091473_f9768eb8",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4618,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-06-11T19:01:32Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "27b376bf_9d5573bc",
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f8aef5c_1ce71813",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4620,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-06-10T22:29:47Z",
      "side": 1,
      "message": "if i replace all of this with -\n\n    renderer-\u003ecollectGarbage(std::move(mUse), std::move(garbage));\n\n    // Ensure the resource use is always valid.\n    mUse.init();\n\ntests work fine but im not convinced that is the right thing to do, help appreciated",
      "range": {
        "startLine": 4616,
        "startChar": 8,
        "endLine": 4620,
        "endChar": 83
      },
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f125752b_3c2c997b",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4620,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-11T16:16:46Z",
      "side": 1,
      "message": "My bad, I forgot about the particularities of GC.\n\nCan you make a helper function collectReadViewsAsGarbage that can be used in both releaseReadViews and release? We should only call collectGarbage once per release call.",
      "parentUuid": "8f8aef5c_1ce71813",
      "range": {
        "startLine": 4616,
        "startChar": 8,
        "endLine": 4620,
        "endChar": 83
      },
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85f12d06_34c5d78e",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4620,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-06-11T18:14:46Z",
      "side": 1,
      "message": "given this call can happen multiple times before release() is called, i did it a little differently. take a look and let me know what you think",
      "parentUuid": "f125752b_3c2c997b",
      "range": {
        "startLine": 4616,
        "startChar": 8,
        "endLine": 4620,
        "endChar": 83
      },
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9c26f577_d4e369e1",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4620,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-11T18:29:06Z",
      "side": 1,
      "message": "Using a member variable isn\u0027t ideal because it adds permanent state overhead.",
      "parentUuid": "85f12d06_34c5d78e",
      "range": {
        "startLine": 4616,
        "startChar": 8,
        "endLine": 4620,
        "endChar": 83
      },
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c0149137_ec004e72",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4620,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-06-11T19:01:32Z",
      "side": 1,
      "message": "the reason i did it this way is because realeaseReadViews() can be called multiple times before a release() call is made. If we just have a helper function to collect current garbage how are we going to keep track of readImageViews other than the current ones?",
      "parentUuid": "9c26f577_d4e369e1",
      "range": {
        "startLine": 4616,
        "startChar": 8,
        "endLine": 4620,
        "endChar": 83
      },
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b33f59ab_8a6e9de6",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 5
      },
      "lineNbr": 4620,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-11T19:09:44Z",
      "side": 1,
      "message": "I don\u0027t quite follow, I think there may be a misunderstanding. It\u0027s fine if releaseReadViews gets called multiple times. When I suggested \"We should only call collectGarbage once per release call.\" I meant once per call to a release *or* releaseReadViews API: e.g. don\u0027t call collectGarbage twice internally when calling release(). It\u0027s fine if the caller calls releaseReadViews twice and gets two sets of garbage. They must have recreated the image views at some point anyway.",
      "parentUuid": "c0149137_ec004e72",
      "range": {
        "startLine": 4616,
        "startChar": 8,
        "endLine": 4620,
        "endChar": 83
      },
      "revId": "9c8f4c57d983046c7bd423b91520ed1fad491812",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}