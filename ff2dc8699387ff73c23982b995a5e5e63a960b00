{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "eeabea85_8585b835",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1528827
      },
      "writtenOn": "2022-05-03T15:45:34Z",
      "side": 1,
      "message": "Unfortunately I can not use GL formats with X as they have no mapping with any Vk format.",
      "revId": "ff2dc8699387ff73c23982b995a5e5e63a960b00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "280c6597_6326fb73",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-05-03T16:01:00Z",
      "side": 1,
      "message": "So RGBA for RGBX won\u0027t really work. ANGLE (Vulkan) goes to great lengths to make sure the A channel always return 1.0, and is never clobbered. Replacing it with RGBA can cause havoc, including making the DRM image look transparent, or with blending etc.\n\nWe added ANGLE_rgbx_internal_format.txt to make GL_RGBX8_ANGLE an official format. I think it\u0027s only supported by the Vulkan backend, was the problem GL? We can also add another extension for GL_BGRX8_ANGLEX if necessary.\n\nFYI, we used RGB8 before because on Vulkan it implicitly always became RGBX8 under the hood (but that\u0027s no longer true on ARM).",
      "parentUuid": "eeabea85_8585b835",
      "revId": "ff2dc8699387ff73c23982b995a5e5e63a960b00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fefecea0_e283c2f2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1528827
      },
      "writtenOn": "2022-05-05T13:30:18Z",
      "side": 1,
      "message": "Thanks for the explanation. The issue I encounter is that I can\u0027t import a DRM_FORMAT_XBGR8888 using a VK_FORMAT_R8G8B8_UNORM.\n\nI can add a mapping in `vk_format_map.json` such as:\n\n```\n  \"R8G8B8X8_UNORM\": \"VK_FORMAT_R8G8B8A8_UNORM\",\n  \"B8G8R8X8_UNORM\": \"VK_FORMAT_B8G8R8A8_UNORM\",\n```\n\nHaving care to only include this in `GetVkFormatFromFormatID(..)` while excluding it from `GetFormatIDFromVkFormat()` or we would end up with duplicate case value here.\n\n```\n  case VK_FORMAT_R8G8B8A8_UNORM:\n   return angle::FormatID::R8G8B8A8_UNORM;\n  case VK_FORMAT_R8G8B8A8_UNORM:\n   return angle::FormatID::R8G8B8X8_UNORM;\n```",
      "parentUuid": "280c6597_6326fb73",
      "revId": "ff2dc8699387ff73c23982b995a5e5e63a960b00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "001b478a_03d298e1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1528827
      },
      "writtenOn": "2022-05-05T14:34:53Z",
      "side": 1,
      "message": "I updated the CL implementing this idea. Let me know what you think.",
      "parentUuid": "fefecea0_e283c2f2",
      "revId": "ff2dc8699387ff73c23982b995a5e5e63a960b00",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}