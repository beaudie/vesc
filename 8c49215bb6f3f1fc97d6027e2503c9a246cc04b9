{
  "comments": [
    {
      "key": {
        "uuid": "f6e94314_97f1d840",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-09-10T19:20:55Z",
      "side": 1,
      "message": "The occlusion query test failure is due to QC driver bug https://issuetracker.google.com/166809097. The test is doing this sequence: glClear; draw; glFlush; glClear; draw; With this change, the second glClear call becomes vkClearAtatchment call which we know QC has a driver bug. To make test coverage unchange, I have changed glFlush to glFinish.",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "905699b4_8679c742",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-09-10T19:28:40Z",
      "side": 1,
      "message": "Nice, re-lgtm.",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3e04ddbc_86693999",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-09-11T17:28:30Z",
      "side": 1,
      "message": "LGTM.   I\u0027ll let Shabi give the official +2.",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b25de8f_06f6d92b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-11T19:38:54Z",
      "side": 1,
      "message": "Looking good! Please add a VulkanPerformanceCountersTest test to ensure we don\u0027t regress this later.",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "562a3322_2d2ddcfb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-09-14T16:41:26Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "1b25de8f_06f6d92b",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6005ed5_31a8b8d7",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 11
      },
      "lineNbr": 978,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-09-11T17:28:30Z",
      "side": 1,
      "message": "This can be removed now too.",
      "range": {
        "startLine": 978,
        "startChar": 41,
        "endLine": 978,
        "endChar": 62
      },
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c6065a5_967049a5",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 11
      },
      "lineNbr": 978,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-09-14T16:41:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d6005ed5_31a8b8d7",
      "range": {
        "startLine": 978,
        "startChar": 41,
        "endLine": 978,
        "endChar": 62
      },
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff3f7614_fe9f5427",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 11
      },
      "lineNbr": 1082,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-09-11T17:28:30Z",
      "side": 1,
      "message": "Can you add a comment here (or in ContextVk::flush()) explaining why sync objects need to be treated differently and force flushes?",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f358692_14d77d7b",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 11
      },
      "lineNbr": 1082,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-09-14T16:41:26Z",
      "side": 1,
      "message": "Done. Added in the ContextVk::flush().",
      "parentUuid": "ff3f7614_fe9f5427",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9e38375_3816eea4",
        "filename": "src/tests/gl_tests/OcclusionQueriesTest.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-11T19:38:54Z",
      "side": 1,
      "message": "I would do something different. The test wants to ensure that flush doesn\u0027t screw things up, and since this is optimizing flush, it\u0027s actually good to leave that be!\n\nInstead, of changing to glFinish(), how about skipping the test on Android? You can mark it with the same bug, and when I finally get around to landing this [1], we can enable it.\n\nBy the way, that change has a failure in OcclusionQueriesTest.ClearNotCounted which makes me think the root cause of the failure here is not the same as what [1] fixes, but rather some other bugs both of these CLs are independently exposing.\n\n[1]: https://chromium-review.googlesource.com/c/angle/angle/+/2382416",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8358ad5_e61eabd7",
        "filename": "src/tests/gl_tests/OcclusionQueriesTest.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-09-11T20:05:24Z",
      "side": 1,
      "message": "I think the test wants to ensure the submission between beginQuery/endQuery does not screw up occlusion query. That is why it is adding a flush call there. With flush nopped, I dont think there is any value to leave flush there. But covering that specific test scenario is still useful. That is why change to finish  is better here so that we don\u0027t lose the intended coverage.",
      "parentUuid": "a9e38375_3816eea4",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddab8549_7a4810a8",
        "filename": "src/tests/gl_tests/OcclusionQueriesTest.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-11T20:27:33Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f8358ad5_e61eabd7",
      "revId": "8c49215bb6f3f1fc97d6027e2503c9a246cc04b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}