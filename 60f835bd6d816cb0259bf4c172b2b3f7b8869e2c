{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "000323a7_9513433f",
        "filename": "src/libANGLE/renderer/wgpu/FramebufferWgpu.cpp",
        "patchSetId": 4
      },
      "lineNbr": 149,
      "author": {
        "id": 1228424
      },
      "writtenOn": "2024-05-23T23:22:36Z",
      "side": 1,
      "message": "I\u0027m not sure this block of code can ever run?\n\nWe only ever set any values in `mDeferredClears` in the `store()` above where we know `isActiveRenderPass` is false. But then we immediately end up in the else block on line 169 (because `mDeferredClears.any()` is true and we know `isActiveRenderPass` is false), which unconditionally clears `mDeferredClears` and then returns, so we can never exit the function with anything set in `mDeferredClears`. So any time we enter this function we can\u0027t have `mDeferredClears.any()` be true at the same time as `isActiveRenderPass`, or did I get this all wrong?",
      "range": {
        "startLine": 149,
        "startChar": 8,
        "endLine": 149,
        "endChar": 31
      },
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac4918c2_a7a41fbb",
        "filename": "src/libANGLE/renderer/wgpu/FramebufferWgpu.cpp",
        "patchSetId": 4
      },
      "lineNbr": 149,
      "author": {
        "id": 1516597
      },
      "writtenOn": "2024-05-29T15:58:58Z",
      "side": 1,
      "message": "Ah! That is because I forgot to add deferring clears when we sync the state as well. When `FramebufferVK::SyncState` is called, any clears that were staged in the ImageHelper should be deferred if the binding op is `GL_DRAW_FRAMEBUFFER`.\n\nSo, there is in fact a case where we reach this specific block of code, because the ImageHelper might re-defer clears in certain cases.\n\nI added this logic now so syncState may further defer clear calls, and flushStagedUpdates() in ImageHelper will defer any staged calls if necessary.",
      "parentUuid": "000323a7_9513433f",
      "range": {
        "startLine": 149,
        "startChar": 8,
        "endLine": 149,
        "endChar": 31
      },
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c482cd51_f6c213e9",
        "filename": "src/libANGLE/renderer/wgpu/FramebufferWgpu.cpp",
        "patchSetId": 4
      },
      "lineNbr": 193,
      "author": {
        "id": 1228424
      },
      "writtenOn": "2024-05-23T23:22:36Z",
      "side": 1,
      "message": "Remove comment I think?",
      "range": {
        "startLine": 193,
        "startChar": 5,
        "endLine": 193,
        "endChar": 61
      },
      "fixSuggestions": [
        {
          "fixId": "01691adf_f94a6b74",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "src/libANGLE/renderer/wgpu/FramebufferWgpu.cpp",
              "range": {
                "startLine": 193,
                "startChar": 0,
                "endLine": 194,
                "endChar": 0
              },
              "replacement": ""
            }
          ]
        }
      ],
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "198a9a0d_aadc4f66",
        "filename": "src/libANGLE/renderer/wgpu/FramebufferWgpu.cpp",
        "patchSetId": 4
      },
      "lineNbr": 193,
      "author": {
        "id": 1516597
      },
      "writtenOn": "2024-05-29T15:58:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c482cd51_f6c213e9",
      "range": {
        "startLine": 193,
        "startChar": 5,
        "endLine": 193,
        "endChar": 61
      },
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bcfb2e1_339441d0",
        "filename": "src/libANGLE/renderer/wgpu/TextureWgpu.cpp",
        "patchSetId": 4
      },
      "lineNbr": 319,
      "author": {
        "id": 1228424
      },
      "writtenOn": "2024-05-23T23:22:36Z",
      "side": 1,
      "message": "Should this comment be changed/removed?",
      "range": {
        "startLine": 319,
        "startChar": 5,
        "endLine": 319,
        "endChar": 6
      },
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d8530ed_f5fecfae",
        "filename": "src/libANGLE/renderer/wgpu/TextureWgpu.cpp",
        "patchSetId": 4
      },
      "lineNbr": 319,
      "author": {
        "id": 1516597
      },
      "writtenOn": "2024-05-29T15:58:58Z",
      "side": 1,
      "message": "Yep, as should the call to flushStagedUpdates",
      "parentUuid": "3bcfb2e1_339441d0",
      "range": {
        "startLine": 319,
        "startChar": 5,
        "endLine": 319,
        "endChar": 6
      },
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "141a3115_a4a4a17b",
        "filename": "src/libANGLE/renderer/wgpu/wgpu_helpers.cpp",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1228424
      },
      "writtenOn": "2024-05-23T23:22:36Z",
      "side": 1,
      "message": "Can we make this a switch, especially if planning on added more enums? Or ASSERT this is UpdateSource::Clear",
      "range": {
        "startLine": 63,
        "startChar": 8,
        "endLine": 63,
        "endChar": 12
      },
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c4c82a56_35806c9c",
        "filename": "src/libANGLE/renderer/wgpu/wgpu_helpers.cpp",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1516597
      },
      "writtenOn": "2024-05-29T15:58:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "141a3115_a4a4a17b",
      "range": {
        "startLine": 63,
        "startChar": 8,
        "endLine": 63,
        "endChar": 12
      },
      "revId": "60f835bd6d816cb0259bf4c172b2b3f7b8869e2c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}