{
  "comments": [
    {
      "key": {
        "uuid": "6a5be07f_3a83afba",
        "filename": "src/compiler/translator/TranslatorVulkan.cpp",
        "patchSetId": 16
      },
      "lineNbr": 393,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-05T17:54:02Z",
      "side": 1,
      "message": "could you split out this refactor into its own CL? Feels like it\u0027s a bit risky since it interacts with dirty bits. and logically separable.",
      "range": {
        "startLine": 393,
        "startChar": 17,
        "endLine": 393,
        "endChar": 49
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b41409d_96d5ebe3",
        "filename": "src/compiler/translator/TranslatorVulkan.cpp",
        "patchSetId": 16
      },
      "lineNbr": 393,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-05T17:54:21Z",
      "side": 1,
      "message": "(If this is a pain, than you can forego the split)",
      "parentUuid": "6a5be07f_3a83afba",
      "range": {
        "startLine": 393,
        "startChar": 17,
        "endLine": 393,
        "endChar": 49
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7b679ee_50844c76",
        "filename": "src/compiler/translator/TranslatorVulkan.cpp",
        "patchSetId": 16
      },
      "lineNbr": 393,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-08-06T02:53:38Z",
      "side": 1,
      "message": "Gave it a shot, but it quickly became very contrived (since without this change, there\u0027s nothing to go in the compute uniforms). I thought about just including the rename of DriverUniforms to GraphicsDriverUniforms, but that wouldn\u0027t capture the \"riskiness\".\n\nFYI, the graphics path is (refactoring aside) unchanged.",
      "parentUuid": "2b41409d_96d5ebe3",
      "range": {
        "startLine": 393,
        "startChar": 17,
        "endLine": 393,
        "endChar": 49
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31f254e6_f2be819c",
        "filename": "src/compiler/translator/TranslatorVulkan.cpp",
        "patchSetId": 16
      },
      "lineNbr": 689,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-05T17:54:02Z",
      "side": 1,
      "message": "we should probably remove luc from the TODO since he\u0027s no longer on the team. Maybe just change this to a note instead of a TODO as we don\u0027t have an issue filed for it. And it\u0027s not that big of a deal.",
      "range": {
        "startLine": 689,
        "startChar": 4,
        "endLine": 689,
        "endChar": 75
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e17491d2_9bbf17ee",
        "filename": "src/compiler/translator/TranslatorVulkan.cpp",
        "patchSetId": 16
      },
      "lineNbr": 689,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-08-06T02:53:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "31f254e6_f2be819c",
      "range": {
        "startLine": 689,
        "startChar": 4,
        "endLine": 689,
        "endChar": 75
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c41e1d4e_ccd6eb8c",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 16
      },
      "lineNbr": 74,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-05T17:54:02Z",
      "side": 1,
      "message": "can you try please using a std::array of uint8_t and using static_assert to verify the packing size? Also please try to use a constant in the array size.",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 45
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e447c71_1af2af8f",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 16
      },
      "lineNbr": 74,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-08-06T02:53:38Z",
      "side": 1,
      "message": "I\u0027d rather not. This will support little- and big-endian as is. Aliasing the `uint`s as expected by the shader with `uint8_t` would just limit the code to little-endian. We don\u0027t have a big-endian target at the moment, but I\u0027d rather not leave a hidden bug for future!\n\nNot sure how a constant helps, `kChannelsInVec4` and `4` are equally magic numbers.",
      "parentUuid": "c41e1d4e_ccd6eb8c",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 45
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8f036c6_b072bbb2",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 16
      },
      "lineNbr": 74,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-06T13:08:07Z",
      "side": 1,
      "message": "Alright. Couldn\u0027t you use IMPLEMENTATION_MAX_ATOMIC_COUNTER_BUFFERS / sizeof(uint32_t)? And wouldn\u0027t you only need two uints instead of 4?",
      "parentUuid": "8e447c71_1af2af8f",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 45
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66a26988_de04bac5",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 16
      },
      "lineNbr": 74,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-08-06T16:28:03Z",
      "side": 1,
      "message": "This mirrors the translator\u0027s definition which uses a `uvec4`. It\u0027s analogous to the same vector in the graphics driver uniforms which is a `uvec4` to avoid padding.\n\nI could turn this into:\n\n    constexpr size_t kAcbBufferOffsetsSize \u003d IMPLEMENTATION_MAX_ATOMIC_COUNTER_BUFFERS / sizeof(uint32_t);\n\n    std::array\u003cuint32_t, kAcbBufferOffsetsSize\u003e acbBufferOffsets;\n    std::array\u003cuint32_t, 4 - kAcbBufferOffsetsSize\u003e padding;\n\nThat\u0027s ok with me. Would you prefer that?",
      "parentUuid": "e8f036c6_b072bbb2",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 45
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97258dc0_8c6f0d66",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 16
      },
      "lineNbr": 285,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-05T17:54:02Z",
      "side": 1,
      "message": "cute, I like it.",
      "range": {
        "startLine": 284,
        "startChar": 0,
        "endLine": 285,
        "endChar": 53
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c482aba_f97b58f8",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 16
      },
      "lineNbr": 285,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-08-06T02:53:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "97258dc0_8c6f0d66",
      "range": {
        "startLine": 284,
        "startChar": 0,
        "endLine": 285,
        "endChar": 53
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ccc592ae_0256d8d0",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 16
      },
      "lineNbr": 346,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-05T17:54:02Z",
      "side": 1,
      "message": "can you move this to vk_utils.h? We could also consider making this part of the front-end types.",
      "range": {
        "startLine": 339,
        "startChar": 0,
        "endLine": 346,
        "endChar": 6
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "547b1a42_21a8b3ac",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 16
      },
      "lineNbr": 346,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-08-06T02:53:38Z",
      "side": 1,
      "message": "Done. Kept it in vk_utils.h to avoid polluting that namespace. We can always move it if other backends ever need it.",
      "parentUuid": "ccc592ae_0256d8d0",
      "range": {
        "startLine": 339,
        "startChar": 0,
        "endLine": 346,
        "endChar": 6
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9cf972e0_f7f0f746",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 16
      },
      "lineNbr": 548,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-05T17:54:02Z",
      "side": 1,
      "message": "nit: define data after member functions. also the type should be first.\n\nhttps://google.github.io/styleguide/cppguide.html#Declaration_Order",
      "range": {
        "startLine": 534,
        "startChar": 0,
        "endLine": 548,
        "endChar": 0
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16bda220_be5de3d8",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 16
      },
      "lineNbr": 548,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-08-06T02:53:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9cf972e0_f7f0f746",
      "range": {
        "startLine": 534,
        "startChar": 0,
        "endLine": 548,
        "endChar": 0
      },
      "revId": "8f139d70b49bcf4165c0a5ce04919b8c806022c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}