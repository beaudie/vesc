{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "efa83d2a_3c0f976a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-09-15T21:48:16Z",
      "side": 1,
      "message": "+Amirali, there\u0027s overlap with imageless here regarding garbage collection of uncached framebuffer. Since you are doing the same thing, could you please verify that your implementations touch the same code the same way?",
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d8123738_03ed5745",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:00:13Z",
      "side": 1,
      "message": "Looking better, and thanks for the extra tests!",
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1153933c_590b1a1b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2022-09-15T22:46:48Z",
      "side": 1,
      "message": "As of the latest draft, I use `releaseCurrentFramebuffer()` in the same places as this CL, but also in two other places: Before `removeColorResolveAttachment()` in `resolveColorWithSubpass()`, and before `updateColorResolveAttachment()` in `optimizeRenderPassForPresent()` (ContextVk.cpp). Not sure if the former is necessary, as it is not used before `removeColorResolveAttachment()` in `optimizeRenderPassForPresent()`.",
      "parentUuid": "efa83d2a_3c0f976a",
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce4473c2_71685e47",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 320,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-09-15T21:48:16Z",
      "side": 1,
      "message": "nit: false, as there\u0027s no framebuffer",
      "range": {
        "startLine": 320,
        "startChar": 34,
        "endLine": 320,
        "endChar": 38
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "058b40db_8ecfef8e",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 320,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2022-09-15T22:53:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ce4473c2_71685e47",
      "range": {
        "startLine": 320,
        "startChar": 34,
        "endLine": 320,
        "endChar": 38
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89cda764_d2803d83",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1464,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:00:13Z",
      "side": 1,
      "message": "This line is newly added, why is this needed? Is this try to fix any existing bug that your test exposed?",
      "range": {
        "startLine": 1464,
        "startChar": 4,
        "endLine": 1464,
        "endChar": 32
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18f221a4_34ab10f8",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1464,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2022-09-15T22:12:58Z",
      "side": 1,
      "message": "Because inside `updateColorResolveAttachment()`, we previously released the mCurrentFramebuffer: https://source.chromium.org/chromium/chromium/src/+/main:third_party/angle/src/libANGLE/renderer/vulkan/FramebufferVk.cpp;l\u003d1381. If I replace that line with `invalidateCurrentFramebuffer()`, it would require us to pass in one more parameter `contextVk`. So I took that line out and replace it with `invalidateCurrentFramebuffer()` before the call to `updateColorResolveAttachment()`.",
      "parentUuid": "89cda764_d2803d83",
      "range": {
        "startLine": 1464,
        "startChar": 4,
        "endLine": 1464,
        "endChar": 32
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d52b6862_654075ac",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1464,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:22:23Z",
      "side": 1,
      "message": "I see. Your change also looks good to me.",
      "parentUuid": "18f221a4_34ab10f8",
      "range": {
        "startLine": 1464,
        "startChar": 4,
        "endLine": 1464,
        "endChar": 32
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ddb191e_59751d3b",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1934,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:00:13Z",
      "side": 1,
      "message": "why not just call inValidateCurrentFramebuffer(contextVk) so you dont need shouldInvalidateFramebuffer?",
      "range": {
        "startLine": 1934,
        "startChar": 16,
        "endLine": 1934,
        "endChar": 43
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05ef913a_0ddea482",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1934,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2022-09-15T22:12:58Z",
      "side": 1,
      "message": "I thought it would help us call `inValidateCurrentFramebuffer()` fewer times. But since that function is not that expensive, it might not be necessary to add an extra flag just to reduce the number of that function call.",
      "parentUuid": "7ddb191e_59751d3b",
      "range": {
        "startLine": 1934,
        "startChar": 16,
        "endLine": 1934,
        "endChar": 43
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6234f67c_f7b3313f",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1934,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:22:23Z",
      "side": 1,
      "message": "I see. You try to optimize when both WIDTH/HEIGHT dirty bits are set. I think your change looks good to me.",
      "parentUuid": "05ef913a_0ddea482",
      "range": {
        "startLine": 1934,
        "startChar": 16,
        "endLine": 1934,
        "endChar": 43
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "206d1f27_060172ac",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 2141,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:00:13Z",
      "side": 1,
      "message": "I don\u0027t think you need a check here. You can do an assertion at line 2145 that \nAssert(mCurrentFramebufferDesc.attachmentCount() \u003e 0);\n\nsince fbo with no attachment should never have cache hit/",
      "range": {
        "startLine": 2141,
        "startChar": 8,
        "endLine": 2141,
        "endChar": 56
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "85e12a63_3ebbb4c6",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 2141,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2022-09-15T22:12:58Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "206d1f27_060172ac",
      "range": {
        "startLine": 2141,
        "startChar": 8,
        "endLine": 2141,
        "endChar": 56
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cce70eb_f709a083",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 2255,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:00:13Z",
      "side": 1,
      "message": "This actually do a loop. It is cheaper just use attachments.size().",
      "range": {
        "startLine": 2255,
        "startChar": 8,
        "endLine": 2255,
        "endChar": 49
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4cdd8800_b3f5f669",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.cpp",
        "patchSetId": 8
      },
      "lineNbr": 2255,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2022-09-15T22:53:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1cce70eb_f709a083",
      "range": {
        "startLine": 2255,
        "startChar": 8,
        "endLine": 2255,
        "endChar": 49
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "460ea2ec_65cecbb0",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.h",
        "patchSetId": 8
      },
      "lineNbr": 146,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-09-15T21:48:16Z",
      "side": 1,
      "message": "Funny how Amirali also arrived at this same name! Please call it `releaseCurrentFramebuffer`",
      "range": {
        "startLine": 146,
        "startChar": 9,
        "endLine": 146,
        "endChar": 37
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "729ce22c_47314e2a",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.h",
        "patchSetId": 8
      },
      "lineNbr": 146,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-09-15T22:00:13Z",
      "side": 1,
      "message": "That is because I told Yuxin to use the same name as amirali\u0027s CL to avoid the merge conflict. But I like releaseCurrentFramebuffer better.",
      "parentUuid": "460ea2ec_65cecbb0",
      "range": {
        "startLine": 146,
        "startChar": 9,
        "endLine": 146,
        "endChar": 37
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ca84d305_0d937b10",
        "filename": "src/libANGLE/renderer/vulkan/FramebufferVk.h",
        "patchSetId": 8
      },
      "lineNbr": 146,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2022-09-15T22:53:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "729ce22c_47314e2a",
      "range": {
        "startLine": 146,
        "startChar": 9,
        "endLine": 146,
        "endChar": 37
      },
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20fcc9d0_ccafa693",
        "filename": "src/tests/deqp_support/deqp_gles31_test_expectations.txt",
        "patchSetId": 8
      },
      "lineNbr": 206,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-09-15T21:48:16Z",
      "side": 1,
      "message": "nit: Remove comment too",
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df3319ea_ad2dd9b4",
        "filename": "src/tests/deqp_support/deqp_gles31_test_expectations.txt",
        "patchSetId": 8
      },
      "lineNbr": 206,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2022-09-15T22:53:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "20fcc9d0_ccafa693",
      "revId": "f1d2729f8aa5cca72fb6b44c6c0352505ed9102f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}