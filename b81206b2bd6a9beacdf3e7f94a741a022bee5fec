{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "452bf0d0_bd900945",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-12-16T16:34:14Z",
      "side": 1,
      "message": "PTAL.. I\u0027m not sure what extra value this provides, but we could consider running it. It wouldn\u0027t catch the issue I was running into with the retrace because that would only happen after Reset.",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "65e70198_1a7552ac",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2021-12-16T22:34:37Z",
      "side": 1,
      "message": "Couple of questions:\n1. Seems like angle_native_trace_tests also runs non-trace perftests, so I think we should remove angle_perftests suite where they run?\n2. Why is this so slow on Android? But, at the same time, why is it so much faster than angle_perftests? Does dividing into 20 shards makes the suite to run 4 times slower than 4 shards?",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4779d82a_86d3bc66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-12-29T15:43:38Z",
      "side": 1,
      "message": "1. it does not ATM\n2. the relative speed difference is just because this new test config runs way fewer tests\n\nhowever I\u0027m not sure this provides the necessary test coverage we need because the prior regression only happened after a full iteration with the Reset() call. it probably doesn\u0027t hurt (and may help slightly) to land these tests, but we\u0027ll have to think harder about how to test Reset() functionality.",
      "parentUuid": "65e70198_1a7552ac",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0e98cf30_5a3e75c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-12-29T16:08:39Z",
      "side": 1,
      "message": "Running these traces just to catch general errors on native would be good to have.\n\nOne thing I\u0027ve noticed when creating new traces is the first frame after Reset() will have artifacts, usually shadow related, but they are cleared up quickly in the next few frames.  Comparing the first frame overall with the frame after Reset() would be a good test.  Or maybe serialize state right after Setup(), then again right after Reset().\n\nWe know we have gaps in Reset(), so it probably won\u0027t be clean right away, but it can help guide development of Reset(), much like retracing has helped improve MEC.",
      "parentUuid": "4779d82a_86d3bc66",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc13962c_bed9d8a1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2021-12-29T20:52:18Z",
      "side": 1,
      "message": "1. If it doesn\u0027t, why do I see for example BindingsBenchmark.Run/gles_null_100_objects_allocated_at_initialization both in https://chromium-swarm.appspot.com/task?id\u003d57dcb4f651edf510 and in https://chromium-swarm.appspot.com/task?id\u003d57dcb50666c4e210?\n2. Looks like angle_native_trace_tests runs 4*118\u003d472 tests and angle_perftests runs 20*24\u003d480 tests, so doesn\u0027t look like a significant difference to me. But in the meanwhile, I\u0027ve figured an answer to this question by myself in the context of crbug.com/1279512. Copying 6GB test APK to the phone takes ~10 minutes. So with 20 shards we waste ~10*20 minutes out of the total 236 minutes just for the copy. And with 4 shards we only waste 40 out of 78 minutes. In both cases it takes 36-38 minutes for the actual test run. Looks like 4 shards is a much more efficient way.",
      "parentUuid": "0e98cf30_5a3e75c7",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "267f445b_719223e8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-12-29T21:59:02Z",
      "side": 1,
      "message": "\u003e Copying 6GB\nFor trace data, this should only happen when testing on a clean device.  The host python scripts are smart enough to only push changed or new files.  Do the shards start from scratch each time?",
      "parentUuid": "cc13962c_bed9d8a1",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3415d9bd_7f2c2f8b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2021-12-29T22:35:06Z",
      "side": 1,
      "message": "I think this might be because all our tests share com.android.angle.test package and com.android.angle.test.AngleUnitTestActivity activity? So different tests override each other data?\nIt\u0027s also possible that the devices are being cleaned up periodically (or after test suite end, or before installing a new test suite), so that they have space to install a new APK.\nIf you look at the 20 shards of angle_perftests in https://ci.chromium.org/ui/p/angle/builders/ci/android-arm64-test/473/overview, they all have lines like:\nPushing 2873 files via .zip of size 5378873891\nThe sizes differ a bit, but it\u0027s always 2873 files.",
      "parentUuid": "267f445b_719223e8",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75d239b6_ce2bc9d7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-12-30T14:07:41Z",
      "side": 1,
      "message": "The real fix for the \"push everything\" problem is to replace the Chromium Android test runner (or upgrade it) so that we can use one that only pushes one batch of traces at a time.\n\nNow that the code generation is gone and we\u0027re reading all the trace info in via JSON, it shouldn\u0027t be too hard to fix. It\u0027ll require some Android expertise and some time to figure out if we should rewrite the whole thing if there\u0027s some way we can extend the script to handle this kind of \"lazy\" upload.\n\nCody can we upload and read trace data outside the APK? Anyway we should probably figure out the design outside of this code review because it\u0027ll just get lost.",
      "parentUuid": "3415d9bd_7f2c2f8b",
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e2bc079_c257634c",
        "filename": "infra/specs/angle.json",
        "patchSetId": 2
      },
      "lineNbr": 489,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-12-29T16:08:39Z",
      "side": 1,
      "message": "I believe this would be the first time we\u0027ve had any testing of offscreen (native or vulkan).  We haven\u0027t really spent a lot of time ensuring those results are high quality.\n\nI don\u0027t know that running vsync would add much additional coverage.  We do want to enhance it at some point, to add more refresh rates.  It would be good to test those, but that\u0027s more about testing the harness itself, ensuring we are rendering at the expected rate.",
      "range": {
        "startLine": 489,
        "startChar": 37,
        "endLine": 489,
        "endChar": 69
      },
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6885b9f1_fdcbb922",
        "filename": "infra/specs/angle.json",
        "patchSetId": 2
      },
      "lineNbr": 489,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-12-29T17:00:02Z",
      "side": 1,
      "message": "The \"-\" here actually excludes these tests from the test set. I had to add it to prevent the offscreen \u0026 vsync tests from showing up.\n\nNote you\u0027re commenting on the autogenerated JSON - the pattern is defined in test_suites.pyl so it would be better to comment there.",
      "parentUuid": "5e2bc079_c257634c",
      "range": {
        "startLine": 489,
        "startChar": 37,
        "endLine": 489,
        "endChar": 69
      },
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "243ca93d_4fbdd141",
        "filename": "infra/specs/angle.json",
        "patchSetId": 2
      },
      "lineNbr": 489,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-12-29T21:59:02Z",
      "side": 1,
      "message": "Ack - my bad, didn\u0027t see the negative.",
      "parentUuid": "6885b9f1_fdcbb922",
      "range": {
        "startLine": 489,
        "startChar": 37,
        "endLine": 489,
        "endChar": 69
      },
      "revId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Owners",
        "description": {
          "value": "User with the code owner override approved the change"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "has:enabled_code-owners"
          }
        },
        "submittabilityExpression": {
          "expressionString": "has:approval_code-owners"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Owners-Override\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:enabled_code-owners"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["has:enabled_code-owners"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:approval_code-owners"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["has:approval_code-owners"],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Owners-Override=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Owners-Override=+1"]}
      },
      "patchSetCommitId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "Submit requirement for the \u0027Code-Review\u0027 label"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Code-Review=MAX,user=non_uploader","label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforced_gerrit"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "Submit requirement for the \u0027Verified\u0027 label"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:false"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:true"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:false"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:true"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "b81206b2bd6a9beacdf3e7f94a741a022bee5fec",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}