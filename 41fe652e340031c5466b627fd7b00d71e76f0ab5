{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c7b54973_c5be2cf5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-03-30T14:54:20Z",
      "side": 1,
      "message": "nit: sounds like you\u0027re just doing a refactor. you\u0027re also fixing something - what are you fixing?",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e59adc2_5422ae10",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-03-30T15:07:19Z",
      "side": 1,
      "message": "In TextureVk::syncState we respecify the image on many conditions:\n\n- base/max change\n- usage/create flag change\n- redefined-levels\n- generate mipmap adding levels\n- sampler state adding levels\n- used as attachment (so format needs to be made renderable)\n\nIn TextureVk::getAttachmentRenderTarget, we slowly added some of these as bugs were found:\n\n- base/max change\n- redefined-levels\n- used as attachment (so format needs to be made renderable)\n\nThe bug that prompted this fix was the missing \"usage/create flag change\".\n\nThis change is not just refactoring things, it\u0027s making both codes use the same logic, so anything in TextureVk::syncState that can respecify the image, it could also do so in TextureVk::getAttachmentRenderTarget. Generate mipmap doesn\u0027t make sense, which is naturally ignored by TextureVk::getAttachmentRenderTarget using gl::Command::Draw.",
      "parentUuid": "c7b54973_c5be2cf5",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3cf9fde9_217b887a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-03-30T15:17:37Z",
      "side": 1,
      "message": "Thanks, not sure if you did this already, but please include some of this detail in the commit message.",
      "parentUuid": "8e59adc2_5422ae10",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2958600b_d0c0bf6d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-03-30T16:16:29Z",
      "side": 1,
      "message": "The details are there in the commit message (not itemized like that, but similar contents).",
      "parentUuid": "3cf9fde9_217b887a",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22ae56f2_a4e38a9b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-03-30T17:05:50Z",
      "side": 1,
      "message": "Right, some details are there. What\u0027s missing is a description of what the specific bug is.",
      "parentUuid": "2958600b_d0c0bf6d",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27b2b6d2_7c6092f7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-03-30T17:22:05Z",
      "side": 1,
      "message": "Added.",
      "parentUuid": "22ae56f2_a4e38a9b",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "70c17302_010ae156",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-03-30T14:50:30Z",
      "side": 1,
      "message": "I can\u0027t explain the intel/windows trace. It\u0027s not reproducible on newer driver apparently (from Cody\u0027s testing). I verified locally that the three new reasons for the image respecify (usage flags different, create flags different, image reallocated due to sampler state) are not hit in this trace.\n\nOpen to ideas.",
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d17b2070_993798a4",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2321,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-03-30T14:54:20Z",
      "side": 1,
      "message": "nit: probably don\u0027t use the term \u0027syncState\u0027 and don\u0027t use dirty bits, those are strictly in correlation with the syncState function. Can you pass this information along some other way? +1 to Code-Review conditional on those changes.",
      "range": {
        "startLine": 2321,
        "startChar": 8,
        "endLine": 2321,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6254b657_561fc35b",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2321,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-03-30T15:07:19Z",
      "side": 1,
      "message": "Makes sense, will do soon.",
      "parentUuid": "d17b2070_993798a4",
      "range": {
        "startLine": 2321,
        "startChar": 8,
        "endLine": 2321,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2107e651_b4ab697b",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2321,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-03-30T16:16:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6254b657_561fc35b",
      "range": {
        "startLine": 2321,
        "startChar": 8,
        "endLine": 2321,
        "endChar": 49
      },
      "revId": "41fe652e340031c5466b627fd7b00d71e76f0ab5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}