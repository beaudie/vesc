{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "707f24d2_08e61cf5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2022-09-19T16:36:12Z",
      "side": 1,
      "message": "I\u0027ll defer the final approval to Roman.",
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f97b76fc_5045e1ca",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-09-20T14:38:06Z",
      "side": 1,
      "message": "Could you add some info what we need to match for the build itself? Would copy-pasting \"lookup GN args\" be a good idea?\nAlso host OS vs bot OS. I suppose host has to be Windows for Windows builds, Linux for Linux \u0026 Android, and I don\u0027t know about Mac?",
      "range": {
        "startLine": 17,
        "startChar": 7,
        "endLine": 17,
        "endChar": 47
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bed36343_76c981f4",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-09-22T19:24:01Z",
      "side": 1,
      "message": "Can you explain what you want here? I rewrote this a bit, but fundamentally if you\u0027re on Android, you want an Android build, on Linux, a Linux bot, on Windows, a Windows bot, etc. Can you explain what you don\u0027t quite understand? I don\u0027t want to make it too excessive with unnecessary detail because that makes it harder to read everything.\n\nGN args you can use whatever you have in your local setup. Android is a bit of a special case, but I don\u0027t want to replicate build instructions for Android here. Hopefully the reader knows for Android you have to specify a target OS in your gn args, because that\u0027s described elsewhere in the docs.\n\nAre you confused about how to locate the specific dimensions?",
      "parentUuid": "f97b76fc_5045e1ca",
      "range": {
        "startLine": 17,
        "startChar": 7,
        "endLine": 17,
        "endChar": 47
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04e7aeeb_3583f981",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-09-23T13:11:20Z",
      "side": 1,
      "message": "I\u0027m just confused by the meaning of \"First find a build to model your trigger\". When you say \"model your trigger\", what does that mean? Just the OS or some other things people need to be looking for? If it\u0027s the OS maybe this could say something like \"find a build for your target OS\"",
      "parentUuid": "bed36343_76c981f4",
      "range": {
        "startLine": 17,
        "startChar": 7,
        "endLine": 17,
        "endChar": 47
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d325dc2_f26b1724",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2022-09-19T16:36:12Z",
      "side": 1,
      "message": "A more complicated example, like end2end or perftests would be more useful",
      "range": {
        "startLine": 22,
        "startChar": 75,
        "endLine": 22,
        "endChar": 91
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfef06be_582833b3",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-09-22T19:24:01Z",
      "side": 1,
      "message": "This pattern should work for both of those cases. Added one extra example at the end.",
      "parentUuid": "8d325dc2_f26b1724",
      "range": {
        "startLine": 22,
        "startChar": 75,
        "endLine": 22,
        "endChar": 91
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ff6c36d3_448c2e02",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2022-09-23T10:51:08Z",
      "side": 1,
      "message": "angle_unittests don\u0027t need args. But for end2end you need gtest_filter, for dEQP you need --use-angle, so these are more complicated.\nThe extra example at the end looks good.",
      "parentUuid": "bfef06be_582833b3",
      "range": {
        "startLine": 22,
        "startChar": 75,
        "endLine": 22,
        "endChar": 91
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c6be84c_a89878c4",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-09-20T14:38:06Z",
      "side": 1,
      "message": "I may be missing something, what do you mean by \"get a template\" here? This script does subprocess.call at the end so it would also spawn the task?\n\nBy the way, when I was poking around at this script I actually modified it locally to separate upload to CAS vs invocation (I was looking at flakes so I would the same command multiple times with the same CAS digests). I also added some other arguments that I was experimenting with. If this script printed out the command line instead of subprocess.call\u0027ing it, that would be more convenient for this use case (but possibly less convenient for some other use cases)",
      "range": {
        "startLine": 24,
        "startChar": 7,
        "endLine": 24,
        "endChar": 61
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "133409db_b21e4926",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-09-22T19:24:01Z",
      "side": 1,
      "message": "Updated. The script logs every command to logging.info, so is that sufficient? Or do you want a command that also stops after upload?",
      "parentUuid": "6c6be84c_a89878c4",
      "range": {
        "startLine": 24,
        "startChar": 7,
        "endLine": 24,
        "endChar": 61
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2134f61_7e149e63",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-09-20T14:38:06Z",
      "side": 1,
      "message": "Could you expand on what \"test\" means here, maybe a few examples? Also, in my experience I had to pass additional arguments, for example I needed a second `angle_perftests` for some reason in this case:\n\n```\nscripts/trigger.py --gpu\u003dnone out/linuxtest angle_perftests \\\n  \u0027Ubuntu 18.04\u0027 angle_perftests --gtest_filter\u003d...\n```",
      "range": {
        "startLine": 25,
        "startChar": 38,
        "endLine": 25,
        "endChar": 42
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ba89cee_23fa968a",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-09-22T19:24:01Z",
      "side": 1,
      "message": "Added more docs here. The second test name is an artifact of using a \"runner\" script, although I thought Yuly was going to remove that. I guess we didn\u0027t end up needing to remove it?",
      "parentUuid": "a2134f61_7e149e63",
      "range": {
        "startLine": 25,
        "startChar": 38,
        "endLine": 25,
        "endChar": 42
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "324ccf4a_c3af8d27",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2022-09-23T10:51:08Z",
      "side": 1,
      "message": "We\u0027ve removed it in Chromium, but not in standalone.\nIn standalone it\u0027s blocked on LSAN reported leaks.\nBut I\u0027ll remove it eventually, since I want to migrate iOS to standalone.",
      "parentUuid": "4ba89cee_23fa968a",
      "range": {
        "startLine": 25,
        "startChar": 38,
        "endLine": 25,
        "endChar": 42
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2152c3db_b96a20ce",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2022-09-19T16:36:12Z",
      "side": 1,
      "message": "Could you add an example of the args in the shard, and then which of these arguments should be passed to trigger.py?\nI know that mb.py adds some arguments automatically, so you don\u0027t actually need to pass them twice.",
      "range": {
        "startLine": 26,
        "startChar": 7,
        "endLine": 26,
        "endChar": 64
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "185d960b_ce28e8b2",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-09-22T19:24:01Z",
      "side": 1,
      "message": "Can you clarify specifically how you\u0027d change the docs here? I mean GPU \u003d GPU, OS \u003d OS, etc. Maybe just write a short example of how you\u0027d reword or edit this section and I\u0027ll update the doc in the next revision.",
      "parentUuid": "2152c3db_b96a20ce",
      "range": {
        "startLine": 26,
        "startChar": 7,
        "endLine": 26,
        "endChar": 64
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42607454_ca3f7c49",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2022-09-23T10:51:08Z",
      "side": 1,
      "message": "I should have added this comment to another part of this paragraph, GPU/os_dim are indeed clear. The needed args is the hard part.\nE.g.\nhttps://chromium-swarm.appspot.com/task?id\u003d5d8062fdd4628610\nrun_command([\u0027/b/swarming/w/ir/.task_template_packages/rdb\u0027, \u0027stream\u0027, \u0027-test-id-prefix\u0027, \u0027ninja://src/tests:angle_deqp_gles2_tests/\u0027, \u0027-var\u0027, \u0027builder:android-arm64-test\u0027, \u0027-var\u0027, \u0027device_os:R\u0027, \u0027-var\u0027, \u0027device_type:flame\u0027, \u0027-var\u0027, \u0027os:Android\u0027, \u0027-var\u0027, \u0027test_suite:angle_deqp_gles2_vulkan_tests\u0027, \u0027-tag\u0027, \u0027step_name:angle_deqp_gles2_vulkan_tests on Android device Pixel 4\u0027, \u0027-tag\u0027, \u0027target_platform:android\u0027, \u0027-coerce-negative-duration\u0027, \u0027-location-tags-file\u0027, \u0027../../testing/location_tags.json\u0027, \u0027-exonerate-unexpected-pass\u0027, \u0027--\u0027, \u0027result_adapter\u0027, \u0027json\u0027, \u0027-result-file\u0027, \u0027/b/swarming/w/iouu4qih62/output.json\u0027, \u0027-artifact-directory\u0027, \u0027/b/swarming/w/iouu4qih62\u0027, \u0027--\u0027, \u0027luci-auth\u0027, \u0027context\u0027, \u0027--\u0027, \u0027vpython3\u0027, \u0027../../testing/test_env.py\u0027, \u0027../../build/android/test_wrapper/logdog_wrapper.py\u0027, \u0027--script\u0027, \u0027../../scripts/run_gtest_angle_test.py\u0027, \u0027--logdog-bin-cmd\u0027, \u0027../../.task_template_packages/logdog_butler\u0027, \u0027--isolated-script-test-output\u003d/b/swarming/w/iouu4qih62/output.json\u0027, \u0027--isolated-script-test-perf-output\u003d/b/swarming/w/iouu4qih62/perftest-output.json\u0027, \u0027angle_deqp_gles2_tests\u0027, \u0027--use-angle\u003dvulkan\u0027, \u0027-v\u0027, \u0027--shard-timeout\u003d500\u0027]\n\nIt\u0027s not obvious which of these arguments need to be passed to trigger.py and which aren\u0027t.",
      "parentUuid": "185d960b_ce28e8b2",
      "range": {
        "startLine": 26,
        "startChar": 7,
        "endLine": 26,
        "endChar": 64
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98a52cde_145ea247",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-09-20T14:38:06Z",
      "side": 1,
      "message": "Is there way to get the output files with this script? For example, screenshots that we normally see in CAS outputs of gold test runs.",
      "range": {
        "startLine": 27,
        "startChar": 54,
        "endLine": 27,
        "endChar": 84
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7231679c_c21dc037",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-09-22T19:24:01Z",
      "side": 1,
      "message": "Yes, they should all be in the CAS outputs. documented this.",
      "parentUuid": "98a52cde_145ea247",
      "range": {
        "startLine": 27,
        "startChar": 54,
        "endLine": 27,
        "endChar": 84
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58f1526e_d2522c91",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-09-23T13:11:20Z",
      "side": 1,
      "message": "The reason I asked about CAS outputs was because I was trying to run a gold test via trigger.py and there was no CAS outputs at all. Not sure if that was because I missed some argument that was necessary or something else went wrong. Could you give gold tests a try, maybe we could include a command line or some args that are needed for it to work?",
      "parentUuid": "7231679c_c21dc037",
      "range": {
        "startLine": 27,
        "startChar": 54,
        "endLine": 27,
        "endChar": 84
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4bd3ede_13fd29af",
        "filename": "scripts/trigger.py",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1001921
      },
      "writtenOn": "2022-09-23T13:17:01Z",
      "side": 1,
      "message": "I\u0027ve also observed CAS outputs missing from some tryjobs.\nFor sure, post-processing results, like merge scripts isn\u0027t triggered by trigger.py, maybe it\u0027s worth mentioning this.\n\nIs it possible that CAS outputs were missing for Roman because `--isolated-script-test-output` wasn\u0027t specified properly?",
      "parentUuid": "58f1526e_d2522c91",
      "range": {
        "startLine": 27,
        "startChar": 54,
        "endLine": 27,
        "endChar": 84
      },
      "revId": "a93120d2a82bc596ba90bfdcf0f3e56ff4910e38",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}