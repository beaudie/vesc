{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a571a53d_dd98a51f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2023-05-05T16:54:54Z",
      "side": 1,
      "message": "Alexey, does this lg?",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60b059e6_822452ff",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 232,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2023-05-05T17:39:02Z",
      "side": 1,
      "message": "Shouldn\u0027t this change (and below in this function) be reverted?",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8dfd8e3f_0cd79fe5",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 232,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2023-05-05T18:16:36Z",
      "side": 1,
      "message": "It\u0027s entirely possible I\u0027m misunderstanding things. In order to always include the emulateAlphaCoverage code this function needs to always be called, but what it does is only needed if emulateAlphaCoverage is true. That\u0027s why I made this conditional. Call site is here: https://chromium-review.googlesource.com/c/angle/angle/+/4496254/13/src/compiler/translator/TranslatorMetalDirect.cpp#1323 . If I remove this conditional and always call this function, then all this code would be executed even if it\u0027s not necessary.\n\nPerhaps you\u0027re saying it\u0027s always ok to call this even if emulateAlphaCoverage is false?",
      "parentUuid": "60b059e6_822452ff",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47ea0331_7a80649e",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 232,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2023-05-05T18:30:53Z",
      "side": 1,
      "message": "This function, which flips an arbitrary variable, does does not depend on A2C emulation anyway. If proven to be needed, such condition may be added to `InsertFragCoordCorrection` in a follow up.",
      "parentUuid": "8dfd8e3f_0cd79fe5",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "556224bb_f2691dda",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 232,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2023-05-05T18:48:39Z",
      "side": 1,
      "message": "Thanks for the information. Could you elaborate on why the call site:\nhttps://chromium.googlesource.com/angle/angle/+/refs/heads/main/src/compiler/translator/TranslatorMetalDirect.cpp#1274 , which calls to InsertFragCoordCorrection, and then FlipBuiltinVariable if emulateAlphaCoverage is true, shouldn\u0027t always be called when we are trying to share shaders? Won\u0027t this mean that if emulateAlphaCoverage is true, we\u0027ll generate a different shader program, which is why I\u0027m trying to change?",
      "parentUuid": "47ea0331_7a80649e",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "604b6ac4_bb602b50",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 232,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2023-05-05T19:01:24Z",
      "side": 1,
      "message": "It should. My comment is about `makeConditional` change being unnecessary.",
      "parentUuid": "556224bb_f2691dda",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca835c89_d5d2d8ac",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 232,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2023-05-05T19:26:04Z",
      "side": 1,
      "message": "Just to make sure I\u0027m understanding your concern. You\u0027re suggesting that I remove makeConditional, and always use an ifelse? If I did that, then wouldn\u0027t the wrong thing happen if usesFragCoord is true, but emulateAlphaToCoverag was false?\nIsn\u0027t `makeConditional` needed for the case where usesFragCoord is true? Perhaps you\u0027re suggesting we always do the flip? Wouldn\u0027t that mean we do some unnecessary work? Perhaps it doesn\u0027t matter much? Thanks again for the help.",
      "parentUuid": "604b6ac4_bb602b50",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2da8f1c6_6d402f51",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 232,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2023-05-05T19:45:15Z",
      "side": 1,
      "message": "For now, let\u0027s always do the flip. If really needed, this condition could be implemented directly inside `InsertFragCoordCorrection` to skip the `FlipBuiltinVariable` call altogether.",
      "parentUuid": "ca835c89_d5d2d8ac",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "118fcd42_4fff8f87",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 309,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2023-05-05T17:39:02Z",
      "side": 1,
      "message": "Ditto",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52a948fc_5843884d",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 657,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2023-05-05T17:39:02Z",
      "side": 1,
      "message": "The `TVariable` should be created like `sampleMaskEnabledVar` below, with the same static type. Since it doesn\u0027t seem to be needed outside of this function, the declaration could be inlined here.",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43119331_dc6d2f22",
        "filename": "src/compiler/translator/TranslatorMetalDirect.cpp",
        "patchSetId": 13
      },
      "lineNbr": 657,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2023-05-05T18:32:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "52a948fc_5843884d",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8423b4f2_228dc5bc",
        "filename": "src/compiler/translator/TranslatorMetalDirect/ConstantNames.cpp",
        "patchSetId": 13
      },
      "lineNbr": 22,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2023-05-05T17:39:02Z",
      "side": 1,
      "message": "nit: rename to `ANGLEEmulateAlphaToCoverage` for brevity.",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "50657cd7_1d94205b",
        "filename": "src/compiler/translator/TranslatorMetalDirect/ConstantNames.cpp",
        "patchSetId": 13
      },
      "lineNbr": 22,
      "author": {
        "id": 1000763
      },
      "writtenOn": "2023-05-05T18:32:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8423b4f2_228dc5bc",
      "revId": "a69e4cbf59e1223efffc373d93a31bd771176adc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}