{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7d38b96f_f4921dc7",
        "filename": "src/libANGLE/Debug.h",
        "patchSetId": 3
      },
      "lineNbr": 182,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-09-26T20:40:55Z",
      "side": 1,
      "message": "Do you really need this check? In the absolute worst case, someone might get a message one extra time or something, it\u0027s pretty harmless.",
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66610d5b_60d1b36a",
        "filename": "src/libANGLE/Debug.h",
        "patchSetId": 3
      },
      "lineNbr": 182,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-09-26T20:56:37Z",
      "side": 1,
      "message": "Depends on your definition of \"really need\" :) This is good practice and doesn\u0027t hurt performance. My default is to stick to reliability unless I have a good reason not to.",
      "parentUuid": "7d38b96f_f4921dc7",
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c268aa4_f18e051d",
        "filename": "src/libANGLE/Debug.h",
        "patchSetId": 3
      },
      "lineNbr": 182,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-09-26T21:02:16Z",
      "side": 1,
      "message": "Ack, it doesn\u0027t hurt of course",
      "parentUuid": "66610d5b_60d1b36a",
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa644b7a_12416ef9",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 4566,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-09-26T20:40:55Z",
      "side": 1,
      "message": "You can make this _much_ simpler by just calling `ANGLE_PERF_WARNING` in `ANGLE_VK_PERF_WARNING` and then call this function. I know that means `snprintf` is called twice, but bear in mind that this is only relevant during captures, and performance doesn\u0027t matter much.\n\nThen this function could be as simple as:\n\n\n```suggestion\n    if (mRenderer-\u003eenableDebugUtils() || mRenderer-\u003eangleDebuggerMode())\n    {\n        char message[200];\n        va_list args;\n        va_start(args, format);\n        vsnprintf(message, sizeof(message), format, args);\n        va_end(args);\n\n        insertEventMarkerImpl(GL_DEBUG_SOURCE_OTHER, message);\n    }\n```",
      "range": {
        "startLine": 4539,
        "startChar": 0,
        "endLine": 4566,
        "endChar": 5
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63488bca_abc289af",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 4566,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-09-26T20:56:37Z",
      "side": 1,
      "message": "\u003e just calling ANGLE_PERF_WARNING in ANGLE_VK_PERF_WARNING\n\nI don\u0027t think we can do that because ANGLE_PERF_WARNING takes a pre-formatted message. This logic could be simplified a little bit by formatting the message twice but I don\u0027t think it would really help readability",
      "parentUuid": "fa644b7a_12416ef9",
      "range": {
        "startLine": 4539,
        "startChar": 0,
        "endLine": 4566,
        "endChar": 5
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91ec20a9_1669da3f",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 4566,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-09-26T21:02:16Z",
      "side": 1,
      "message": "Oh, it would definitely help to make `ANGLE_PERF_WARNING` do the formatting itself too. Then we would avoid having to format once, only for `ANGLE_PERF_WARNING` to decide it\u0027s not going to log it.",
      "parentUuid": "63488bca_abc289af",
      "range": {
        "startLine": 4539,
        "startChar": 0,
        "endLine": 4566,
        "endChar": 5
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e56ae814_889ff010",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 4566,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-09-26T21:18:41Z",
      "side": 1,
      "message": "maybe but then we\u0027d need to watch out for stuff like this that might go above the fixed-buffer size?..\nhttps://crsrc.org/c/third_party/angle/src/libANGLE/renderer/d3d/ProgramD3D.cpp;drc\u003deb0d59973d21f845b5785563f5d56b8ebb617478;l\u003d665",
      "parentUuid": "91ec20a9_1669da3f",
      "range": {
        "startLine": 4539,
        "startChar": 0,
        "endLine": 4566,
        "endChar": 5
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e2f3651_35bda7ba",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 3
      },
      "lineNbr": 245,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-09-26T20:40:55Z",
      "side": 1,
      "message": "super nit: Is `don\u0027t pass by non-const reference` not a thing anymore? I think Chromium\u0027s not enforcing it anymore, but we\u0027ve kept that in ANGLE. It helps readability at the call site (because otherwise it doesn\u0027t look like the value can be modified)",
      "range": {
        "startLine": 245,
        "startChar": 29,
        "endLine": 245,
        "endChar": 52
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa52e6d8_cc290ac6",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 3
      },
      "lineNbr": 245,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-09-26T20:56:37Z",
      "side": 1,
      "message": "Frankly I don\u0027t know. Personally I never really liked the reference vs pointer convention. Yeah it makes the call site a bit more obvious but then it messes up the callee by making it less obvious that the pointer isn\u0027t null, sometimes making ownership less obvious (reference is obviously owned by the caller), and when we can\u0027t just swap `.` to `-\u003e`, then `*var` stuff can get pretty ugly. Reference just \"feels right\" to me but if you really prefer the pointer, I\u0027ll do it :)",
      "parentUuid": "3e2f3651_35bda7ba",
      "range": {
        "startLine": 245,
        "startChar": 29,
        "endLine": 245,
        "endChar": 52
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04c2a91b_8b75dcff",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 3
      },
      "lineNbr": 245,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-09-26T21:02:16Z",
      "side": 1,
      "message": "I get that, sometimes it does get annoying.\n\nBut let\u0027s just stick to ANGLE\u0027s convention for consistency?",
      "parentUuid": "aa52e6d8_cc290ac6",
      "range": {
        "startLine": 245,
        "startChar": 29,
        "endLine": 245,
        "endChar": 52
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d9e4b593_b67af6db",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 3
      },
      "lineNbr": 245,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-09-26T21:18:41Z",
      "side": 1,
      "message": "Done but I mean, there must be a reason Chromium isn\u0027t enforcing it any more.",
      "parentUuid": "04c2a91b_8b75dcff",
      "range": {
        "startLine": 245,
        "startChar": 29,
        "endLine": 245,
        "endChar": 52
      },
      "revId": "8a01bc563d51beca77ea0212190b5c1d6915fe3d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}