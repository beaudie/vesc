{
  "comments": [
    {
      "key": {
        "uuid": "e7d6695b_90bd4dbe",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-11-28T15:34:34Z",
      "side": 1,
      "message": "If the goal is to print texture format enums, I think the existing generated file will be enough. It has a \n\n   const char *GLenumToString(GLenumGroup enumGroup, unsigned int value)\n\nfunction that you can pass a GLenumGroup of GLenumGroup::InternalFormat.  This function is accessible from a white box test.",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "791b736f_9183bf35",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2019-11-28T16:36:08Z",
      "side": 1,
      "message": "Geoff, we were aware of it when we started work on this but the issue is 2 fold -\n\n1) we do not know the group any enum belongs to, there was no O(1) way to retrieve the enum group for a given enum and we ended up trying out all the enum groups for every enum we encountered\n2) that file is compiled only on trace enabled builds, i think that decision was made due to the sheer binary size increase that file brings in\n\nWe are about to upload another patchset where we created our own data.json file that contains JUST the format and type enums and we auto gen the swicth statement from that file. IMO, it is a more leaner and cleaner solution.",
      "parentUuid": "e7d6695b_90bd4dbe",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8339169e_4f945030",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-11-28T17:05:38Z",
      "side": 1,
      "message": "Mohan, if you just need format and type enums, can\u0027t you specify the groups for them?\n\nYou can pretty easily pull the existing file into white box tests. Just takes a bit of reordering of the build files.",
      "parentUuid": "791b736f_9183bf35",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a5f3dff_cf07135d",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2019-11-28T17:08:53Z",
      "side": 1,
      "message": "not that straightforward, format and type enums are spread across 5 different enum groups and\nalso one of them is the \"default\" enum group which brings with it a lot of other enums\nthat we really dont care about",
      "parentUuid": "8339169e_4f945030",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22a3d98c_572861f3",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-11-28T17:13:57Z",
      "side": 1,
      "message": "which groups are they spread across?",
      "parentUuid": "4a5f3dff_cf07135d",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3292c954_0455fbb0",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2019-11-28T17:19:00Z",
      "side": 1,
      "message": "IIRC,\n\nInternalFormat, DefaultGroup, PixelFormat, PixelType and VertexAttribType",
      "parentUuid": "22a3d98c_572861f3",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "947fb4f8_9e5670a4",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-11-28T17:48:48Z",
      "side": 1,
      "message": "I think the current solution makes the code more difficult to maintain.\n\nMy thinking is you are likely running into bugs in gl.xml. Can you upload a version that uses the current function and we can go through the missing entries?\n\nAbout DefaultGroup: call OutputGLenumString. This falls back from your selected category to DefaultGroup automatically.\n\nIf there\u0027s a ton of gl.xml errors, too many to fix, we can always expand DefaultGroup instead of adding a totally new query.",
      "parentUuid": "3292c954_0455fbb0",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91c01340_15b9a966",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2019-11-28T21:54:02Z",
      "side": 1,
      "message": "im not sure i understand your recommendation. Calling \"OutputGLenumString\" requires us\nto pass in an enum group. We wont know which group an enum belongs to in the first place.\nIt is possible that the enum we are looking up belongs to the pixel format group and if\nwe fallback to a search in the default category, we will fail.\n\nCan you elaborate a little bit on what you mean or walk us through a couple usecases\non how you want to see the lookup implemented?",
      "parentUuid": "947fb4f8_9e5670a4",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5115dea5_08afc112",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-11-28T21:58:42Z",
      "side": 1,
      "message": "Why don\u0027t you know what group the enum belongs to? I listed a couple in my comment.",
      "parentUuid": "91c01340_15b9a966",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2181782c_75f4876b",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2019-11-28T22:13:06Z",
      "side": 1,
      "message": "for ex. say we want to look up the string for enum value \"0x8368\", what would my steps\nbe to get to the string representation of that enum through the existing util helper?",
      "parentUuid": "5115dea5_08afc112",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbe0fd19_0f976224",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-11-28T22:28:54Z",
      "side": 1,
      "message": "It would depend on the context. i.e. which specific lines in your test.",
      "parentUuid": "2181782c_75f4876b",
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fad9828_cc17858f",
        "filename": "scripts/gen_gl_enum_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-11-26T15:07:48Z",
      "side": 1,
      "message": "does `key\u003dreversed` work?",
      "range": {
        "startLine": 205,
        "startChar": 28,
        "endLine": 205,
        "endChar": 54
      },
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "358fc315_2511eea3",
        "filename": "src/tests/gl_tests/FormatPrintTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 67,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-11-28T17:48:48Z",
      "side": 1,
      "message": "this should be the InternalFormat category",
      "range": {
        "startLine": 67,
        "startChar": 90,
        "endLine": 67,
        "endChar": 95
      },
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1289b14e_a93f15f8",
        "filename": "src/tests/gl_tests/FormatPrintTest.cpp",
        "patchSetId": 2
      },
      "lineNbr": 68,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-11-28T17:48:48Z",
      "side": 1,
      "message": "this should be PixelType",
      "range": {
        "startLine": 68,
        "startChar": 65,
        "endLine": 68,
        "endChar": 79
      },
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "239d4f7f_f3d1e81a",
        "filename": "src/tests/gl_tests/gl_enum_to_string_flattened_autogen.cpp",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2019-11-26T15:07:48Z",
      "side": 1,
      "message": "Not a big deal, but could these instead be like:\n\n    case GL_2X_BIT_ATI:\n        return \"GL_2X_BIT_ATI\";\n\nWouldn\u0027t that be clearer?",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 26,
        "endChar": 34
      },
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "30dd28ee_f2e535fc",
        "filename": "src/tests/gl_tests/gl_enum_to_string_flattened_autogen.cpp",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2019-11-28T16:36:08Z",
      "side": 1,
      "message": "shabi, we started taking a closer look at this and found out that the existing script that\nwe modified was not \"complete\". There were many times we had enums with value, say 0x01,\nthat map to about 10 different strings and the script would just pick the first one in\nlexicographical order\n\nwill upload a new patch where we created a new json file that contains just the format and\ntype enums and autogen a switch from there.",
      "parentUuid": "239d4f7f_f3d1e81a",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 26,
        "endChar": 34
      },
      "revId": "346295f26f41186f61afdcc3e520be0918a1d78e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}