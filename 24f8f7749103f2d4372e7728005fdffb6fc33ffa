{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "347ee005_3cf7a9cc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-01-10T21:31:11Z",
      "side": 1,
      "message": "Sample output from OOM (Linux/NVIDIA):\n```\nINFO: Currently allocated size for memory allocation type (Image): 16,384\n--\u003e Heap index 0: 16,384\n--\u003e Heap index 1: 0\n--\u003e Heap index 2: 0\n\nINFO: Currently allocated size for memory allocation type (Buffer): 3,758,096,640\n--\u003e Heap index 0: 3,758,096,384\n--\u003e Heap index 1: 256\n--\u003e Heap index 2: 0\n\nWARN: RendererVk.cpp:1348 (logPendingMemoryAllocation): Pending allocation size for memory allocation type (Buffer) for heap index 0: 268,435,456\nWARN: RendererVk.cpp:1366 (outputMemoryLogStream): Memory heap info\n\n* Available memory heaps:\n0 | Heap size: 4,294,967,296 | Flags: 0x1\n1 | Heap size: 50,259,434,496 | Flags: 0x0\n2 | Heap size: 257,949,696 | Flags: 0x1\n\n* Available memory budget and usage per heap:\n0 | Heap budget: 3,843,751,936 | Heap usage: 3,759,079,424\n1 | Heap budget: 50,259,434,496 | Heap usage: 12,140,544\n2 | Heap budget: 248,643,584 | Heap usage: 9,306,112\n\n* Available memory types:\n0 | Heap index: 1 | Property flags: 0x0\n1 | Heap index: 1 | Property flags: 0x0\n2 | Heap index: 1 | Property flags: 0x0\n3 | Heap index: 1 | Property flags: 0x0\n4 | Heap index: 1 | Property flags: 0x0\n5 | Heap index: 1 | Property flags: 0x0\n6 | Heap index: 1 | Property flags: 0x0\n7 | Heap index: 0 | Property flags: 0x1\n8 | Heap index: 1 | Property flags: 0x6\n9 | Heap index: 1 | Property flags: 0xe\n10 | Heap index: 2 | Property flags: 0x7\n```",
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f97e302_83613ed1",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.h",
        "patchSetId": 3
      },
      "lineNbr": 976,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-01-10T19:54:02Z",
      "side": 1,
      "message": "Another clean up idea, Instead of adding these into RendererVk, you create a new class for all these loggings and RendererVk will just call that class\u0027s method. That way it is cleaner and this mMemoryAllocationMutex will also owned and managed by that class. You can see if it make sense just expanding MemoryReport class or add a new class. And this can be a separate follow up CL if you prefer.",
      "range": {
        "startLine": 971,
        "startChar": 4,
        "endLine": 976,
        "endChar": 0
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "430d4d47_b7ac6688",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.h",
        "patchSetId": 3
      },
      "lineNbr": 976,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-01-10T21:31:11Z",
      "side": 1,
      "message": "Thanks Charlie! It is a good idea. Let\u0027s do it as a follow-up CL.",
      "parentUuid": "7f97e302_83613ed1",
      "range": {
        "startLine": 971,
        "startChar": 4,
        "endLine": 976,
        "endChar": 0
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df332c2b_667b1e01",
        "filename": "src/libANGLE/renderer/vulkan/Suballocation.cpp",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-01-10T19:54:02Z",
      "side": 1,
      "message": "kInvalidMemoryTypeIndex",
      "range": {
        "startLine": 27,
        "startChar": 26,
        "endLine": 27,
        "endChar": 60
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8772a57f_2306378c",
        "filename": "src/libANGLE/renderer/vulkan/Suballocation.cpp",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-01-10T21:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "df332c2b_667b1e01",
      "range": {
        "startLine": 27,
        "startChar": 26,
        "endLine": 27,
        "endChar": 60
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0440c8e_e96dffc3",
        "filename": "src/libANGLE/renderer/vulkan/android/vk_android_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-01-10T19:54:02Z",
      "side": 1,
      "message": "nit: move the out parameters to the end of call to be consistent with other parameters. (Same thing with other APIs if you added this new out parameter)",
      "range": {
        "startLine": 62,
        "startChar": 40,
        "endLine": 62,
        "endChar": 68
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c7e9ad2_68d4ab9b",
        "filename": "src/libANGLE/renderer/vulkan/android/vk_android_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-01-10T21:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e0440c8e_e96dffc3",
      "range": {
        "startLine": 62,
        "startChar": 40,
        "endLine": 62,
        "endChar": 68
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ac1c11e_7a39bd10",
        "filename": "src/libANGLE/renderer/vulkan/android/vk_android_utils.h",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-01-10T19:54:02Z",
      "side": 1,
      "message": "nit: move the out parameters to the end of call to be consistent with other parameters.",
      "range": {
        "startLine": 30,
        "startChar": 40,
        "endLine": 30,
        "endChar": 69
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f0a3fc7_98ac77f8",
        "filename": "src/libANGLE/renderer/vulkan/android/vk_android_utils.h",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-01-10T21:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ac1c11e_7a39bd10",
      "range": {
        "startLine": 30,
        "startChar": 40,
        "endLine": 30,
        "endChar": 69
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe56a2d3_fa75e049",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 3
      },
      "lineNbr": 5092,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-01-10T19:54:02Z",
      "side": 1,
      "message": "kInvalidMemoryTypeIndex",
      "range": {
        "startLine": 5092,
        "startChar": 35,
        "endLine": 5092,
        "endChar": 72
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "221cd3d7_1d459da1",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 3
      },
      "lineNbr": 5092,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-01-10T21:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe56a2d3_fa75e049",
      "range": {
        "startLine": 5092,
        "startChar": 35,
        "endLine": 5092,
        "endChar": 72
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d3f1d29_30c758a7",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 3
      },
      "lineNbr": 5128,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-01-10T19:54:02Z",
      "side": 1,
      "message": "kInvalidMemoryTypeIndex",
      "range": {
        "startLine": 5128,
        "startChar": 28,
        "endLine": 5128,
        "endChar": 65
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1cbf04a_be827304",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 3
      },
      "lineNbr": 5128,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2023-01-10T21:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3d3f1d29_30c758a7",
      "range": {
        "startLine": 5128,
        "startChar": 28,
        "endLine": 5128,
        "endChar": 65
      },
      "revId": "24f8f7749103f2d4372e7728005fdffb6fc33ffa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}