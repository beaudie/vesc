{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0397d7a4_0fcd3163",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2023-10-14T22:00:44Z",
      "side": 1,
      "message": "PTAL",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c72a826f_b1bfb7b5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2023-10-14T22:01:55Z",
      "side": 1,
      "message": "i saw these VVLs which i believe are being incorrectly generated -\n```\nERR: RendererVk.cpp:795 (DebugUtilsMessenger): [ UNASSIGNED-Threading-\nMultipleThreads ] Validation Error: [ UNASSIGNED-Threading-MultipleThreads ] Object\n0: handle \u003d 0x30000000003, type \u003d VK_OBJECT_TYPE_PIPELINE_CACHE; | MessageID \u003d\n0x141cb623 | THREADING ERROR : vkMergePipelineCaches(): object of type\nVkPipelineCache is simultaneously used in current thread 140062389933632 and thread\n140062406719040\n                            Object: 0x30000000003 (type \u003d Pipeline Cache(16))\n```",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "470f0c0e_5e6fed5c",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 284,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-10-16T13:44:53Z",
      "side": 1,
      "message": "Did you get this from vkMergePipelineCaches? There\u0027s a gotcha there. While every other usage says \"if VK_PIPELINE_CACHE_CREATE_EXTERNALLY_SYNCHRONIZED_BIT, cache must be externally synchronized\", for `vkMergePipelineCaches` in particular it just says \"Host access to dstCache must be externally synchronized\"\n\nThis might be a spec oversight, I\u0027ll check that, but if you hit it on any other usage, it could be a different bug that needs attention.",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11f61995_95a76270",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 284,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2023-10-16T15:18:15Z",
      "side": 1,
      "message": "\u003e but if you hit it on any other usage\n\nAFAICT, every time i saw this VVL it was because of the merge call\n\n\u003e This might be a spec oversight\n\ni thought it is a validation layer bug since it does not take into account the fact that the pipeline cache maybe internally synchronized?",
      "parentUuid": "470f0c0e_5e6fed5c",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66d9e39a_39c2e384",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 284,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-10-16T15:53:16Z",
      "side": 1,
      "message": "Getting clarification here: https://gitlab.khronos.org/vulkan/vulkan/-/issues/3655\n\nLet\u0027s wait for that to get resolved? If the vkMergePipelineCaches call needing special synchronization is intentional (unlikely), we\u0027d have to rethink this change.",
      "parentUuid": "11f61995_95a76270",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d86381d_d351b4d5",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 284,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2023-10-16T15:56:06Z",
      "side": 1,
      "message": "\u003e If the vkMergePipelineCaches call needing special synchronization is intentional\n\nthat would be inconsistent and bad ðŸ˜ž\n\nnote that there are no rendering artifacts in any of the bot runs or traces when we let ICD internally synchronize pipeline caches",
      "parentUuid": "66d9e39a_39c2e384",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9562f7a8_ee544ed9",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 284,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2024-03-06T21:28:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4d86381d_d351b4d5",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfe751c5_9a00cb35",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 4
      },
      "lineNbr": 6295,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-10-16T13:44:53Z",
      "side": 1,
      "message": "Do you really need this change? RendererVk already inits this with a null mutex if the extension is not supported. If there are other places that pass in a non-null mutex, I suggest fixing them there instead.",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f32e5171_a27d9e6f",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 4
      },
      "lineNbr": 6295,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2023-10-16T15:18:15Z",
      "side": 1,
      "message": "\u003e If there are other places that pass in a non-null mutex\n\n`CreateMonolithicPipelineTask::CreateMonolithicPipelineTask` ASSERTs to make sure cache is threadsafe. Are you suggesting i remove this method completely?",
      "parentUuid": "bfe751c5_9a00cb35",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db8ebb01_63524d98",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 4
      },
      "lineNbr": 6295,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-10-16T15:53:16Z",
      "side": 1,
      "message": "Ok, let\u0027s keep this change.",
      "parentUuid": "f32e5171_a27d9e6f",
      "revId": "86574c2a99cb6ef27904ac57d23a51ed694f45b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}