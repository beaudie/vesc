{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4caffbda_10c8fed5",
        "filename": "src/libANGLE/renderer/vulkan/BUILD.gn",
        "patchSetId": 4
      },
      "lineNbr": 99,
      "author": {
        "id": 1386083
      },
      "writtenOn": "2024-07-30T13:25:04Z",
      "side": 1,
      "message": "Note: this is declared as `angle_source_set`, and ends up in `Android.bp` as `cc_defaults` rather than `cc_static_library`.",
      "range": {
        "startLine": 99,
        "startChar": 0,
        "endLine": 99,
        "endChar": 16
      },
      "revId": "45cef0b751cd714843adc4f99970ca001b91a940",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7638686e_33c605cf",
        "filename": "src/libANGLE/renderer/vulkan/BUILD.gn",
        "patchSetId": 4
      },
      "lineNbr": 99,
      "author": {
        "id": 1386083
      },
      "writtenOn": "2024-07-30T13:28:06Z",
      "side": 1,
      "message": "Dupe comment.",
      "parentUuid": "4caffbda_10c8fed5",
      "range": {
        "startLine": 99,
        "startChar": 0,
        "endLine": 99,
        "endChar": 16
      },
      "revId": "45cef0b751cd714843adc4f99970ca001b91a940",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac40b39f_80833b5a",
        "filename": "src/libANGLE/renderer/vulkan/BUILD.gn",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1386083
      },
      "writtenOn": "2024-07-30T13:25:04Z",
      "side": 1,
      "message": "@romanl@google.com this defines an `angle_source_set` and ends up generating a `cc_defaults` in Android.bp. We discussed turning this into a static library yesterday, but that so far caused it to use statically linked Vulkan over the system-provided one.\n\nIncluding the sources in the root targets like this doesn\u0027t have this problem; it also behaves more closely to having the sources included in the root targets directly as the linux gn build does.\n\nI have yet to identify the set of dependencies that set up cflags in a way that\u0027s in line with the root targets.",
      "range": {
        "startLine": 99,
        "startChar": 0,
        "endLine": 105,
        "endChar": 1
      },
      "revId": "45cef0b751cd714843adc4f99970ca001b91a940",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ffd6b38_4e910bad",
        "filename": "src/libANGLE/renderer/vulkan/BUILD.gn",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-30T13:46:24Z",
      "side": 1,
      "message": "Hmm, so the thing I find confusing about this is that cflags from the rule with srcs also apply to the other files in the root targets. With the way it\u0027s currently split it\u0027s both still confusing and more verbose, so to me it doesn\u0027t look better than what we had at the previous stage. Maybe keep the previous implementation?\n\nIt\u0027s been a few times I wondered whether we should support ability to insert comments into the generated .bp. This seems like an opportunity to add that, so that we could clarify for anyone looking at the .bp file, something like:\n\n```\n# Note: this is no-op for most builds, only applies to ... [mention the project and the product config variable]\nangle_dma_buf_config_cc_defaults {\n```",
      "parentUuid": "ac40b39f_80833b5a",
      "range": {
        "startLine": 99,
        "startChar": 0,
        "endLine": 105,
        "endChar": 1
      },
      "revId": "45cef0b751cd714843adc4f99970ca001b91a940",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a1817a3_01a37990",
        "filename": "src/libANGLE/renderer/vulkan/BUILD.gn",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1386083
      },
      "writtenOn": "2024-07-30T14:08:53Z",
      "side": 1,
      "message": "Thank you for taking a look. I reverted to the previous version with just one `angle_source_set`, added a comment to the .gn file, and some minimal logic to generate a comment for the Android.bp-generated one.\n\nThe products that use this are not public, so I included the bug number that contains more details. I hope that\u0027s OK.",
      "parentUuid": "3ffd6b38_4e910bad",
      "range": {
        "startLine": 99,
        "startChar": 0,
        "endLine": 105,
        "endChar": 1
      },
      "revId": "45cef0b751cd714843adc4f99970ca001b91a940",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}