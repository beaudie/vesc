{
  "comments": [
    {
      "key": {
        "uuid": "0bfaf9cc_7ecc719c",
        "filename": "src/libANGLE/renderer/d3d/d3d11/StateManager11.cpp",
        "patchSetId": 2
      },
      "lineNbr": 882,
      "author": {
        "id": 1165541
      },
      "writtenOn": "2017-08-10T09:31:18Z",
      "side": 1,
      "message": "Sorry that I didn\u0027t point it out earlier. Please reuse the code. I am considering maybe you can cache a bool variable \u0027mNoAttachements\u0027 as a member of SateManager11. In StateManager11::syncFramebuffer, you can set mNoAttachements to proper value according to appliedRTIndex, here you can directly use it like below:\nif (mNoAttachements)\n{\n        dxViewport.Width \u003d static_cast\u003cGLfloat\u003e(viewport.width \u003c framebuffer-\u003egetDefaultWidth()\n                                                    ? viewport.width\n                                                    : framebuffer-\u003egetDefaultWidth());\n        dxViewport.Height \u003d static_cast\u003cGLfloat\u003e(viewport.height \u003c framebuffer-\u003egetDefaultHeight()\n                                                     ? viewport.height\n                                                     : framebuffer-\u003egetDefaultHeight());\n}\n\nHow do you think?",
      "range": {
        "startLine": 861,
        "startChar": 0,
        "endLine": 882,
        "endChar": 5
      },
      "revId": "2a376cc1a5ec240dbf96ef4b95299d34c0ebbdc4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c76f053_b62a4c5c",
        "filename": "src/libANGLE/renderer/d3d/d3d11/StateManager11.cpp",
        "patchSetId": 2
      },
      "lineNbr": 882,
      "author": {
        "id": 1167049
      },
      "writtenOn": "2017-08-11T02:58:07Z",
      "side": 1,
      "message": "Thanks for the comment. I\u0027ve considered the idea as well, but I found we can\u0027t make sure calling sequence of syncFramebuffer and syncViewport. So the attachment count might be wrong if we don\u0027t check current attachments count.\nIn addition, it\u0027s not easy to reuse the code in syncFramebuffer because some other operations are made when syncFramebuffer. So it\u0027s safer to check current attachment count here though it might be checked twice in some conditions.",
      "parentUuid": "0bfaf9cc_7ecc719c",
      "range": {
        "startLine": 861,
        "startChar": 0,
        "endLine": 882,
        "endChar": 5
      },
      "revId": "2a376cc1a5ec240dbf96ef4b95299d34c0ebbdc4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17585fee_62443b94",
        "filename": "src/libANGLE/renderer/d3d/d3d11/StateManager11.cpp",
        "patchSetId": 2
      },
      "lineNbr": 882,
      "author": {
        "id": 1165541
      },
      "writtenOn": "2017-08-11T03:07:47Z",
      "side": 1,
      "message": "Ok. LGTM then. Thanks.",
      "parentUuid": "0c76f053_b62a4c5c",
      "range": {
        "startLine": 861,
        "startChar": 0,
        "endLine": 882,
        "endChar": 5
      },
      "revId": "2a376cc1a5ec240dbf96ef4b95299d34c0ebbdc4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}