{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5b1294e0_de1739a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-01-20T15:21:37Z",
      "side": 1,
      "message": "Looking good, a few clean-up suggestions.",
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "54b543a6_122849b6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "I like this CL a lot: being able to break up the blob is great. Have a bunch of suggestions to make the code less error prone and validate the incoming data.",
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6db73605_45aac3cf",
        "filename": "src/libANGLE/BlobCache.cpp",
        "patchSetId": 9
      },
      "lineNbr": 172,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-01-20T15:21:37Z",
      "side": 1,
      "message": "can you make this a non-member static method CompressBlobCacheData? it doesn\u0027t need to be part of blobcache.",
      "range": {
        "startLine": 172,
        "startChar": 16,
        "endLine": 172,
        "endChar": 29
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a01b3abf_d4999907",
        "filename": "src/libANGLE/BlobCache.cpp",
        "patchSetId": 9
      },
      "lineNbr": 172,
      "author": {
        "id": 1393148
      },
      "writtenOn": "2021-01-21T12:42:45Z",
      "side": 1,
      "message": "Hi Jamie, I moved these two functions to egl namespace {} in BlobCache.cpp.",
      "parentUuid": "6db73605_45aac3cf",
      "range": {
        "startLine": 172,
        "startChar": 16,
        "endLine": 172,
        "endChar": 29
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e756a73_8ce2e0e1",
        "filename": "src/libANGLE/BlobCache.cpp",
        "patchSetId": 9
      },
      "lineNbr": 203,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-01-20T15:21:37Z",
      "side": 1,
      "message": "same here.",
      "range": {
        "startLine": 203,
        "startChar": 16,
        "endLine": 203,
        "endChar": 31
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9d50d29_03099671",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 491,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-01-20T15:21:37Z",
      "side": 1,
      "message": "same as below",
      "range": {
        "startLine": 491,
        "startChar": 36,
        "endLine": 491,
        "endChar": 49
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db86ac7f_c0dd96d1",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 501,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "I\u0027d add a:\n\n  constexpr size_t kBlobHeaderSize \u003d ...;",
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "183e8ade_59779917",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 507,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "Store in a size_t and validate that it doesn\u0027t overflow 8 bits.",
      "range": {
        "startLine": 507,
        "startChar": 10,
        "endLine": 507,
        "endChar": 17
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0cc4ea36_0784b176",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 508,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "kBlobHeaderSize",
      "range": {
        "startLine": 508,
        "startChar": 78,
        "endLine": 508,
        "endChar": 97
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dab516b9_f2f35765",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 516,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "compressedOffset (or remove compressedOffset and use \"chunkIndex * chunkSize\" below)",
      "range": {
        "startLine": 516,
        "startChar": 48,
        "endLine": 516,
        "endChar": 70
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ffb8ad78_ae3470ee",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 516,
      "author": {
        "id": 1393148
      },
      "writtenOn": "2021-01-21T12:42:45Z",
      "side": 1,
      "message": "Replace \"chunkIndex * chunkSize\" with compressedOffset.\nAnd compressedOffset can\u0027t be removed because chunkSize may be changed in the last chunk and then can\u0027t be used to replace compressedOffset in\n\"memcpy(keyData.data() + kBlobHeaderSize, compressedData.data() + compressedOffset, chunkSize);\"",
      "parentUuid": "dab516b9_f2f35765",
      "range": {
        "startLine": 516,
        "startChar": 48,
        "endLine": 516,
        "endChar": 70
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3cc1558_ef9ea7ac",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 520,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "kBlobHeaderSize",
      "range": {
        "startLine": 520,
        "startChar": 28,
        "endLine": 520,
        "endChar": 66
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "891197cf_bddc80d5",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 526,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "We don\u0027t need to write chunkIndex because it\u0027s also in the key.  If you want to validate when you read the data back, you could write the number of remaining chunks instead.",
      "range": {
        "startLine": 525,
        "startChar": 0,
        "endLine": 526,
        "endChar": 39
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "231e6b27_5d749561",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 526,
      "author": {
        "id": 1393148
      },
      "writtenOn": "2021-01-21T12:42:45Z",
      "side": 1,
      "message": "Remove chunkIndex and add \"ASSERT(numChunks \u003c\u003d UINT8_MAX)\"",
      "parentUuid": "891197cf_bddc80d5",
      "range": {
        "startLine": 525,
        "startChar": 0,
        "endLine": 526,
        "endChar": 39
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d4553eb_92175017",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 528,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "kBlobHeaderSize",
      "range": {
        "startLine": 528,
        "startChar": 32,
        "endLine": 528,
        "endChar": 70
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ab815ad_65293adf",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 550,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "Just call this keyData and re-use it in the loop. Saves memory.",
      "range": {
        "startLine": 550,
        "startChar": 26,
        "endLine": 550,
        "endChar": 38
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec2d90a4_98ec0e2b",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 551,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "Also add a:\n\n  constexpr size_t kBlobHeaderSize \u003d ...;",
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8eab63e_6af4ceec",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 554,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "Also check that keyData.size() \u003e\u003d kBlobHeaderSize",
      "range": {
        "startLine": 554,
        "startChar": 47,
        "endLine": 554,
        "endChar": 48
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a982c83_356472b6",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 554,
      "author": {
        "id": 1393148
      },
      "writtenOn": "2021-01-21T12:42:45Z",
      "side": 1,
      "message": "Add size check:\n\"\n    if (!display-\u003egetBlobCache()-\u003eget(display-\u003egetScratchBuffer(), chunkCacheHash, \u0026keyData,\n                                      \u0026keySize) || keyData.size() \u003c kBlobHeaderSize)\n\"",
      "parentUuid": "b8eab63e_6af4ceec",
      "range": {
        "startLine": 554,
        "startChar": 47,
        "endLine": 554,
        "endChar": 48
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "838de352_13070fe1",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 561,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "Remove this and use kBlobHeaderSize",
      "range": {
        "startLine": 561,
        "startChar": 4,
        "endLine": 561,
        "endChar": 50
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10a3f6fc_6629c07b",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 581,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "Also check that keyData.size() \u003e\u003d kBlobHeaderSize",
      "range": {
        "startLine": 581,
        "startChar": 51,
        "endLine": 581,
        "endChar": 52
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31903c35_bdc67cba",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 589,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "kBlobHeaderSize",
      "range": {
        "startLine": 589,
        "startChar": 40,
        "endLine": 589,
        "endChar": 50
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63fb7f2f_4ddc6987",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 595,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "Validate that compressedSize + chunkSize \u003c\u003d compressedData.size()",
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65cfd325_f8afb97e",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 595,
      "author": {
        "id": 1393148
      },
      "writtenOn": "2021-01-21T12:42:45Z",
      "side": 1,
      "message": "Changed condition:\n\"\nif (checkNumber !\u003d numChunks || compressedData.size() \u003c (compressedSize + chunkSize))\n\"",
      "parentUuid": "63fb7f2f_4ddc6987",
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74e403dc_44b72989",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 596,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-01-20T19:31:31Z",
      "side": 1,
      "message": "kBlobHeaderSize",
      "range": {
        "startLine": 596,
        "startChar": 72,
        "endLine": 596,
        "endChar": 82
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc51fa28_f5b177db",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 601,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-01-20T15:21:37Z",
      "side": 1,
      "message": "can you make this a ANGLE_VK_CHECK as well? this is a serious error if it return false.",
      "range": {
        "startLine": 601,
        "startChar": 34,
        "endLine": 601,
        "endChar": 49
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a622144e_4e0485e9",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 601,
      "author": {
        "id": 1393148
      },
      "writtenOn": "2021-01-21T12:42:45Z",
      "side": 1,
      "message": "Hi Jamie, I add ANGLE_VK_CHECK after calling egl::DecompressBlobCacheData() and egl::CompressBlobCacheData(), is that right? Or I should set the CompressBlobCacheData/DecompressBlobCacheData to return angle::Result.",
      "parentUuid": "cc51fa28_f5b177db",
      "range": {
        "startLine": 601,
        "startChar": 34,
        "endLine": 601,
        "endChar": 49
      },
      "revId": "911332e5cb735965fd82bb89dec88fdcdbf50e8e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}