{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "25afda3b_270b01ef",
        "filename": "gni/angle.gni",
        "patchSetId": 2
      },
      "lineNbr": 281,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-06-24T15:31:31Z",
      "side": 1,
      "message": "Let\u0027s just set it to `angle_enable_vulkan_validation_layers`, the intent will be clearer.",
      "range": {
        "startLine": 281,
        "startChar": 2,
        "endLine": 281,
        "endChar": 36
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8cf16099_10b8da00",
        "filename": "gni/angle.gni",
        "patchSetId": 2
      },
      "lineNbr": 281,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2024-06-26T18:48:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "25afda3b_270b01ef",
      "range": {
        "startLine": 281,
        "startChar": 2,
        "endLine": 281,
        "endChar": 36
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08f8aa03_99600ce3",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1808,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-06-24T15:31:31Z",
      "side": 1,
      "message": "I wonder if we should just uplevel things and rename all validation layer stuff to debug layers, which we are adding to.",
      "range": {
        "startLine": 1804,
        "startChar": 0,
        "endLine": 1808,
        "endChar": 59
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e60ab4b_acbf2fd2",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1808,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2024-06-26T02:49:56Z",
      "side": 1,
      "message": "I\u0027ll give it a go in the morning and see if anything comes up.",
      "parentUuid": "08f8aa03_99600ce3",
      "range": {
        "startLine": 1804,
        "startChar": 0,
        "endLine": 1808,
        "endChar": 59
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "577200c8_ba783748",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1808,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2024-06-26T18:48:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "8e60ab4b_acbf2fd2",
      "range": {
        "startLine": 1804,
        "startChar": 0,
        "endLine": 1808,
        "endChar": 59
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8b91d68_fdc76d46",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1836,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-06-24T15:31:31Z",
      "side": 1,
      "message": "This in particular.  Things would get much simpler if stop treating validation special.\n\n+Shabi, what do you think of changing ANGLE\u0027s logic throughout to speak of `UseDebugLayers` instead of `UseValidationLayers`?\n\nThe current intent is:\n - Enabling `validation` loads the layer and starts emitting validation errors\n - Enabling `api_dump` loads the layer, but does nothing until you set an env var\n\nThe new intent would be:\n - Enabling `debug` layers:\n   - causes validation to load and emit errors\n   - causes api_dump to load but stay silent without env var",
      "range": {
        "startLine": 1836,
        "startChar": 0,
        "endLine": 1836,
        "endChar": 85
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38f3a477_1566f28f",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1836,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-06-25T03:34:33Z",
      "side": 1,
      "message": "If loading api_dump doesn\u0027t cost us anything, sure that sounds good. I would look at the runtime of end2end tests on some configs before and after the load-by-default change to see if it affects startup time in any measurable way.\n\nAnd to be extra super sure, could you please check ANGLE\u0027s binary size (libGLESv2.so) in a release build before and after the change?\n\n(For my information, how does api_dump get triggered?)",
      "parentUuid": "a8b91d68_fdc76d46",
      "range": {
        "startLine": 1836,
        "startChar": 0,
        "endLine": 1836,
        "endChar": 85
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5faa2ed7_5f1089bc",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1836,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2024-06-25T20:32:24Z",
      "side": 1,
      "message": "Size difference for `libGLESv2.so` (on Linux) was +360 bytes while on Android they are the same size.  Api dump gets triggered by setting the ANGLE `enable_vulkan_api_dump_layer` android property or desktop environment variable. If this is set (and some other circumstances are met) the layer name is added to `enabledInstanceLayerNames` which is passed in as part of the `VKInstanceCreateInfo`. So the run-time difference between it being enabled and not enabled is a couple of if checks.  It is not even available on release builds unless the GN arg is set to true.\n\nPretty sure I\u0027m running the E2E tests wrong in order to get perf numbers as my times were all over the place -- are there some recommended args for this?",
      "parentUuid": "38f3a477_1566f28f",
      "range": {
        "startLine": 1836,
        "startChar": 0,
        "endLine": 1836,
        "endChar": 85
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eeb00213_082e48b6",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1836,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-06-25T20:40:50Z",
      "side": 1,
      "message": "LGTM then. What perf numbers are you talking about?",
      "parentUuid": "5faa2ed7_5f1089bc",
      "range": {
        "startLine": 1836,
        "startChar": 0,
        "endLine": 1836,
        "endChar": 85
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9aba08dc_93998e74",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1836,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2024-06-25T20:46:01Z",
      "side": 1,
      "message": "You\u0027d mentioned having a look at the runtime of end2end tests on some configs w/ and w/o this change, so I was trying to include that info.",
      "parentUuid": "eeb00213_082e48b6",
      "range": {
        "startLine": 1836,
        "startChar": 0,
        "endLine": 1836,
        "endChar": 85
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ebeac4f0_1296d32b",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1836,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2024-06-25T20:48:41Z",
      "side": 1,
      "message": "Ah ok, I meant this: Look at step 102 here for example (end2end tests on Nvidia): https://ci.chromium.org/ui/p/angle/builders/try/linux-test/21246/overview\n\nIt says:\n\n```\nshard #0 test results\nshard #0 (runtime (10m 43s) + overhead (8s): 10m 51s)\nshard #1 test results\nshard #1 (runtime (10m 28s) + overhead (8s): 10m 36s)\n```\n\nJust wanted us to keep an eye on the `runtime` that\u0027s measured by the bot to make sure it doesn\u0027t change much.",
      "parentUuid": "9aba08dc_93998e74",
      "range": {
        "startLine": 1836,
        "startChar": 0,
        "endLine": 1836,
        "endChar": 85
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9b24c82_8b82e98f",
        "filename": "src/libANGLE/renderer/vulkan/vk_renderer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1836,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2024-06-26T18:48:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "ebeac4f0_1296d32b",
      "range": {
        "startLine": 1836,
        "startChar": 0,
        "endLine": 1836,
        "endChar": 85
      },
      "revId": "b60a278e4cdefdfd743ae9ce21b1f18cca9d7a59",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}