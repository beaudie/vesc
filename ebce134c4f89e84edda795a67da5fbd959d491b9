{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3f6ceb7c_bad4964b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-06-10T12:31:51Z",
      "side": 1,
      "message": "Which part of this cl required revert https://crrev.com/c/3696830 and why this cl can\u0027t be adjusted instead of reverting an otherwise seemingly correct change?",
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4a97eb1_af1a0da1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-10T13:41:20Z",
      "side": 1,
      "message": "Roman, no changes, waiting on you.",
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2bae535_a8715460",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-10T13:41:20Z",
      "side": 1,
      "message": "I had to fix it already in this patch set, I put up a reland CL. I was checking it last night so hadn\u0027t put it up yet. There\u0027s no changes in this CL.",
      "parentUuid": "3f6ceb7c_bad4964b",
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a52ef62_f131c011",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-15T17:15:29Z",
      "side": 1,
      "message": "Done, CL was re-landed. Again, my mistake, see below for more details.",
      "parentUuid": "c2bae535_a8715460",
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82cc0010_edda1609",
        "filename": "src/tests/capture_replay_tests/CaptureReplayTests.cpp",
        "patchSetId": 6
      },
      "lineNbr": 260,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-06-10T14:34:22Z",
      "side": 1,
      "message": "This doesn\u0027t look right to me, Base looks correct to me (using exeDir to get the full path instead of SetCWD) - is there a reason to change cwd that I might be missing?",
      "range": {
        "startLine": 260,
        "startChar": 8,
        "endLine": 260,
        "endChar": 38
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f693fb9b_6cdcb19a",
        "filename": "src/tests/capture_replay_tests/CaptureReplayTests.cpp",
        "patchSetId": 6
      },
      "lineNbr": 260,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-15T17:15:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "82cc0010_edda1609",
      "range": {
        "startLine": 260,
        "startChar": 8,
        "endLine": 260,
        "endChar": 38
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "878b066c_09b4e3b6",
        "filename": "src/tests/capture_replay_tests/CaptureReplayTests.cpp",
        "patchSetId": 6
      },
      "lineNbr": 260,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-06-15T22:16:22Z",
      "side": 1,
      "message": "Unsure if you intended to upload a new patchset? The one I\u0027m seeing #6 is still using SetCWD but it looks like you were going to remove that",
      "parentUuid": "f693fb9b_6cdcb19a",
      "range": {
        "startLine": 260,
        "startChar": 8,
        "endLine": 260,
        "endChar": 38
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fd8e20e_076f05b7",
        "filename": "src/tests/capture_replay_tests/CaptureReplayTests.cpp",
        "patchSetId": 6
      },
      "lineNbr": 260,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-16T15:16:44Z",
      "side": 1,
      "message": "My bad, I was getting confused between the files. I think this is correct - it\u0027s loading the trace txt file from the same path as the exe, which is where it ends up. If you\u0027re still concerned about a bug or bad behaviour here, can you clarify how I can fix it and still load the trace file from the right path? I could also use the CWD path too I imagine when calling LoadTraceNames, although that\u0027s not terribly different. LMKWYT",
      "parentUuid": "878b066c_09b4e3b6",
      "range": {
        "startLine": 260,
        "startChar": 8,
        "endLine": 260,
        "endChar": 38
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c84b922_c1aebcd3",
        "filename": "src/tests/capture_replay_tests/CaptureReplayTests.cpp",
        "patchSetId": 6
      },
      "lineNbr": 260,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-16T18:35:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0fd8e20e_076f05b7",
      "range": {
        "startLine": 260,
        "startChar": 8,
        "endLine": 260,
        "endChar": 38
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44d8637f_a82320e0",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 6
      },
      "lineNbr": 103,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-06-10T14:34:22Z",
      "side": 1,
      "message": "Is it intentional that this file will end up directly under chromium_tests_root/ ?\n\nIs this file handled correctly when traces are ran under android runner / catapult? Doesn\u0027t it need to be added to dependencies somewhere?",
      "range": {
        "startLine": 103,
        "startChar": 22,
        "endLine": 103,
        "endChar": 42
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ad9633e_70f2bd6a",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 6
      },
      "lineNbr": 103,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-15T17:15:29Z",
      "side": 1,
      "message": "The FindTestDataPath function scans the chromium tests root dir, as well as a list of other directories, to find this file. That\u0027s why the SetCWD isn\u0027t necessary any more. So yeah it should work in all cases.",
      "parentUuid": "44d8637f_a82320e0",
      "range": {
        "startLine": 103,
        "startChar": 22,
        "endLine": 103,
        "endChar": 42
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "756467ea_8cfc90d7",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 6
      },
      "lineNbr": 103,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-06-15T22:16:22Z",
      "side": 1,
      "message": "oh, it does show up in runtime_deps:\n\n```\n% grep angle_trace_list out/Android/gen.runtime/src/tests/angle_perftests__test_runner_script.runtime_deps\nangle_trace_list.txt\n```\n\nAdding angle_trace_list.txt to root sounds risky because of the way catapult handles stale files https://anglebug.com/6854#c13\n\nWould it make sense to put it under `$root/src/tests/restricted_traces/angle_trace_list.txt` where the json file used to be?\n\nThis patch seems to work on top of your change: https://paste.googleplex.com/4702139419983872?raw",
      "parentUuid": "2ad9633e_70f2bd6a",
      "range": {
        "startLine": 103,
        "startChar": 22,
        "endLine": 103,
        "endChar": 42
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c4f51a7_72c9e3c5",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 6
      },
      "lineNbr": 103,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-16T15:16:44Z",
      "side": 1,
      "message": "We can\u0027t put files into the source dir, only the out dir. I was using \"out/Release/angle/txt\" but then the loading got weird.\n\nMaybe the solution here is to ditch the chromium test runner.",
      "parentUuid": "756467ea_8cfc90d7",
      "range": {
        "startLine": 103,
        "startChar": 22,
        "endLine": 103,
        "endChar": 42
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "792d5828_3956ae0d",
        "filename": "util/capture/frame_capture_test_utils.cpp",
        "patchSetId": 6
      },
      "lineNbr": 39,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-06-15T22:16:22Z",
      "side": 1,
      "message": "This made me have a look at `ReadEntireFileToString` implementation and it looks like it silently truncates contents to buffer size when file is bigger than buffer and returns `true`:\n\nhttps://crsrc.org/c/third_party/angle/util/test_utils.cpp;drc\u003dc673ac8876330a42eed34e298ff585636af113bc;l\u003d56\n\nAlso wondering if this could be happening in other places.. Can\u0027t a shader be longer than 2000 characters, for example?\n\nhttps://crsrc.org/c/third_party/angle/util/shader_utils.cpp;drc\u003db0d75fb5c165fc0f8218ec7e8852bd47df49dedf;l\u003d21\n\n\nMaybe that function could be just like\n`ReadEntireFileToString(const char *filePath, std::string *contentsOut)` and then we wouldn\u0027t need to hard-code buffer sizes? Note how the implementation already reads the entire file into memory regardless of `maxLen`, then silently truncates into output.",
      "range": {
        "startLine": 39,
        "startChar": 4,
        "endLine": 39,
        "endChar": 43
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16713fb7_bed46c5a",
        "filename": "util/capture/frame_capture_test_utils.cpp",
        "patchSetId": 6
      },
      "lineNbr": 39,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-16T15:16:44Z",
      "side": 1,
      "message": "That would be a better implementation and the thought did occur to me as well that we should use dynamic allocation to be safe. I didn\u0027t see it as a major risk so I didn\u0027t implement it. Will take another look unless you don\u0027t mind the small risk to testing-only code.",
      "parentUuid": "792d5828_3956ae0d",
      "range": {
        "startLine": 39,
        "startChar": 4,
        "endLine": 39,
        "endChar": 43
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8387629f_c8a961d7",
        "filename": "util/capture/frame_capture_test_utils.cpp",
        "patchSetId": 6
      },
      "lineNbr": 39,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-06-16T18:35:10Z",
      "side": 1,
      "message": "Done\n\nhttps://chromium-review.googlesource.com/c/angle/angle/+/3708602/1",
      "parentUuid": "16713fb7_bed46c5a",
      "range": {
        "startLine": 39,
        "startChar": 4,
        "endLine": 39,
        "endChar": 43
      },
      "revId": "ebce134c4f89e84edda795a67da5fbd959d491b9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}