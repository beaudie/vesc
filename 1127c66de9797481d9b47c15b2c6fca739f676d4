{
  "comments": [
    {
      "key": {
        "uuid": "fb997a8a_4de2a919",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 3215,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-05-27T06:07:32Z",
      "side": 1,
      "message": "It looks like you\u0027re just checking if there are any xfb buffers, so can this check be changed to the following and moved outside of the loop?\n\n        if (!mTransformFeedbackBufferSerials.empty())\n\nOr is the list of buffers that\u0027s passed in a subset of the total xfb buffers that are currently active for the context?",
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f0072aa_fb254e05",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 3215,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-06-02T03:03:08Z",
      "side": 1,
      "message": "Suggest `find` instead of `count`.",
      "range": {
        "startLine": 3215,
        "startChar": 44,
        "endLine": 3215,
        "endChar": 49
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bebb2de9_a4eb17b0",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 3215,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-05T20:23:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9f0072aa_fb254e05",
      "range": {
        "startLine": 3215,
        "startChar": 44,
        "endLine": 3215,
        "endChar": 49
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "61398f46_6aa1aada",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 3215,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-05T20:23:54Z",
      "side": 1,
      "message": "!empty() is a different check. We\u0027re checking for any matching buffers.",
      "parentUuid": "fb997a8a_4de2a919",
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2027f03d_705f7c6a",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 971,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-06-02T03:03:08Z",
      "side": 1,
      "message": "Suggest find instead of count",
      "range": {
        "startLine": 971,
        "startChar": 51,
        "endLine": 971,
        "endChar": 56
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d91950a2_bbae0580",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 971,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-05T20:23:54Z",
      "side": 1,
      "message": "Any justification for why? count allows for a single check instead of a two-sided check (begin !\u003d end). Since this is a set and each element is unique the count method should return 1 or 0 and should early-exit if any element is found.",
      "parentUuid": "2027f03d_705f7c6a",
      "range": {
        "startLine": 971,
        "startChar": 51,
        "endLine": 971,
        "endChar": 56
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63d6d6cf_91cf05d2",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 971,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-06-08T10:08:29Z",
      "side": 1,
      "message": "That\u0027s right, I didn\u0027t pay attention to the fact that it\u0027s a set.",
      "parentUuid": "d91950a2_bbae0580",
      "range": {
        "startLine": 971,
        "startChar": 51,
        "endLine": 971,
        "endChar": 56
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc5da452_99cb1ef0",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 984,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-05-29T17:15:45Z",
      "side": 1,
      "message": "Maybe I am not fully understand the problem here, so bear with me if I am wrong. My understanding is that you try to detect if the index buffer is current been used by XFB or not. If yes, you need to end RP, otherwise, these are unrelated buffer, so no need to end RP. Right now it walks through the unordered set of XFB buffers and compare serial number. I am wondering instead of serial number, why not a boolean flag (bool mCurrentInUseByXFB) is not enough? Whenever a buffer is been used by XFB, you set to true and when not used set to false. That way you will be checking this boolean instead of walk the unordered set. Will this not work?",
      "range": {
        "startLine": 984,
        "startChar": 11,
        "endLine": 984,
        "endChar": 49
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47508905_7f355bd9",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 984,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-01T20:26:16Z",
      "side": 1,
      "message": "You still need a way to go back and reset all the flags after you start a new RP. So you\u0027ll need a list of these buffers somewhere. I\u0027d express what the CL is doing is answering the question \"is there a WAW hazard that needs a barrier?\" This is more easily implemented via storing a list of buffers in the RP itself.\n\nI\u0027m thinking I should probably sketch up a design doc with a few examples.",
      "parentUuid": "fc5da452_99cb1ef0",
      "range": {
        "startLine": 984,
        "startChar": 11,
        "endLine": 984,
        "endChar": 49
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64e3e8c9_272dd505",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 984,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-05T20:23:54Z",
      "side": 1,
      "message": "Had a conversation offline with Charlie. Switched to use Serials. This CL still tracks the active XFB buffers in the ContextVk/RP instead of tracking the RP in the XFB Buffers.",
      "parentUuid": "47508905_7f355bd9",
      "range": {
        "startLine": 984,
        "startChar": 11,
        "endLine": 984,
        "endChar": 49
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66d75123_b4bf6bd3",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 1000,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-05-27T06:07:32Z",
      "side": 1,
      "message": "This changes the behavior so we no longer do:\n\n    mGraphicsDirtyBits.set(DIRTY_BIT_INDEX_BUFFER);\n\nIs this intentional?",
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22b0faab_9fff2f40",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 1000,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-05T20:23:54Z",
      "side": 1,
      "message": "It is. I split off the functional change for good measure.",
      "parentUuid": "66d75123_b4bf6bd3",
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79b392ba_9849af22",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1652,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-05-27T06:07:32Z",
      "side": 1,
      "message": "For consistency, I think these should both either check VK_FALSE/TRUE, or neither should.   I\u0027m fine with not checking, since they are 0/1, so the \u0027\u003d\u003d VK_TRUE\u0027 can be removed.",
      "range": {
        "startLine": 1652,
        "startChar": 29,
        "endLine": 1652,
        "endChar": 94
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e497d4a9_be93d2d0",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1652,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-05T20:23:54Z",
      "side": 1,
      "message": "It\u0027s a type thing. VkBool uses VK_FALSE/VK_TRUE which are integer types, bool uses true/false which are boolean types. Marking as resolved since that should clear up why the code is as it is.",
      "parentUuid": "79b392ba_9849af22",
      "range": {
        "startLine": 1652,
        "startChar": 29,
        "endLine": 1652,
        "endChar": 94
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c7657df_9aa97c09",
        "filename": "src/tests/gl_tests/TransformFeedbackTest.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1781,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-05-27T06:07:32Z",
      "side": 1,
      "message": "Are there bugs tracking these failures?",
      "range": {
        "startLine": 1777,
        "startChar": 0,
        "endLine": 1781,
        "endChar": 63
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b816cd05_2332c069",
        "filename": "src/tests/gl_tests/TransformFeedbackTest.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1781,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-06-05T20:26:52Z",
      "side": 1,
      "message": "Filed a bug for the Intel failures. For the P2 it\u0027s no longer supported so we should not invest any time in it really. When we have P4 then yeah we should file bugs for it.",
      "parentUuid": "5c7657df_9aa97c09",
      "range": {
        "startLine": 1777,
        "startChar": 0,
        "endLine": 1781,
        "endChar": 63
      },
      "revId": "1127c66de9797481d9b47c15b2c6fca739f676d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}