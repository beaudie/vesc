{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7b267def_3223f504",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2022-08-11T00:40:06Z",
      "side": 1,
      "message": "Hi Shahbaz, PTAL. Thanks",
      "revId": "a731287288e4ad5f678d5211551ae2e1d5b195d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06def136_9e57bb2c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-08-11T02:25:02Z",
      "side": 1,
      "message": "So, was the program cache entirely disabled by accident? Wouldn\u0027t UMA histograms show this? IIRC, after switching to using Blob Cache, Chrome doesn\u0027t even use this extension, does it?\n\nAnyway, please add a test!",
      "revId": "a731287288e4ad5f678d5211551ae2e1d5b195d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41a05fa8_d9306bcb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2022-08-11T11:19:45Z",
      "side": 1,
      "message": "shader program cache is enabled by default. Because the bug, we can not disable it with setting EGL_CONTEXT_PROGRAM_BINARY_CACHE_ENABLED_ANGLE to EGL_FALSE while creating egl context. \n\nBTW, I am thinking to disable the cache for chromium, since chromium manages shader cache by itself. the cache in ANGLE causes memory regression, and maybe performance regression as well.\n\nTest added. Done",
      "parentUuid": "06def136_9e57bb2c",
      "revId": "a731287288e4ad5f678d5211551ae2e1d5b195d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "65bd2a89_56dfea26",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-08-11T16:40:17Z",
      "side": 1,
      "message": "Got it.\n\n\u003e BTW, I am thinking to disable the cache for chromium, since chromium manages shader cache by itself. the cache in ANGLE causes memory regression, and maybe performance regression as well.\n\nIIRC, ANGLE uses the blob cache if present, and only if not, it would cache the programs in its own memory. Since Chromium provides a blob cache, ANGLE shouldn\u0027t be caching anything itself.\n\nI imagine by \"chromium manages shader cache by itself\" you are talking about the same blob cache I\u0027m talking about. In that case, ANGLE shouldn\u0027t be doing anything more than put blobs in Chromium\u0027s blob cache.",
      "parentUuid": "41a05fa8_d9306bcb",
      "revId": "a731287288e4ad5f678d5211551ae2e1d5b195d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7b4b1bf0_109786f5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000050
      },
      "writtenOn": "2022-08-11T16:53:04Z",
      "side": 1,
      "message": "What\u0027s the blob cache? could you please point me to related code?\n\nChrome uses skia which caches shader program [1]. I think it will keep the program in the cache and keep it alive until it is purged. skia also read the binary from GL driver, and store them in hard drive, so it can be used when for the next run.\n\n[1] https://source.chromium.org/chromium/chromium/src/+/main:third_party/skia/src/gpu/ganesh/gl/GrGLGpuProgramCache.cpp;l\u003d91?q\u003dProgramCache::findOrCreateProgramImpl\u0026ss\u003dchromium",
      "parentUuid": "65bd2a89_56dfea26",
      "revId": "a731287288e4ad5f678d5211551ae2e1d5b195d4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}