{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c47f4f4d_21bc8e5b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-03-24T22:20:22Z",
      "side": 1,
      "message": "Please include a regression test - want to check out the call pattern.",
      "revId": "9b5090a53f2c219ac4c2d4a5bea0d21be8922692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bea2ab2_dff456ce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2021-03-24T22:32:51Z",
      "side": 1,
      "message": "As I stated to Shabi:\n\nI don\u0027t have a way to get what the commands are.   Enabling `angle_enable_trace\u003dtrue` with `export ANGLE_ENABLE_DEBUG_MARKERS\u003d1` doesn\u0027t output anything, and the testcase file itself seems to just be a binary.\n\nDo you know how to get the call pattern for a fuzzer test?\n\nReproducer Testcase: https://clusterfuzz.com/download?testcase_id\u003d5123136027426816",
      "parentUuid": "c47f4f4d_21bc8e5b",
      "revId": "9b5090a53f2c219ac4c2d4a5bea0d21be8922692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1705a606_b8b1d08c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-03-25T13:57:17Z",
      "side": 1,
      "message": "I was able to get them out of Chrome before. Maybe the sandbox is enabled preventing the file being written? I don\u0027t see any references to ANGLE_ENABLE_DEBUG_MARKERS. Try using some prints or log to see if the debug logging code gets hit.",
      "parentUuid": "3bea2ab2_dff456ce",
      "revId": "9b5090a53f2c219ac4c2d4a5bea0d21be8922692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "973d09dd_c1707e54",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-03-25T14:22:38Z",
      "side": 1,
      "message": "+1 to sandbox being a potential issue. Not sure if this is a webgl test, but if it is, you could also disable GPU compositing so chrome itself doesn\u0027t use ANGLE. If it\u0027s not a webgl test, you wouldn\u0027t want to do that though.\n\n    --disable-gpu-watchdog\n    --disable-gpu-sandbox\n    --disable-gpu-compositing # only if crashing in webgl",
      "parentUuid": "1705a606_b8b1d08c",
      "revId": "9b5090a53f2c219ac4c2d4a5bea0d21be8922692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b7050d3_45648f13",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2021-03-26T00:54:50Z",
      "side": 1,
      "message": "I was able to get it to output the GL calls.   Apparently I completely glossed over the `is_debug \u003d false` it was using, so enabling that and `angle_enable_trace \u003d true` gives:\n\nhttps://paste.googleplex.com/4834863518580736\n\nUnfortunately, that\u0027s 450 lines of gibberish without any indication as to what reduced combination of calls gets us to the crash.   As suspected, there is no glUseProgram() call in that whole mess.   Unfortunately, just issuing the final glDrawArrays() command on its own doesn\u0027t cause a crash with an end2end test:\n\n    TEST_P(SimpleOperationTest, DrawWithoutProgramBound)\n    {\n        glDrawArrays(GL_LINE_STRIP_ADJACENCY, 646578481, 110);\n    }\n\nGives the same output for every backend:\n\n    [ RUN      ] SimpleOperationTest.DrawWithoutProgramBound/ES3_Vulkan\n    INFO: GL error: HIGH: GL_EXT_geometry_shader extension not enabled.\n    [       OK ] SimpleOperationTest.DrawWithoutProgramBound/ES3_Vulkan (339 ms)\n\nI\u0027m open to suggestions on other regression tests to add, but converting those fuzzer commands into an end2end is infeasible.",
      "parentUuid": "973d09dd_c1707e54",
      "revId": "9b5090a53f2c219ac4c2d4a5bea0d21be8922692",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}