{
  "comments": [
    {
      "key": {
        "uuid": "9bc8679a_13958c31",
        "filename": "src/compiler/translator/ParseContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1712,
      "author": {
        "id": 1142464
      },
      "writtenOn": "2016-08-17T07:54:11Z",
      "side": 1,
      "message": "Is an error generated correctly if the type has some other qualifiers? Like what if you say \"invariant centroid foo;\" in the shader.",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dbd73f3a_2d414d45",
        "filename": "src/compiler/translator/ParseContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1712,
      "author": {
        "id": 1160819
      },
      "writtenOn": "2016-08-18T11:55:57Z",
      "side": 1,
      "message": "Yes, \u0027foo\u0027 : undeclared identifier declared as invariant",
      "parentUuid": "9bc8679a_13958c31",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1bd39797_a7dacae6",
        "filename": "src/compiler/translator/ParseContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1712,
      "author": {
        "id": 1142464
      },
      "writtenOn": "2016-08-18T13:45:15Z",
      "side": 1,
      "message": "Nope, this is still an issue. Try adding the following test to MalformedShaderTest:\n\n// Invariant declaration should follow the following format \"invariant \u003cout variable name\u003e\".\n// Test having an incorrect qualifier in the invariant declaration.\nTEST_F(MalformedShaderTest, InvariantDeclarationWithStorageQualifier)\n{\n    const std::string \u0026shaderString \u003d\n        \"#version 300 es\\n\"\n        \"precision mediump float;\\n\"\n        \"out vec4 foo;\\n\"\n        \"invariant centroid foo;\\n\"\n        \"void main() {\\n\"\n        \"}\\n\";\n\n    if (compile(shaderString))\n    {\n        FAIL() \u003c\u003c \"Shader compilation succeeded, expecting failure \" \u003c\u003c mInfoLog;\n    }\n}",
      "parentUuid": "dbd73f3a_2d414d45",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7be73325_d2a704a1",
        "filename": "src/compiler/translator/ParseContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1732,
      "author": {
        "id": 1142464
      },
      "writtenOn": "2016-08-17T07:54:11Z",
      "side": 1,
      "message": "Shouldn\u0027t you check here that the variable can be declared as invariant - like with checkInvariantIsOutVariable()? Singling out gl_FrontFacing above also seems odd, aren\u0027t there many other similar cases?",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1bd39797_673c522a",
        "filename": "src/compiler/translator/ParseContext.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1732,
      "author": {
        "id": 1160819
      },
      "writtenOn": "2016-08-18T11:55:57Z",
      "side": 1,
      "message": "Yes, I should.\n\nI added a new function in util.cpp to check whether a builtin is an output variable.\nI checked from VariableInfo.cpp whether there are other output variables coming from some extensions.",
      "parentUuid": "7be73325_d2a704a1",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7be73325_f2a20893",
        "filename": "src/compiler/translator/glslang.y",
        "patchSetId": 4
      },
      "lineNbr": 843,
      "author": {
        "id": 1142464
      },
      "writtenOn": "2016-08-17T07:54:11Z",
      "side": 1,
      "message": "nit: Comment style.",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dbc81fe9_05e2b2c6",
        "filename": "src/compiler/translator/glslang.y",
        "patchSetId": 4
      },
      "lineNbr": 843,
      "author": {
        "id": 1160819
      },
      "writtenOn": "2016-08-18T11:55:57Z",
      "side": 1,
      "message": "I changed it to // empty, but should I just remove it?",
      "parentUuid": "7be73325_f2a20893",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3bb5bb44_3049e8be",
        "filename": "src/compiler/translator/glslang.y",
        "patchSetId": 4
      },
      "lineNbr": 843,
      "author": {
        "id": 1142464
      },
      "writtenOn": "2016-08-18T13:45:15Z",
      "side": 1,
      "message": "I think // empty is fine.",
      "parentUuid": "dbc81fe9_05e2b2c6",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7be73325_12958c31",
        "filename": "src/compiler/translator/glslang.y",
        "patchSetId": 4
      },
      "lineNbr": 1263,
      "author": {
        "id": 1142464
      },
      "writtenOn": "2016-08-17T07:54:11Z",
      "side": 1,
      "message": "Are there now sufficient checks that struct members don\u0027t have any weird qualifiers, like layout location or invariant? Some existing checks are in ParseContext::addStructure.",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1bbab737_6f43919e",
        "filename": "src/compiler/translator/glslang.y",
        "patchSetId": 4
      },
      "lineNbr": 1263,
      "author": {
        "id": 1160819
      },
      "writtenOn": "2016-08-18T11:55:57Z",
      "side": 1,
      "message": "I tested them using the shader translator sampler application. There was a bug with being able to use invariant and the layout location in the struct or interface block.\nAlso, there seems to be tests for the invariant qualifier in a interface block already in dEQP3. Not sure whether there are such tests about structs.",
      "parentUuid": "7be73325_12958c31",
      "revId": "fc5a8d22502617280cc567e12494c5b81294e49d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}