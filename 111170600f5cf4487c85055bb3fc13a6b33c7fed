{
  "comments": [
    {
      "key": {
        "uuid": "fe22004c_ee78ec0b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-08-12T20:11:02Z",
      "side": 1,
      "message": "I know you\u0027ve not started the review yet, but since I saw the CL ...\n\nIs your intention to land this, or just have it for local testing?\n\nIf \"land this\", when will you create an Android version of the function?",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4235e782_84c38624",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-12T20:16:38Z",
      "side": 1,
      "message": "\u003e Is your intention to land this, or just have it for local testing?\nland it\n\n\u003e when will you create an Android version of the function?\nas per gni file here -\u003e https://chromium.googlesource.com/angle/angle/+/refs/heads/master/src/libGLESv2.gni#77\nlinux variant is included for android as well, wouldnt that suffice?",
      "parentUuid": "fe22004c_ee78ec0b",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64bc34db_05829435",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-08-12T20:26:02Z",
      "side": 1,
      "message": "\u003e linux variant is included for android as well, wouldnt that suffice?\n\nI actually don\u0027t know.  I remember that we went through some push-ups a while back to get the application name (but we were trying to get the Java strings (e.g. \"com.\u003ccompany\u003e.\u003capp\u003e\").",
      "parentUuid": "4235e782_84c38624",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "63946b5c_b6e8016c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-12T21:07:55Z",
      "side": 1,
      "message": "interesting, i dint want to go via the java route and assumed the linux API will be sufficient on Android, though there is always the fallback to \"ANGLE\" incase something went wrong.",
      "parentUuid": "64bc34db_05829435",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f99b4f12_fca10c3b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-12T22:56:14Z",
      "side": 1,
      "message": "PTAL - need suggestions for Android following Ian\u0027s comment",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90e3480a_6b16d401",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-12T23:07:37Z",
      "side": 1,
      "message": "FYI - my immediate solution is to use \"getprogname()\" which i think Android already supports.\nPlease let me know if you guys have an alternative",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "232186e4_c7fd039f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-12T23:26:52Z",
      "side": 1,
      "message": "Does this work on Android?",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b3ae98c1_9c1a811b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-12T23:44:23Z",
      "side": 1,
      "message": "it does but we get something dumb like \"app_process64\" when tested on an end2end test. im hoping when i do a -\n    #if ANDROID (getprogname();)\n\ni get a more meaningful name",
      "parentUuid": "232186e4_c7fd039f",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df5e2e3e_80d38c1a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-13T00:38:17Z",
      "side": 1,
      "message": "I\u0027ve sent an email to our internal Android eng group to see what they recommend for how to get the package name in native code.   I\u0027ll pass along anything useful.\n\nIn the meantime, can you try this with something like Angry Birds to see what you get?",
      "parentUuid": "b3ae98c1_9c1a811b",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83ed6793_ec2feb51",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-13T16:24:30Z",
      "side": 1,
      "message": "The response from our mailing list is that we should update the framework code to pass down the package name to ANGLE.   We do some of this already:\n\nhttps://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/os/GraphicsEnvironment.java\n- This gets the package name and passes it to native code via JNI.\nhttps://android.googlesource.com/platform/frameworks/native/+/master/libs/graphicsenv/GraphicsEnv.cpp#\n- Opens ANGLE\u0027s libfeature_support.so and passes it the package name to compare against the rules file.\n\nIn particular, GraphicsEnv::setAngleInfo() includes setting the current package name on the C++ side, so we can call into ANGLE\u0027s libfeature_support.so via ANGLEShouldBeUsedForApplication() with the package name.\n\nFor Android, we will likely need to do something similar.",
      "parentUuid": "df5e2e3e_80d38c1a",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b12a54b9_518bc95b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-13T18:06:32Z",
      "side": 1,
      "message": "tim, all - ran this patch on a pixel device for all apps possible and this was the output of using getprogname() and i think this is more than sufficient -\n\ngetprogname(): /system/bin/bootanimation\ngetprogname(): com.android.systemui\ngetprogname(): com.android.launcher3\ngetprogname(): system_server\ngetprogname(): com.android.launcher3\ngetprogname(): com.rovio.angrybirds\n\nWDYT?",
      "parentUuid": "83ed6793_ec2feb51",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33f2cbac_09221e87",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-13T18:11:58Z",
      "side": 1,
      "message": "It sounds like a good idea to use getprogname as a placeholder at least until we get the system APIs in place. I see no reason to delay this implementation.",
      "parentUuid": "b12a54b9_518bc95b",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7f949c3_57a34984",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2020-08-13T18:27:53Z",
      "side": 1,
      "message": "Cool, glad to hear it works.   We can look into the framework changes if we hit any problems later.",
      "parentUuid": "33f2cbac_09221e87",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe3b939c_921c2b0b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-08-13T18:31:48Z",
      "side": 1,
      "message": "That seems pretty good.  It looks like it\u0027s getting both the name of Java-based APKs as well as native executuables (bootanimation).\n\nAgree with Tim ... can do framework changes later, if we need them.",
      "parentUuid": "33f2cbac_09221e87",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea217735_65293b26",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-13T18:45:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe3b939c_921c2b0b",
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b0f0d40_e6412b70",
        "filename": "src/common/system_utils_linux.cpp",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-12T23:26:52Z",
      "side": 1,
      "message": "you can put these all in system_utils.cpp and use GetPathSeparator",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06d243c6_c5ce5006",
        "filename": "src/common/system_utils_linux.cpp",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-12T23:44:23Z",
      "side": 1,
      "message": "yup, makes sense. will do that for all platforms other than linux because for linux i want to do the above mentioned #ifdef",
      "parentUuid": "2b0f0d40_e6412b70",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ac11a71_8dfb4910",
        "filename": "src/common/system_utils_linux.cpp",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-08-12T23:47:18Z",
      "side": 1,
      "message": "#ifdef plan sounds fine to me. I\u0027ve never seen the getprogname API before.",
      "parentUuid": "06d243c6_c5ce5006",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53d33e1f_599ffce9",
        "filename": "src/common/system_utils_linux.cpp",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2020-08-12T23:48:31Z",
      "side": 1,
      "message": "https://cs.android.com/android/platform/superproject/+/master:bionic/libc/include/stdlib.h?q\u003dgetprogname",
      "parentUuid": "3ac11a71_8dfb4910",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "111170600f5cf4487c85055bb3fc13a6b33c7fed",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}