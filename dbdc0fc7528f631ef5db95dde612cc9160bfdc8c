{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1fd3d16d_93b77cb7",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-07-08T20:36:43Z",
      "side": 1,
      "message": "the overloading of two types here is going to lead to confusion down the road. Can we design this such that the \"external format\" (uint64_t, maybe should be a strongly typed wrapper class) is treated as an entirely different type from a VkFormat? i.e. don\u0027t assume they are interchangeable.",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af925724_35c2cd86",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2021-07-08T21:31:49Z",
      "side": 1,
      "message": "The program and context modules dont need to know the distinction between an immutable sampler tied to an external format vs. a VkFormat. In fact i would go as far as to say they **should** not know there exists such a distinction. All they need to know if is the pipeline or texture needs an immutable sampler and if so some key to uniquely identify such a sampler.\n\n\u003e is treated as an entirely different type from a VkFormat?\n\ncan you provide some info on what value is added by making such a distinction when all the functionality (except descriptor count query) is common to both?",
      "parentUuid": "1fd3d16d_93b77cb7",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efd03b05_9c80c445",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-07-09T18:49:13Z",
      "side": 1,
      "message": "it\u0027s like storing a blend state or a depth state as a uint32_t. what exactly is the external format? It\u0027s an AHB format or something? I think you should keep the two types distinct. There\u0027s a theoretical risk that there could be a value collision if my understanding is correct.",
      "parentUuid": "af925724_35c2cd86",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b37dc39_c71ff1d8",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2021-07-09T21:58:22Z",
      "side": 1,
      "message": "\u003e what exactly is the external format?\n\non android it is AHB formats, other platforms will have platform specific formats\n\nbut i see your point about collisions. Will create 2 methods, 1 for external and 1 for VkFormat, each with its own map as well.\n\nAny other modifications?",
      "parentUuid": "efd03b05_9c80c445",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "825bbc81_c515093f",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-07-12T12:37:22Z",
      "side": 1,
      "message": "No other requests to the first CL right now. Once you update it ping me and I\u0027ll approve (unless I missed something big)",
      "parentUuid": "3b37dc39_c71ff1d8",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d90dbe2d_e843de7e",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2021-07-12T22:44:37Z",
      "side": 1,
      "message": "first 2 changes are modified\n\nThere are still a few places where i call this method \"getImmutableSamplerFormat\" -\n1. to populate \"mSupportedImmutableSamplerFormatIndexMap\"\n2. when dealing with SamplerDesc\n\nDo you want separate paths in all those places as well?",
      "parentUuid": "825bbc81_c515093f",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7533969_97e74c3d",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-07-14T13:16:35Z",
      "side": 1,
      "message": "Yeah, I\u0027d use 1 bit for \"isExternalFormat\" in the samplerDesc, then I\u0027d use the other 63 bits for externalOrVkFormat (or whatever names are the most precise)\n\nI forget what mSupportedImmutableSamplerFormatIndexMap is. Does that need to know about both external and VkFormats?",
      "parentUuid": "d90dbe2d_e843de7e",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e62ec6e0_097cfbf3",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.h",
        "patchSetId": 25
      },
      "lineNbr": 288,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2021-07-15T19:31:05Z",
      "side": 1,
      "message": "\u003e I\u0027d use 1 bit for \"isExternalFormat\" in the samplerDesc, then I\u0027d use the other 63 bits for externalOrVkFormat\n\nany reason we cant do 64bits dedicated to format and 1bit for \"isExternalFormat\" and leave the other 63bits reserved?\n\n\u003e I forget what mSupportedImmutableSamplerFormatIndexMap is. Does that need to know about both external and VkFormats?\n\nif an immutable sampler bound to an index changes across draws we need to recreate the pipeline layout. So, yes it will need to know about both external and VkFormats",
      "parentUuid": "b7533969_97e74c3d",
      "range": {
        "startLine": 283,
        "startChar": 0,
        "endLine": 288,
        "endChar": 5
      },
      "revId": "dbdc0fc7528f631ef5db95dde612cc9160bfdc8c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}