{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f9acc0c2_16f9f9d0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-15T22:33:24Z",
      "side": 1,
      "message": "Fixes we have found. Once added the api_dump looks a lot better\n\nFYI:\nAlso dEQP-EGL.functional.mutable_render_buffer.basic is failing. it does a glClear and glReadPixels and not getting what is expected.",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "036423c4_16c7e297",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-15T23:29:30Z",
      "side": 1,
      "message": "added note",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb0335f7_d372198c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-16T16:03:20Z",
      "side": 1,
      "message": "Question below about correct command for transitioning new image to SharedPresent. \n\nCurrent OneOffCommand isn\u0027t working and maybe isn\u0027t the right thing to use.",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0e014df_5e39ac1b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-16T18:10:04Z",
      "side": 1,
      "message": "Shahbaz, should the acquireImageSemaphore/mAcquireImageSemaphore be used to block draws until signaled? I can not find that anywhere. Isn\u0027t that where we want to add the barrier to transition to SharedPresent?\nPlease correct me. I\u0027m suspecting the OneOffCommand is not the right thing to use.",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d0df4646_13be0c84",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1748,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-15T22:33:24Z",
      "side": 1,
      "message": "if ((mSwapchainPresentMode \u003d\u003d VK_PRESENT_MODE_SHARED_DEMAND_REFRESH_KHR) \u0026\u0026\n        (image.image.getCurrentLayout !\u003d vk::ImageLayout::SharedPresent))",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "beade09a_44521548",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1752,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-16T16:03:20Z",
      "side": 1,
      "message": "Please comment:\nSince we are in context, we probably shouldn\u0027t use a OneOffCommandBuffer ?\nA barrier needs to be added, but after the semaphore is used to block draws until signaled. Right?\nneed a recordWriteBarrier(), but were buffer is accessible.?",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2029aaca_859b35cb",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1752,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-11-16T21:32:12Z",
      "side": 1,
      "message": "We don\u0027t have a \"ContextVk\", but a vk::Context. vk::Context is really just a wrapper for RendererVk, so yes we do need OneOffCB.\n\nI didn\u0027t understand your second question. There\u0027s already a barrier added below (recordWriteBarrierOneOff). The barrier is recorded in the command buffer (CB), and the semaphore is used to block the running of that CB. So the ordering is ok here.",
      "parentUuid": "beade09a_44521548",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5cc9dd41_9b1b13b8",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1765,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-15T22:33:24Z",
      "side": 1,
      "message": "It seems this acquireImageSemaphore is not being signaled. Getting 120 sec timeout.",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ea21f88_0aebcd3f",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1765,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-15T23:29:30Z",
      "side": 1,
      "message": "replacing acquireImageSeamphore with nullptr and the api_dump looks OK",
      "parentUuid": "5cc9dd41_9b1b13b8",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4140143d_dc6863ad",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1765,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-11-16T21:32:12Z",
      "side": 1,
      "message": "Is vkAcquireNextImage (ANI) still necessary with this present mode? Could ANGLE acquire the image once, and keep it forever? I don\u0027t know the Vulkan extension well enough.",
      "parentUuid": "0ea21f88_0aebcd3f",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29ac34b2_6ed72618",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1772,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-15T22:33:24Z",
      "side": 1,
      "message": "remove.",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88429539_87b82bc6",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1773,
      "author": {
        "id": 1359249
      },
      "writtenOn": "2021-11-15T22:33:24Z",
      "side": 1,
      "message": "This doesn\u0027t seem to matter, and seems like it needs to be removed?",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bcabfb22_197b19bb",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 14
      },
      "lineNbr": 1773,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2021-11-16T21:32:12Z",
      "side": 1,
      "message": "Should be done if you use it in queueSubmitOneOff above, otherwise another submission may also want to wait on the same semaphore and deadlock.",
      "parentUuid": "88429539_87b82bc6",
      "revId": "e664cb7a424526a6ec8833f970fbf86d4c4f8a9b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}