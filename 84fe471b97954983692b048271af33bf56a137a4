{
  "comments": [
    {
      "key": {
        "uuid": "dd88b1e0_452f0d4e",
        "filename": "src/libANGLE/Framebuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 1165541
      },
      "writtenOn": "2017-05-26T09:36:32Z",
      "side": 1,
      "message": "I think the right fixing position should be here. Change it like below:\nif ((samples-\u003evalue() !\u003d 0 )\u0026\u0026 ((attachment.getSamples() % samples-\u003evalue()) !\u003d 0))\n\nAnd keep line 138 unchanged.\n\nIn your current fix, it will result that you never go to line 124 even *sample \u003d0 and attachment.getSamples() !\u003d samples-\u003evalue() and context-\u003egetExtensions().framebufferMixedSamples \u003d false.\n\nFor example, if all color attachments\u0027s samples are 0, depth attachment\u0027s samples is 4. But context-\u003egetExtensions().framebufferMixedSamples \u003d false. The original logic will go to line 125 and return false.  But your current change will skip it.\n\nAlso it won\u0027t check if the first color attachment is equal to the second attachment if the first \u0027s samples is 0",
      "range": {
        "startLine": 129,
        "startChar": 16,
        "endLine": 129,
        "endChar": 70
      },
      "revId": "84fe471b97954983692b048271af33bf56a137a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d1397f3_80b54b37",
        "filename": "src/libANGLE/Framebuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 1161747
      },
      "writtenOn": "2017-05-27T00:19:47Z",
      "side": 1,
      "message": "You mean the program will go to line 125 just after checking all color attachments and during checking depth attachments in your example?\n\nAt this time sample-\u003evalid is still false because no value was set to *sample yet, so it should jump to line 138 instead of checking if all the sample values are same because the color attachments are not multisampled.\n\nWhen checking depth attachment, the sample is 4, so *sample will be assigned 4 at line 138, then this value can be used to check the stencil attachment, where we can reach line 124.\n\nSo when *sample \u003d0 and attachment.getSamples() !\u003d samples-\u003evalue() and context-\u003egetExtensions().framebufferMixedSamples \u003d false, it is correct logic not to run into line 124.",
      "parentUuid": "dd88b1e0_452f0d4e",
      "range": {
        "startLine": 129,
        "startChar": 16,
        "endLine": 129,
        "endChar": 70
      },
      "revId": "84fe471b97954983692b048271af33bf56a137a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1816524f_dc6deac7",
        "filename": "src/libANGLE/Framebuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 1165541
      },
      "writtenOn": "2017-05-27T01:22:23Z",
      "side": 1,
      "message": "Let\u0027s take a simple example. I assume there are 4 color attachments.  The samples of them are 0, 4, 4, 4.  In your current logic. When check the first color attachment, since the attachment.getSamples is 0, it will not do *samples \u003d currentSamples. So samples-\u003evalid() is still false. Next, we will check the second color attachment, since samples-\u003evalid() is still false, it will go to else and let *samples \u003d 4.  Now samples-\u003evalid() will be true. But in fact, the color attachment 1 and 2 don\u0027t have the same samples. It should return false. However, your current logic will skip it.  So your current fix will change the original logic. And that\u0027t not correct.  Please correct me if I am wrong.",
      "parentUuid": "6d1397f3_80b54b37",
      "range": {
        "startLine": 129,
        "startChar": 16,
        "endLine": 129,
        "endChar": 70
      },
      "revId": "84fe471b97954983692b048271af33bf56a137a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}