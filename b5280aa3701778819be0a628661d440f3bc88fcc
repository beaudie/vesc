{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d3e4e733_a34f6b75",
        "filename": "src/tests/deqp_support/angle_deqp_gtest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 484,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2024-09-16T17:22:33Z",
      "side": 0,
      "message": "Question: how are we going to keep the expectation files up-to-date? For example, if the dEQP test gets renamed, if the dEQP test gets removed, there is no easy way for us to know if the test names listed in the expectation files are still valid, other than having someone run each item in the expectation file and remove them if the test runner says \"0 test ran\".\n\nMaybe it is still better to just let the test process die when there are out-dated entries in the expectation files? People would notice what\u0027s wrong immediately and fix the outdated items in the expectation files.",
      "fixSuggestions": [
        {
          "fixId": "0395b0e8_52f93de2",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "src/tests/deqp_support/angle_deqp_gtest.cpp",
              "range": {
                "startLine": 485,
                "startChar": 0,
                "endLine": 485,
                "endChar": 0
              },
              "replacement": "// TODO(jplate) Add a mechanism to keep the test expectations up to date.\n"
            }
          ]
        }
      ],
      "revId": "b5280aa3701778819be0a628661d440f3bc88fcc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac236b6a_ff38982b",
        "filename": "src/tests/deqp_support/angle_deqp_gtest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 484,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-09-16T17:52:17Z",
      "side": 0,
      "message": "I too would prefer a better solution but:\n\nThis is only one case of \"bad\" expectations. A test might be passing now but still say fail in the expectation. A pattern might be too broad. The case of an unused expectation might be the least problematic of all?..\n\nLetting the suite die is also not great because when a test is renamed we won\u0027t see the newly failing tests, we would just see an \"unused expectation\" crash.\n\nAlso I described my reasoning on why I dislike manual rolls, which crashing on unused expectations forces, on the previous CL (we might disagree on the weight of this but the point is still there): https://chromium-review.googlesource.com/c/angle/angle/+/5238992/comments/5d250be2_d3062a94",
      "parentUuid": "d3e4e733_a34f6b75",
      "revId": "b5280aa3701778819be0a628661d440f3bc88fcc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f811ecdf_a64a52a0",
        "filename": "src/tests/deqp_support/angle_deqp_gtest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 484,
      "author": {
        "id": 1520902
      },
      "writtenOn": "2024-09-16T18:33:08Z",
      "side": 0,
      "message": "\u003e A test might be passing now but still say fail in the expectation.\n\nWe do have logs showing [mismatching expectations](https://source.chromium.org/chromium/chromium/src/+/main:third_party/angle/src/tests/deqp_support/angle_deqp_gtest.cpp;l\u003d569;drc\u003d59f6d962e6c88f011b8dcc044f5637ab7ffb7710), although it won\u0027t flag crashing / alert on bot so no one is actively cleaning up the mismatch expectations.\n\n\u003e Letting the suite die is also not great because when a test is renamed we won\u0027t see the newly failing tests, we would just see an \"unused expectation\" crash.\n\nI think in that case, people will have remove the unused expectation entry, re-upload CL, and then they will see the newly failing tests?\n\n\u003e Also I described my reasoning on why I dislike manual rolls, which crashing on unused expectations forces, on the previous CL.\n\nOk, it is probably a minor thing comparing to other work we need to do.",
      "parentUuid": "ac236b6a_ff38982b",
      "revId": "b5280aa3701778819be0a628661d440f3bc88fcc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}