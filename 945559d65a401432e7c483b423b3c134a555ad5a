{
  "comments": [
    {
      "key": {
        "uuid": "ca05662e_85e4d72a",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1249,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-10-07T15:39:56Z",
      "side": 1,
      "message": "We reserve a couple uniform buffers for emulation, and we\u0027ll need to take that into account.  See kTotalReservedPerStageUniformBuffers in vk_caps_utils.cpp, we\u0027ll need to turn that into a constant in the header so it can be used here too.",
      "range": {
        "startLine": 1242,
        "startChar": 0,
        "endLine": 1249,
        "endChar": 5
      },
      "revId": "945559d65a401432e7c483b423b3c134a555ad5a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46ae5b3c_c96734e0",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1249,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2019-10-07T16:43:17Z",
      "side": 1,
      "message": "Good catch.   Based on the following it looks like I need to check against mNativeCaps.maxShaderUniformBlocks[shaderType]:\n\n    const uint32_t maxPerStageUniformBuffers \u003d\n        limitsVk.maxPerStageDescriptorUniformBuffers - kTotalReservedPerStageUniformBuffers;\n    for (gl::ShaderType shaderType : gl::AllShaderTypes())\n    {\n        mNativeCaps.maxShaderUniformBlocks[shaderType] \u003d maxPerStageUniformBuffers;\n    }",
      "parentUuid": "ca05662e_85e4d72a",
      "range": {
        "startLine": 1242,
        "startChar": 0,
        "endLine": 1249,
        "endChar": 5
      },
      "revId": "945559d65a401432e7c483b423b3c134a555ad5a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10b9f7d0_a52109d8",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1249,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-10-07T20:28:52Z",
      "side": 1,
      "message": "Yes, that sounds right.",
      "parentUuid": "46ae5b3c_c96734e0",
      "range": {
        "startLine": 1242,
        "startChar": 0,
        "endLine": 1249,
        "endChar": 5
      },
      "revId": "945559d65a401432e7c483b423b3c134a555ad5a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a5a4ec3_301f8a22",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1256,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-10-07T15:39:56Z",
      "side": 1,
      "message": "Same as above but kReservedVaryingCount",
      "range": {
        "startLine": 1251,
        "startChar": 0,
        "endLine": 1256,
        "endChar": 5
      },
      "revId": "945559d65a401432e7c483b423b3c134a555ad5a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "354e1ed0_f4d0534a",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1256,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2019-10-07T16:43:17Z",
      "side": 1,
      "message": "Relevant code:\n\n    constexpr GLint kReservedVaryingCount \u003d 2;\n    mNativeCaps.maxVaryingVectors \u003d\n        (limitsVk.maxVertexOutputComponents / 4) - kReservedVaryingCount;\n    mNativeCaps.maxVertexOutputComponents \u003d mNativeCaps.maxVaryingVectors * 4;",
      "parentUuid": "3a5a4ec3_301f8a22",
      "range": {
        "startLine": 1251,
        "startChar": 0,
        "endLine": 1256,
        "endChar": 5
      },
      "revId": "945559d65a401432e7c483b423b3c134a555ad5a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cada00f_63779e5d",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1256,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-10-07T20:28:52Z",
      "side": 1,
      "message": "Yea, there are two caps here, you would have to multiply kReservedVaryingCount by 4 before comparing it to the component count.",
      "parentUuid": "354e1ed0_f4d0534a",
      "range": {
        "startLine": 1251,
        "startChar": 0,
        "endLine": 1256,
        "endChar": 5
      },
      "revId": "945559d65a401432e7c483b423b3c134a555ad5a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44f39a7a_cbbdfe2d",
        "filename": "src/libANGLE/renderer/vulkan/RendererVk.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1256,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2019-10-07T22:44:05Z",
      "side": 1,
      "message": "With this latest patchset, I\u0027m just comparing directly to mNativeCaps.maxVertexOutputComponents which already does the *4 (after accounting for kReservedVaryingCount), so I think it should be good.",
      "parentUuid": "0cada00f_63779e5d",
      "range": {
        "startLine": 1251,
        "startChar": 0,
        "endLine": 1256,
        "endChar": 5
      },
      "revId": "945559d65a401432e7c483b423b3c134a555ad5a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}