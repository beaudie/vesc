{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "434aad5b_2810db4b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-06-28T23:42:31Z",
      "side": 1,
      "message": "I am also not 100% sure if this pipelineBarrier is required, but I a am a bit paranoid to remove it completely, since any bug arise from  it will be very hard to debug. We do allow driver to do out of order execution between two submissions, there is no barrier against that. So in theory it is still possible that the wait context might get executed before sync context finishes execution, but not sure if it occurs what damage could be since we do have memory barriers issued for resources. Anyway, this CL just try to reduce the barrier by only add pipeline stages that could possibly used, which appears enough for asphalt_9 to reduce it to minimum (it only uses transfer in one context and then in another context it try to waitSync).",
      "revId": "f8ded27ab1705ad7f71ff8493a2eb08810b2c06c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa705396_802564f7",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 7663,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-06-29T01:39:50Z",
      "side": 1,
      "message": "I\u0027m not sure this is actually correct. Take this scenario:\n\n1. Context 1 do X\n2. Context 1 insert fence\n3. Context 2 server wait \u003c-- will barrier against X according to the above\n\nNow imagine after step 2 there\u0027s a command buffer flush. Now at step 3 server wait doesn\u0027t issue a barrier anymore. But the fact that Context 1\u0027s commands are pending or not have no bearings on the barriers needed for Context 2.",
      "revId": "f8ded27ab1705ad7f71ff8493a2eb08810b2c06c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2805fd2e_3cf778aa",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 7663,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2023-06-29T19:54:34Z",
      "side": 1,
      "message": "Agree, taking this CL back.",
      "parentUuid": "aa705396_802564f7",
      "revId": "f8ded27ab1705ad7f71ff8493a2eb08810b2c06c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}