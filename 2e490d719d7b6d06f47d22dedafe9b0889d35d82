{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "21e16a82_61546f35",
        "filename": "src/tests/gl_tests/BlitFramebufferANGLETest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1228974
      },
      "writtenOn": "2022-01-03T13:05:29Z",
      "side": 1,
      "message": "Shahbaz Youssefi, you mentioned we need the following tests (copying these requirements from https://chromium-review.googlesource.com/c/angle/angle/+/3329603/4..11/src/tests/gl_tests/FramebufferTest.cpp#b3691 -\n\n  - The drawing tests are all over the place, any would do. Can use the essl1_shaders::fs::Checkered() shader to make sure flip is working.\n  - The blit/resolve stuff can be found in BlitFramebufferANGLETest.cpp\n  - The copy tex image stuff can be found in CopyTexImageTest.cpp\n  - glCopyTextureCHROMIUM and glCopySubTextureCHROMIUM (see tests in CopyTextureTest.cpp)\n  - Also to make sure sub-copy offsets are adjusted correctly, need to test glCopyTexSubImage too.\n\nIn this CL, I added tests to BlitFramebufferANGLETest that exercise blit with y-flip flag set. Also, I added one test to FramebufferTest_ES31 to test drawing with further multisampling and y-flip flag (I hope this suits into the requirement for drawing test).\n\nBut I have doubts about other tests in with glCopyTexImage, glCopyTexSubImage, glCopyTextureCHROMIUM, and glCopySubTextureCHROMIUM. Can you suggest any particular tests that I can reuse? For example, I tried to reuse the CopyTexImageTest.RGBAToRGB (see RGBAToRGBWithMesaFlipY in this CL) test and kept the same expected result as the original test, but applied the y-flip flag.... And the test passed. I thought it should fail when the result is verified.",
      "revId": "2e490d719d7b6d06f47d22dedafe9b0889d35d82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4fe525bb_fd982e9d",
        "filename": "src/tests/gl_tests/BlitFramebufferANGLETest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-01-03T20:19:19Z",
      "side": 1,
      "message": "For the copy tests, you are on the right track. Unfortunately the tests are terrible in that they have the fbos cleared to uniform colors so flipped or not the copy result is the same.\n\nYou\u0027d need to add a checkered draw after initializeResources (and add helpers that check for those colors instead of the existing helpers).\n\n---\n\nAnd for blit, please don\u0027t forget about integer and depth/stencil too, they are often neglected and end up being buggy.",
      "parentUuid": "21e16a82_61546f35",
      "revId": "2e490d719d7b6d06f47d22dedafe9b0889d35d82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5915396c_66562179",
        "filename": "src/tests/gl_tests/BlitFramebufferANGLETest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1228974
      },
      "writtenOn": "2022-01-07T14:29:46Z",
      "side": 1,
      "message": "\u003e And for blit, please don\u0027t forget about integer and depth/stencil too, they are often neglected and end up being buggy.\n\nI added depth/stencil tests too. Though, I don\u0027t understand what you mean by the \"integer\" test. Is that BlitFramebufferSizeOverflow2 one?\n\n\u003e The copy tex image stuff can be found in CopyTexImageTest.cpp\n\nAdded glCopyTextImage test too. Though, glCopyTextureCHROMIUM, glCopySubTextureCHROMIUM and glCopyTexSubImage are still missing. Nevertheless, can you please review the rest and tell me if I\u0027m on the right track? Thanks!",
      "parentUuid": "4fe525bb_fd982e9d",
      "revId": "2e490d719d7b6d06f47d22dedafe9b0889d35d82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ab8be12_27964b7b",
        "filename": "src/tests/gl_tests/BlitFramebufferANGLETest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-01-07T21:41:00Z",
      "side": 1,
      "message": "Thanks. By integer I meant using an integer format instead of unorm. Is integer blit/resolve not allowed in GL?",
      "parentUuid": "5915396c_66562179",
      "revId": "2e490d719d7b6d06f47d22dedafe9b0889d35d82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19bc678b_1d6b8ab4",
        "filename": "src/tests/gl_tests/BlitFramebufferANGLETest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1228974
      },
      "writtenOn": "2022-01-10T15:19:28Z",
      "side": 1,
      "message": "Ok, following https://www.khronos.org/opengl/wiki/Image_Format#Color_formats , I used GL_RGBA8I buffer format with GL_RGBA_INTEGER used an internal buffer format. Please see the BlitFramebufferANGLETest.BlitColorWithMesaYFlipInteger test.",
      "parentUuid": "4ab8be12_27964b7b",
      "revId": "2e490d719d7b6d06f47d22dedafe9b0889d35d82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3e877c6_0050ab3e",
        "filename": "src/tests/gl_tests/BlitFramebufferANGLETest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 505,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-01-10T19:48:26Z",
      "side": 1,
      "message": "Ack, thanks that looks good!",
      "parentUuid": "19bc678b_1d6b8ab4",
      "revId": "2e490d719d7b6d06f47d22dedafe9b0889d35d82",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}