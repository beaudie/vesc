{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "859631d6_f7c7b385",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 21,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-07-25T15:35:08Z",
      "side": 1,
      "message": "It would be good to include this info in the file itself.",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 21,
        "endChar": 54
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d4d8129b_b352c0a7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 21,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "The script has info about what it does but the way test execution is parallelized might be a bit too much of a technical detail for the high-level comment?.. The current comment at the top of the file is still correct, I believe.",
      "parentUuid": "859631d6_f7c7b385",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 21,
        "endChar": 54
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "23a399da_718c05c8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-07-25T15:35:08Z",
      "side": 1,
      "message": "Pretty significant rewrite.  LGTM though.  Running locally, I\u0027m getting some phantom windows after the script completes.  I\u0027ll share the details over chat.",
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a04d6993_f76c1974",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-25T18:34:51Z",
      "side": 1,
      "message": "Thanks",
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03037e50_5358f8ed",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 18,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-07-25T15:35:08Z",
      "side": 1,
      "message": "Is this still accurate?",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 18,
        "endChar": 32
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9eb7b2eb_f6851946",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 18,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "Yes, I think so. This text doesn\u0027t detail the order of operations nor batching, which is what the current CL changes.",
      "parentUuid": "03037e50_5358f8ed",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 18,
        "endChar": 32
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8af8ea7_09cf5f30",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 49,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-25T18:34:51Z",
      "side": 1,
      "message": "Will these two run one after the other? Is `os.stat()` needed?",
      "range": {
        "startLine": 49,
        "startChar": 4,
        "endLine": 49,
        "endChar": 54
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "33e4e683_9ffeb4e0",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 49,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "It\u0027s a copy-paste from other places we use this directory, the idea is that the first part raises:\n```\n\u003e\u003e\u003e os.stat(\u0027/tmp/nofile\u0027)\nTraceback (most recent call last):\n  File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e\nFileNotFoundError: [Errno 2] No such file or directory: \u0027/tmp/nofile\u0027\n```",
      "parentUuid": "e8af8ea7_09cf5f30",
      "range": {
        "startLine": 49,
        "startChar": 4,
        "endLine": 49,
        "endChar": 54
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f44d842_504e6383",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 57,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "One more thing I want to try after discussing with Cody if we can avoid batching for capture as well. Capture now runs as a separate stage so the benefit from batching should be minimal, but it\u0027s also beneficial to have just one test in capture as some of the tests could get stuck or crash sporadically.",
      "range": {
        "startLine": 57,
        "startChar": 22,
        "endLine": 57,
        "endChar": 23
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1060bd26_a66e82b4",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 57,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T22:28:14Z",
      "side": 1,
      "message": "Not entirely sure why, but running capture one by one can be quite a bit slower and add \u003e10 minutes overhead to CI. There is probably something small-ish happening at startup or teardown and it\u0027s adding up over thousands of tests. I\u0027ll poke at it a bit next week, locally on linux with a small set `--gtest_filter\u003d*Blit*/ES3_Vulkan_SwiftShader` I\u0027m seeing a big difference in timing between `--batch-count\u003d8` vs `--batch-count\u003d1` so I might be able to narrow it down.",
      "parentUuid": "7f44d842_504e6383",
      "range": {
        "startLine": 57,
        "startChar": 22,
        "endLine": 57,
        "endChar": 23
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f399129_cb73b349",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 58,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-07-25T15:35:08Z",
      "side": 1,
      "message": "Went from 100 to 1000?",
      "range": {
        "startLine": 58,
        "startChar": 20,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "912d68ae_157c34af",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 58,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "Oops that\u0027s a leftover from when I was increasing the batch count, I changed the CL after that to go back to 8. Going back to 100.",
      "parentUuid": "5f399129_cb73b349",
      "range": {
        "startLine": 58,
        "startChar": 20,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6682cc47_d8f87cb2",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 132,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-07-25T15:35:08Z",
      "side": 1,
      "message": "This could use a comment",
      "range": {
        "startLine": 130,
        "startChar": 0,
        "endLine": 132,
        "endChar": 32
      },
      "fixSuggestions": [
        {
          "fixId": "861659fb_c4a5ce4e",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "src/tests/capture_replay_tests.py",
              "range": {
                "startLine": 130,
                "startChar": 0,
                "endLine": 130,
                "endChar": 0
              },
              "replacement": "                    # Use a random display number to avoid conflicts with other\n                    # processes.\n"
            }
          ]
        }
      ],
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd450bf3_35b65872",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 132,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6682cc47_d8f87cb2",
      "range": {
        "startLine": 130,
        "startChar": 0,
        "endLine": 132,
        "endChar": 32
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce3ac4ce_ca6722a7",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 143,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-25T18:34:51Z",
      "side": 1,
      "message": "Can this be any value?",
      "range": {
        "startLine": 143,
        "startChar": 54,
        "endLine": 143,
        "endChar": 66
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b18a0d3e_3cb323d4",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 143,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "Technically yes, in practice this is what `testing/xfvb.py` uses almost always.",
      "parentUuid": "ce3ac4ce_ca6722a7",
      "range": {
        "startLine": 143,
        "startChar": 54,
        "endLine": 143,
        "endChar": 66
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e357e1f_01bc5098",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 277,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-25T18:34:51Z",
      "side": 1,
      "message": "Suggestion: `HasCaptureProducedRequiredFiles`",
      "range": {
        "startLine": 277,
        "startChar": 4,
        "endLine": 277,
        "endChar": 37
      },
      "fixSuggestions": [
        {
          "fixId": "b6d2d96b_e8e1b291",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "src/tests/capture_replay_tests.py",
              "range": {
                "startLine": 277,
                "startChar": 0,
                "endLine": 278,
                "endChar": 0
              },
              "replacement": "def HasCaptureProducedRequiredFiles(trace_folder_path, test_name):\n"
            },
            {
              "path": "src/tests/capture_replay_tests.py",
              "range": {
                "startLine": 707,
                "startChar": 0,
                "endLine": 708,
                "endChar": 0
              },
              "replacement": "                if HasCaptureProducedRequiredFiles(trace_folder_path, test_name):\n"
            }
          ]
        }
      ],
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "531a549d_cc74be88",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 277,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "Dropped the prefix altogether, just `CaptureProducedRequiredFiles()`",
      "parentUuid": "3e357e1f_01bc5098",
      "range": {
        "startLine": 277,
        "startChar": 4,
        "endLine": 277,
        "endChar": 37
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b805e56_07b03ed2",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 302,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-07-25T15:35:08Z",
      "side": 1,
      "message": "Worth erroring on unrecognized extensions?",
      "range": {
        "startLine": 301,
        "startChar": 0,
        "endLine": 302,
        "endChar": 37
      },
      "fixSuggestions": [
        {
          "fixId": "c8451c0d_d2122758",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "src/tests/capture_replay_tests.py",
              "range": {
                "startLine": 303,
                "startChar": 0,
                "endLine": 303,
                "endChar": 0
              },
              "replacement": "        else:\n            logging.error(\u0027Unexpected file %s\u0027 % f)\n"
            }
          ]
        }
      ],
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a22467d7_d3979384",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 302,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "Can make follow-up improvements if you think we should do some additional checks. Unsure about unrecognized extensions or files. I had an implementation that tried to categorize everything but 1) that wasn\u0027t simpler and 2) context diffs would be one additional case that I hadn\u0027t thought of (as it only comes up during failures), so I decided to keep what we currently have in this CL.",
      "parentUuid": "6b805e56_07b03ed2",
      "range": {
        "startLine": 301,
        "startChar": 0,
        "endLine": 302,
        "endChar": 37
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20f80eb1_95c4631c",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 507,
      "author": {
        "id": 1525982
      },
      "writtenOn": "2024-07-25T18:34:51Z",
      "side": 1,
      "message": "Can this set be another output arg instead?",
      "range": {
        "startLine": 507,
        "startChar": 25,
        "endLine": 507,
        "endChar": 41
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf9713a9_0e87b8da",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 507,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "20f80eb1_95c4631c",
      "range": {
        "startLine": 507,
        "startChar": 25,
        "endLine": 507,
        "endChar": 41
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "365d80c1_3b6e5641",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 604,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-07-25T15:35:08Z",
      "side": 1,
      "message": "Any idea why this is only checking if there are three words?",
      "range": {
        "startLine": 604,
        "startChar": 15,
        "endLine": 604,
        "endChar": 30
      },
      "fixSuggestions": [
        {
          "fixId": "57ad67b7_2ab9beb8",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "src/tests/capture_replay_tests.py",
              "range": {
                "startLine": 604,
                "startChar": 0,
                "endLine": 605,
                "endChar": 0
              },
              "replacement": "            if len(words) \u003e\u003d 3 and words[0] \u003d\u003d RESULT_TAG:\n"
            }
          ]
        }
      ],
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "220c2b70_d76f1741",
        "filename": "src/tests/capture_replay_tests.py",
        "patchSetId": 13
      },
      "lineNbr": 604,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-26T19:52:47Z",
      "side": 1,
      "message": "It\u0027s looking for this: `[\u0027*RESULT\u0027, \u0027BlitFramebufferTest_MultisampleDepthClearWithFenceSync_ES3_Vulkan_SwiftShader\u0027, \u00270\u0027]`\n\nSeems like just `words[0] \u003d\u003d RESULT_TAG` would be sufficient; leaving as is for this CL as that\u0027s how it was.",
      "parentUuid": "365d80c1_3b6e5641",
      "range": {
        "startLine": 604,
        "startChar": 15,
        "endLine": 604,
        "endChar": 30
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3eb1e329_26406479",
        "filename": "src/tests/capture_replay_tests/capture_replay_expectations.txt",
        "patchSetId": 13
      },
      "lineNbr": 227,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-07-23T22:03:25Z",
      "side": 1,
      "message": "These are to be fixed by https://crrev.com/c/5736060",
      "range": {
        "startLine": 227,
        "startChar": 36,
        "endLine": 227,
        "endChar": 41
      },
      "revId": "3d23dae0e3d7858747c8eb5fc655d73be40c7874",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}