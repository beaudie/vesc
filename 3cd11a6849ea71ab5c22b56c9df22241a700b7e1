{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "432bea65_5733575e",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-21T16:33:50Z",
      "side": 1,
      "message": "I\u0027d add FRAGMENT_SHADER too. This is not necessarily true:\n\n\u003e Reading right after swap is unrealistic and results are undefined anyway\n\nUnrealistic, maybe, but not necessarily undefined. When buffer age is queried, we fall back to EGL_BUFFER_PRESERVED basically (due to CTS expectations). The application may very well check the buffer age, blit to another surface and do something on top of it.",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "518d9dab_e420edbc",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T16:36:42Z",
      "side": 1,
      "message": "OK. Will also add this stage.",
      "parentUuid": "432bea65_5733575e",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea01d387_1256bef4",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T16:39:37Z",
      "side": 1,
      "message": "\u003e When buffer age is queried, we fall back to EGL_BUFFER_PRESERVED basically (due to CTS expectations). \n\nAs I understand, we first need to restore contents of the back buffer after swap. This would be transfer or RenderPass. So the first use is still not fragment shader. Or I missing something?",
      "parentUuid": "518d9dab_e420edbc",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8462b860_f8bd4115",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-21T18:57:31Z",
      "side": 1,
      "message": "\u003e As I understand, we first need to restore contents of the back buffer after swap.\n\nNo, we simply don\u0027t invalidate the contents before swap, so on next acquire the content is still there, untouched.",
      "parentUuid": "ea01d387_1256bef4",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab191a87_728ca8b3",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T19:00:50Z",
      "side": 1,
      "message": "\u003e No, we simply don\u0027t invalidate the contents before swap, so on next acquire the content is still there, untouched.\n\nBut the Swapchain image index will be different (unknown) on next acquire. The number of swapchain buffers is unknown to the user.",
      "parentUuid": "8462b860_f8bd4115",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bce5a2ae_b836c195",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-21T19:13:11Z",
      "side": 1,
      "message": "That\u0027s where buffer age comes into play ðŸ˜Š\n\nhttps://registry.khronos.org/EGL/extensions/EXT/EGL_EXT_buffer_age.txt",
      "parentUuid": "ab191a87_728ca8b3",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f7583fd_2d5047a0",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T19:16:09Z",
      "side": 1,
      "message": "Thanks for clearing things up)",
      "parentUuid": "bce5a2ae_b836c195",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d80a9cf1_60d14b08",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T23:55:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2f7583fd_2d5047a0",
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22815a6c_66a4fcd5",
        "filename": "src/tests/egl_tests/EGLSurfaceTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2487,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-21T16:33:50Z",
      "side": 1,
      "message": "Since the test needs visual inspection (and otherwise doesn\u0027t fail), please prefix the name with `DISABLED_`. Then it won\u0027t run on the bots for no reason. Especially because it\u0027s going to take multiple seconds.\n\nYou can still run disabled tests by specifying a gtest flag in the command line.",
      "range": {
        "startLine": 2487,
        "startChar": 23,
        "endLine": 2487,
        "endChar": 41
      },
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7501309_7e53877d",
        "filename": "src/tests/egl_tests/EGLSurfaceTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2487,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T16:36:42Z",
      "side": 1,
      "message": "Thanks. Was also concerned regarding this, but did not know about this trick.",
      "parentUuid": "22815a6c_66a4fcd5",
      "range": {
        "startLine": 2487,
        "startChar": 23,
        "endLine": 2487,
        "endChar": 41
      },
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98c6ef41_ad338c7e",
        "filename": "src/tests/egl_tests/EGLSurfaceTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2487,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T23:28:36Z",
      "side": 1,
      "message": "Can\u0027t run test if add `DISABLED_` even if use `--gtest_also_run_disabled_tests` flag.\nI guess there is a bug somewhere.\n\nI need to update commit message to update information about test. But I\u0027m not sure how disabled test should be written in the `--gtest_filter`:  with `DISABLED_` or without?",
      "parentUuid": "c7501309_7e53877d",
      "range": {
        "startLine": 2487,
        "startChar": 23,
        "endLine": 2487,
        "endChar": 41
      },
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7465dde_709c13cd",
        "filename": "src/tests/egl_tests/EGLSurfaceTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2487,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-21T23:55:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "98c6ef41_ad338c7e",
      "range": {
        "startLine": 2487,
        "startChar": 23,
        "endLine": 2487,
        "endChar": 41
      },
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11eeb9a4_5c305948",
        "filename": "src/tests/egl_tests/EGLSurfaceTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2487,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-22T04:00:06Z",
      "side": 1,
      "message": "Did you put DISABLED_ in the gtest_filter too? It\u0027s still part of the name.\n\nThis works for me (another DISABLED test):\n\n```\n$ ./angle_end2end_tests --gtest_filter\u003dClearTest.DISABLED_ClearReachesWindow/ES2_Vulkan --gtest_also_run_disabled_tests\n```",
      "parentUuid": "d7465dde_709c13cd",
      "range": {
        "startLine": 2487,
        "startChar": 23,
        "endLine": 2487,
        "endChar": 41
      },
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5a2e4496_041172a2",
        "filename": "src/tests/egl_tests/EGLSurfaceTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2487,
      "author": {
        "id": 1564492
      },
      "writtenOn": "2023-02-22T14:41:31Z",
      "side": 1,
      "message": "Yes, like this:\n```\nangle_end2end_tests --gtest_also_run_disabled_tests --gtest_filter\u003dEGLSurfaceTest.DISABLED_RandomClearTearing*\n```\n\nI checked on Android.\n\nToday checked on Windows and it works. But I need to run tests on Android.\n\nFound another flag that worked on Android: `--fast-local-dev`/`--extract-test-list-from-filter`\nThis flags skips `list_tests` on device which ignores `--gtest_also_run_disabled_tests` option.\n```\n      flags \u003d [\n          f for f in self._test_instance.flags if f not in [\n              \u0027--wait-for-debugger\u0027, \u0027--wait-for-java-debugger\u0027,\n              \u0027--gtest_also_run_disabled_tests\u0027\n          ]\n      ]\n```\n\nBut even with `--extract-test-list-from-filter` behavior is strange.\n\nUsing filter `EGLSurfaceTest.DISABLED_RandomClearTearing*` runs all tests however in results they are listed without `DISBLED_` part.\n\nUsing exact name in the filter `EGLSurfaceTest.DISABLED_RandomClearTearing/ES2_Vulkan_NoFixture` tries to run 2 tests (one with `DISBLED_` part and another without). The disabled test name failed to run, but not disabled test name runs OK by actually running DISABLED_ test...\n```\nEGLSurfaceTest.RandomClearTearing/ES2_Vulkan_NoFixture              SUCCESS\nEGLSurfaceTest.DISABLED_RandomClearTearing/ES2_Vulkan_NoFixture     NOTRUN\n```",
      "parentUuid": "11eeb9a4_5c305948",
      "range": {
        "startLine": 2487,
        "startChar": 23,
        "endLine": 2487,
        "endChar": 41
      },
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4d598b13_47a44d91",
        "filename": "src/tests/egl_tests/EGLSurfaceTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2487,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2023-02-22T14:50:00Z",
      "side": 1,
      "message": "Ah ok, the Android runner is special. @romanl@google.com do you happen to know if there\u0027s a way to run disabled tests on Android?\n\nNot a big deal in the end, for local verification we can always remove DISABLED_ locally.",
      "parentUuid": "5a2e4496_041172a2",
      "range": {
        "startLine": 2487,
        "startChar": 23,
        "endLine": 2487,
        "endChar": 41
      },
      "revId": "3cd11a6849ea71ab5c22b56c9df22241a700b7e1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}