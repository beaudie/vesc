{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b174b82c_dc0fd38a",
        "filename": "src/libANGLE/renderer/d3d/FramebufferD3D.cpp",
        "patchSetId": 2
      },
      "lineNbr": 318,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2024-01-15T21:59:43Z",
      "side": 1,
      "message": "The spec says:\n\u003e It is required that the Pixel Shader be able to simultaneously render to at least 8 separate RenderTargets. All of these RenderTargets must be the same type of resource: `Buffer`, `Texture1D[Array]`, `Texture2D[Array]`, `Texture3D`, or `TextureCube`.\n\nThis language does not seem to imply depth/stencil attachments and they cannot be of 3D type anyway.",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 318,
        "endChar": 62
      },
      "revId": "81ea95f559e09c5e17407f4be470bc8e409185ab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ced2301_67240b54",
        "filename": "src/libANGLE/renderer/d3d/FramebufferD3D.cpp",
        "patchSetId": 2
      },
      "lineNbr": 318,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2024-01-16T14:30:41Z",
      "side": 1,
      "message": "That said, running the test new case without the new validation gives the following message:\n\n\u003e The RenderTargetView at slot 0 is not compatible with the DepthStencilView. DepthStencilViews may only be used with RenderTargetViews if the effective dimensions of the Views are equal, as well as the Resource types, multisample count, and multisample quality. The RenderTargetView at slot 0 has (w:4,h:4,as:1), while the Resource is a Texture3D with (mc:1,mq:0). The DepthStencilView has (w:4,h:4,as:1), while the Resource is a Texture2D with (mc:1,mq:0).\n\nSo the assertion is unfortunately correct.\n\nMinor simplification:\n```\nif ((mState.getDepthAttachment() \u0026\u0026 mState.getDepthAttachment()-\u003eisAttached()) || \n    (mState.getStencilAttachment() \u0026\u0026 mState.getStencilAttachment()-\u003eisAttached())\n{\n    hasNon3DtexureAttachment \u003d true;\n}\n```",
      "parentUuid": "b174b82c_dc0fd38a",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 318,
        "endChar": 62
      },
      "revId": "81ea95f559e09c5e17407f4be470bc8e409185ab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8ee98da_facffd15",
        "filename": "src/libANGLE/renderer/d3d/FramebufferD3D.cpp",
        "patchSetId": 2
      },
      "lineNbr": 318,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2024-01-16T20:35:35Z",
      "side": 1,
      "message": "Ah, thanks for noticing that it only affects DS. I\u0027ll update that.",
      "parentUuid": "4ced2301_67240b54",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 318,
        "endChar": 62
      },
      "revId": "81ea95f559e09c5e17407f4be470bc8e409185ab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f3ec656_cef43c88",
        "filename": "src/libANGLE/renderer/d3d/FramebufferD3D.cpp",
        "patchSetId": 2
      },
      "lineNbr": 318,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2024-01-30T08:16:29Z",
      "side": 1,
      "message": "The original logic was correct, just a bit redundant.\n\nIn general, all RTVs/DSVs must have the same resource type but since DSV cannot be of 3D type, the presence of DSV implies 2D.",
      "parentUuid": "d8ee98da_facffd15",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 318,
        "endChar": 62
      },
      "revId": "81ea95f559e09c5e17407f4be470bc8e409185ab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7eaf252b_c60260ad",
        "filename": "src/libANGLE/renderer/d3d/FramebufferD3D.cpp",
        "patchSetId": 2
      },
      "lineNbr": 318,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2024-02-06T18:25:40Z",
      "side": 1,
      "message": "Confirmed locally that you can have mixed 2D/3D color render targets. The limitation is only for color/depth matching.",
      "parentUuid": "d8ee98da_facffd15",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 318,
        "endChar": 62
      },
      "revId": "81ea95f559e09c5e17407f4be470bc8e409185ab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f1f7822_d9ba1de4",
        "filename": "src/libANGLE/renderer/d3d/FramebufferD3D.cpp",
        "patchSetId": 2
      },
      "lineNbr": 318,
      "author": {
        "id": 1394635
      },
      "writtenOn": "2024-02-06T18:39:27Z",
      "side": 1,
      "message": "\u003e you can have mixed 2D/3D color render targets\n\nThe D3D11 spec says otherwise:\n\u003e It is required that the Pixel Shader be able to simultaneously render to at least 8 separate RenderTargets. All of these RenderTargets must be the same type of resource: Buffer, Texture1D[Array], Texture2D[Array], Texture3D, or TextureCube.\n\n\nDo we have a test for the mixed case?",
      "parentUuid": "7eaf252b_c60260ad",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 318,
        "endChar": 62
      },
      "revId": "81ea95f559e09c5e17407f4be470bc8e409185ab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1dfc4d74_572fd27e",
        "filename": "src/libANGLE/renderer/d3d/FramebufferD3D.cpp",
        "patchSetId": 2
      },
      "lineNbr": 318,
      "author": {
        "id": 1130144
      },
      "writtenOn": "2024-03-13T20:06:11Z",
      "side": 1,
      "message": "Unless there is a good reason not to, we should follow what it says in the DirectX 11 spec.",
      "parentUuid": "0f1f7822_d9ba1de4",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 318,
        "endChar": 62
      },
      "revId": "81ea95f559e09c5e17407f4be470bc8e409185ab",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}