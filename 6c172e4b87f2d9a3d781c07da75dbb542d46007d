{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1f4af5b6_9921b4ce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-06-21T16:09:20Z",
      "side": 1,
      "message": "There is an issue with this CL: http://b/232848169#comment11\n\nThe thread that calls eglInitialize then exits which triggers display-\u003eterminate(), but the assumes it can keep using the same display from another thread and crashes trying to use that terminated display.\n\nThe CL says \"on process exit\" in the description but it doesn\u0027t seem to be detecting the process exit correctly and relies on an assumption that turns out to be invalid in some cases like above.\n",
      "revId": "6c172e4b87f2d9a3d781c07da75dbb542d46007d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86a486da_b4fc8e4e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-06-21T16:24:34Z",
      "side": 1,
      "message": "\u003e http://b/232848169#comment11\n\ncant access this\n\n\u003e but the assumes it can keep using the same display from another thread\n\nspec states that a display that has been terminated needs to be initialized before use\n\n\u003e but it doesn\u0027t seem to be detecting the process exit correctly\n\nassuming bionic\u0027s pthread library is correct, process exit is when there are no threads, that issue EGL/GL api calls, left in the process and when the last such thread is terminated (pthread_exit) \"gProcessCleanupRefCount\" value goes to 0. What am i missing?\n\n\u003e and relies on an assumption\n\ncan you specifically state what assumption you are talking about?",
      "parentUuid": "1f4af5b6_9921b4ce",
      "revId": "6c172e4b87f2d9a3d781c07da75dbb542d46007d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}