{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "804b75fe_56a93146",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2022-07-26T14:39:55Z",
      "side": 1,
      "message": "This works on Android, here\u0027s how we use it:\n```\nadb shell mkdir -p /sdcard/chromium_tests_root/third_party/angle/screenshots\n\nout/AndroidDebug/angle_perftests --screenshot-dir /sdcard/chromium_tests_root/third_party/angle/screenshots\n\nadb pull /sdcard/chromium_tests_root/third_party/angle/screenshots\n```\n\nThe destination directory can be changed to any spot writable by the application.  If I have root, I usually write all output to:\n`/data/data/$PACKAGE_NAME/angle_capture`\n\nDo we need to change this if it already works?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ac0170d_4b0fcc5c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-07-26T15:33:55Z",
      "side": 1,
      "message": "How so?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "951717f1_3ade610c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T14:43:46Z",
      "side": 1,
      "message": "Replied on the other thread.",
      "parentUuid": "4ac0170d_4b0fcc5c",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "799342dc_6629b8b7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T14:43:46Z",
      "side": 1,
      "message": "Well.. yeah, I guess it depends on the definition of \"works\"\nWhat I had in mind was compatibility with other flags such as `--isolated-script-test-output`. That flag takes a local, not a device directory, and then is sync\u0027d by the wrappers.\n`--render-test-output-dir` works the same way\n\n`--screenshot-dir` means local directory on other platforms and device directory on Android, unlike the args above. So it can at the very least be confusing.\n\nIs there a reason you would prefer to `adb pull` instead of having this supported by the scripts?",
      "parentUuid": "804b75fe_56a93146",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b0c560d1_5ffb3512",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T19:57:12Z",
      "side": 1,
      "message": "\u003e If the former isn\u0027t supplied, screenshots are written to  --render-test-output-dir .  If only the former is supplied,  --save-screenshots  defaults to on.\n\nSo I did this, thanks Cody. PTAL. README.md is now a mess, of course :]",
      "parentUuid": "799342dc_6629b8b7",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35555741_6d5c0ceb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2022-08-01T16:16:50Z",
      "side": 1,
      "message": "LGTM, thanks for the flexibility!",
      "parentUuid": "b0c560d1_5ffb3512",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f1f51df_45d1c324",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2022-07-26T14:39:55Z",
      "side": 1,
      "message": "Doesn\u0027t switching to this tie us to old scripts we are trying to move away from?\n\nIf not, I\u0027m okay making a change (requires an extra parameter and we\u0027ll need to update all our local docs and scripts), but it will break any other users of the current options.\n\nAlternatively, we could keep the `--screenshot-dir` option, but add the `--save-screenshots` option.  If the former isn\u0027t supplied, screenshots are written to `--render-test-output-dir`.  If only the former is supplied, `--save-screenshots` defaults to on.\n\nThe logic becomes:\n```\nsave-screenshots  screenshot-dir  RESULT\nOFF               OFF             No screenshots\nOFF                ON             Screenshots to screenshot-dir\n ON               OFF             Screenshots to render-test-..\n ON                ON             Screenshots to screenshot-dir\n```",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57fe641d_18d4135b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T14:43:46Z",
      "side": 1,
      "message": "\u003e Doesn\u0027t switching to this tie us to old scripts we are trying to move away from?\n\nOur scripts already support `--render-test-output-dir` and it\u0027s just a matter of an adb pull anyways\nhttps://crsrc.org/c/third_party/angle/src/tests/py_utils/android_helper.py;drc\u003db7bd08080eae29404afc1440038a198268f11d92;l\u003d325\n\n\u003e will break any other users of the current options.\nI was wondering if many people actually use `--screenshot-dir`.. there\u0027s always the trade off between keeping legacy as is and improving consistency so sometimes breaking users is the lesser evil (not saying it\u0027s necessarily the case here though)",
      "parentUuid": "1f1f51df_45d1c324",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "acb5112a_768912b5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T15:04:23Z",
      "side": 1,
      "message": "(also note how readme says that `--render-test-output-dir\u003ddir` is equivalent to `--screenshot-dir dir` which isn\u0027t true on Android as in the first case it\u0027s a local dir and in the second case it\u0027s a device dir)",
      "parentUuid": "57fe641d_18d4135b",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6b45a5c_3075b423",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-07-27T15:57:30Z",
      "side": 1,
      "message": "Will getting off of Chrome\u0027s test_runner.py solve any of this confusion/complexity?",
      "parentUuid": "acb5112a_768912b5",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06d0dd18_3cc57108",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2022-07-27T16:19:50Z",
      "side": 1,
      "message": "\u003e I was wondering if many people actually use  --screenshot-dir\nI actually have hundreds of documents and scripts that use this flag (I like to maintain copy/pasteable instructions for folks to use).\n\nIt is also intuitive to understand what the flag does, and it pairs well with `--screenshot-frame`.\n\nI don\u0027t know whether downstream users are using it, but I\u0027ve pointed a number of partners to our public documentation.  Changes like this invalidate email and chat discussions we\u0027ve had explaining how to use it, so I\u0027d prefer not to break it.",
      "parentUuid": "b6b45a5c_3075b423",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3e1c8ad_0307c8e2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T16:26:24Z",
      "side": 1,
      "message": "\u003e Will getting off of Chrome\u0027s test_runner.py solve any of this confusion/complexity?\n\nI don\u0027t think so. Android\u0027s test execution model is fundamentally different from other platforms so we have local vs device path and have to handle it one way or another. Chrome infra expects `--isolated-script-test-output` and `--render-test-output-dir` to be local directories, not device directories, so that would still need to be handled somewhere.\n\nThe same applies to `--custom-dir-flag` which could mean \"where the test is running\" (\"device dir\") or \"where the script is running\" (local dir), and so we end up with a special case for Android again where those two are different entities. Except that there is no special handling for custom flags built into Android runner.\n\n\u003e I actually have hundreds of documents and scripts that use this flag\n\nFair enough, I\u0027ll just try to clarify it as much as I can then and find a way to turn screenshots off, will try `--screenshot-dir` enabling `--save-screenshots` as you suggested.",
      "parentUuid": "06d0dd18_3cc57108",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a4b428c_399cf706",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-07-27T16:43:48Z",
      "side": 1,
      "message": "Is the real problem you\u0027re trying to fix is that ANGLE generates screenshots when you don\u0027t want it to?\n\nMaybe use an --isolated-out-dir or --test-artifacts-dir parameter?",
      "parentUuid": "06d0dd18_3cc57108",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a55b802_c6e3e61c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T17:09:18Z",
      "side": 1,
      "message": "\u003e Is the real problem you\u0027re trying to fix is that ANGLE generates screenshots when you don\u0027t want it to?\n\nThe original problem that I was solving was that, yes. Then I found another problem, `--screenshot-dir` vs `--render-test-output-dir` confusion in the readme which led to this proposal.\n\n`--isolated-out-dir` and `--test-artifacts-dir` are passed as is to the Android runner, so they would mean device dir not local dir (unlike `--render-test-output-dir`)\n\nA slightly differently spelled `--isolated-outdir` (as spelled here https://crsrc.org/c/third_party/angle/src/tests/test_utils/runner/TestSuite.cpp;drc\u003dfa377995b81fa004eae7e39ea7fd97ffd983991b;l\u003d49) seems to be lost from args in test app altogether. Not sure what that one is supposed to do, maybe passing info to the runner rather than the test app.\n\nAlso, TestSuite conflates `--isolated-outdir` and `--render-test-output-dir` into `mTestArtifactDirectory`\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/angle/src/tests/test_utils/runner/TestSuite.cpp;drc\u003dfa377995b81fa004eae7e39ea7fd97ffd983991b;l\u003d1321-1322\nNot sure if that\u0027s what you meant instead of `--test-artifacts-dir`, the references I can find `--test-artifacts-dir` all seem to be webrtc specific.",
      "parentUuid": "3a4b428c_399cf706",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "add42789_66ea7b71",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-07-27T17:18:03Z",
      "side": 1,
      "message": "OK, I was just wondering if there\u0027s a better way to specify \"I want this to be my test artifacts directory\" in a way that doesn\u0027t trigger getting screenshots.",
      "parentUuid": "4a55b802_c6e3e61c",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "264a036c_608d5e40",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2022-07-27T19:57:12Z",
      "side": 1,
      "message": "Yeah I\u0027m not sure there is another way; note that --render-test-output-dir *is* the \"rendering artifacts\" directory https://crsrc.org/c/build/android/test_runner.py;drc\u003d7369e42247b7d39d3a29521700dcb39582400463;l\u003d388",
      "parentUuid": "add42789_66ea7b71",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "ca2bbe4b094cfe3076a3db8055eedf0f15e33ae5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}