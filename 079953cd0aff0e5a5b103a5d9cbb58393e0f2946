{
  "comments": [
    {
      "key": {
        "uuid": "fb05f987_e7e89ace",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-11-21T15:02:28Z",
      "side": 1,
      "message": "I think the real fix is to make sure that activeGPUIndex is always valid.  I think we could set it\u0027s default value to 0 here: https://cs.chromium.org/chromium/src/third_party/angle/src/gpu_info_util/SystemInfo.h?dr\u003dC\u0026g\u003d0\u0026l\u003d63\n\nThere is already a bunch of code scattered around Chrome that checks if it\u0027s -1 and uses 0 instead.",
      "range": {
        "startLine": 259,
        "startChar": 0,
        "endLine": 261,
        "endChar": 71
      },
      "revId": "079953cd0aff0e5a5b103a5d9cbb58393e0f2946",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "abd509d7_380863ca",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1326275
      },
      "writtenOn": "2019-11-21T15:24:23Z",
      "side": 1,
      "message": "I agree, looks like it\u0027s been this way since 2017 but I can\u0027t find an actual reason behind using -1",
      "parentUuid": "fb05f987_e7e89ace",
      "range": {
        "startLine": 259,
        "startChar": 0,
        "endLine": 261,
        "endChar": 71
      },
      "revId": "079953cd0aff0e5a5b103a5d9cbb58393e0f2946",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "885237de_a3677420",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2019-11-22T00:42:16Z",
      "side": 1,
      "message": "Would it make sense to do that as a follow-up or would you prefer to go straight there? The reason it might make sense to do it separately is that affects more code in the stack. Shortly after this CL lands, _LIBCPP_DEBUG\u003d0 will be enforced, which means if there was something we\u0027d missed, it will be difficult to revert.\n\nIt also looks like systemInfo.gpus might be empty, in which case an unguarded index like this function still doesn\u0027t work. No GPUs would mean activeGPUIndex may still be invalid. -1 gives a signal for invalidity that initializing to zero wouldn\u0027t.\nhttps://cs.chromium.org/chromium/src/gpu/config/gpu_info_collector.cc?rcl\u003db9ba992955b39ead9251fa625eb5ceb0ac4351b9\u0026l\u003d360\n\n(I\u0027m just asking this to double-check. I know nothing about this code, so I have no opinions apart from memory errors and what little I can infer from surrounding code. Whatever you all think is correct works for me.)",
      "parentUuid": "abd509d7_380863ca",
      "range": {
        "startLine": 259,
        "startChar": 0,
        "endLine": 261,
        "endChar": 71
      },
      "revId": "079953cd0aff0e5a5b103a5d9cbb58393e0f2946",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ec4bfc0_f4ec527b",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-11-25T15:37:27Z",
      "side": 1,
      "message": "Yea, I think it makes sense to do the the suggested fix now.  It\u0027s a bug that some of our platforms don\u0027t change it to 0 and then a bunch of clients work around this by changing it to 0. \n\nIf systemInfo.gpus is zero sized, other code should catch this.",
      "parentUuid": "885237de_a3677420",
      "range": {
        "startLine": 259,
        "startChar": 0,
        "endLine": 261,
        "endChar": 71
      },
      "revId": "079953cd0aff0e5a5b103a5d9cbb58393e0f2946",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ed452ec_cc69b27f",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2019-11-27T16:50:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7ec4bfc0_f4ec527b",
      "range": {
        "startLine": 259,
        "startChar": 0,
        "endLine": 261,
        "endChar": 71
      },
      "revId": "079953cd0aff0e5a5b103a5d9cbb58393e0f2946",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ddce7b7c_f0872e29",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 1
      },
      "lineNbr": 261,
      "author": {
        "id": 1001604
      },
      "writtenOn": "2019-12-10T15:51:30Z",
      "side": 1,
      "message": "Looks like this didn\u0027t actually work. This line still needs to check that systemInfo.gpus was zero sized. See https://chromium-review.googlesource.com/c/angle/angle/+/1959488.",
      "parentUuid": "0ed452ec_cc69b27f",
      "range": {
        "startLine": 259,
        "startChar": 0,
        "endLine": 261,
        "endChar": 71
      },
      "revId": "079953cd0aff0e5a5b103a5d9cbb58393e0f2946",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}