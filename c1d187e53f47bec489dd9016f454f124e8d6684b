{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a5abe196_a4e2a7fb",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3476,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-26T21:43:53Z",
      "side": 1,
      "message": "ref",
      "range": {
        "startLine": 3476,
        "startChar": 4,
        "endLine": 3476,
        "endChar": 49
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15470daa_082e51a2",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3476,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-27T18:10:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a5abe196_a4e2a7fb",
      "range": {
        "startLine": 3476,
        "startChar": 4,
        "endLine": 3476,
        "endChar": 49
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d964e5fb_29093b74",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3492,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-26T21:43:53Z",
      "side": 1,
      "message": "ref",
      "range": {
        "startLine": 3492,
        "startChar": 4,
        "endLine": 3492,
        "endChar": 61
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b5787334_a13e01b5",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3492,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-27T18:10:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d964e5fb_29093b74",
      "range": {
        "startLine": 3492,
        "startChar": 4,
        "endLine": 3492,
        "endChar": 61
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9e0a258_5673feb7",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-26T21:43:53Z",
      "side": 1,
      "message": "Note that we have to manually set mSkipValidation here.  It is used to set the extension above (see refs).  We\u0027re basically undoing it here.",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d11c224e_ed5c9447",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2021-05-27T01:40:33Z",
      "side": 1,
      "message": "This seems reasonable, but I\u0027m concerned about an order of operations error with the line above (ref1):\n\n    mState.mExtensions \u003d mSupportedExtensions;\n\nWe are modifying mSupportedExtensions after we\u0027ve already copied the values into State::mExtensions.\n\nNote that this bug already exists (ref2), so it would be good to fix this properly by moving the `mState.mExtensions \u003d mSupportedExtensions` to the end of initCaps() so no one else gets bit by it in the future.",
      "parentUuid": "b9e0a258_5673feb7",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f0ed202_5fd5a8fd",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-27T04:31:39Z",
      "side": 1,
      "message": "Its not clear to me what the design here is, given two copies of the extensions.\n\nmSupportedExtensions is:\n\n    // Extensions supported by the implementation plus extensions that are implemented entirely\n    // within the frontend.\n    Extensions mSupportedExtensions;\n\nwhile mExtensions is part of State:\n\n    // Caps to use for validation\n    ...\n    Extensions mExtensions;\n\nIf they are supposed to be in lock step, then we can move all these modifications directly to mSupportedExtensions and modify mExtensions at the end.  If they are supposed to be distinct, where mSupportedExtensions is a pure list and mExtensions is the modified list, then ref2 should be changed to mExtensions.",
      "parentUuid": "d11c224e_ed5c9447",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "259245ee_63a2d44b",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-05-27T14:32:46Z",
      "side": 1,
      "message": "Seems unintentional. I wonder if we could change mExtensions to a reference to mSupportedExtensions. No idea why/how we ended up with two copies.",
      "parentUuid": "6f0ed202_5fd5a8fd",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de50a7dc_3122aa6e",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2021-05-27T16:11:03Z",
      "side": 1,
      "message": "mSupportedExtensions is the list of all extensions that this context could support. In some situations, we don\u0027t expose everything that is supported (WebGL/EGL_ANGLE_create_context_extensions_enabled [0]). mExtensions should always be a subset of mSupportedExtensions as extensions are enabled over time.\n\nThere is definitely a bug here, this function should not modify mSupportedExtensions. That logic should happen in generateSupportedExtensions instead.\n\n[0] https://source.chromium.org/chromium/chromium/src/+/main:third_party/angle/extensions/EGL_ANGLE_create_context_extensions_enabled.txt",
      "parentUuid": "259245ee_63a2d44b",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e850893_1583ae33",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-27T16:21:02Z",
      "side": 1,
      "message": "Thanks for the info, Geoff.  I\u0027d like to mark this TODO, file a bug and put up a separate CL that moves away from modifying mSupportedExtensions here.  I\u0027d prefer not to do that in this series since it modifies webGL and that can cause a host of pains.",
      "parentUuid": "de50a7dc_3122aa6e",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef74116a_ea65a12b",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1297197
      },
      "writtenOn": "2021-05-27T17:48:05Z",
      "side": 1,
      "message": "\u003e I\u0027d like to mark this TODO, file a bug and put up a separate CL that moves away from modifying mSupportedExtensions here.\n\nSounds good.",
      "parentUuid": "9e850893_1583ae33",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41a4ce7e_e76f633d",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3803,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2021-05-27T18:10:14Z",
      "side": 1,
      "message": "Added TODO near the beginning of the function",
      "parentUuid": "ef74116a_ea65a12b",
      "range": {
        "startLine": 3802,
        "startChar": 0,
        "endLine": 3803,
        "endChar": 65
      },
      "revId": "c1d187e53f47bec489dd9016f454f124e8d6684b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}