{
  "comments": [
    {
      "key": {
        "uuid": "7069bba1_79cec7ee",
        "filename": "src/libGLESv2/validationES.h",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1105219
      },
      "writtenOn": "2014-09-24T19:09:15Z",
      "side": 1,
      "message": "It doesn\u0027t matter that these persist and don\u0027t reset after a call is validated as long as the validator is created and destroyed once per API call, but that might be an easy pitfall for future coders. We should probably at least stick a comment on the validator that it needs to be destroyed each time we\u0027re done checking the results of the validation, or possibly have the validation functions return a Error-plus-side-effect-bool blob?\n\nIt also feels a little weird to be creating a new validator every API call-- I doubt there\u0027s much overhead in creating a bunch of references, but my first instinct is to wonder why it\u0027s not just part of the context. (Although if the aim is to run validation without a context for testing purposes, I suppose it makes sense. It just... feels strange.)",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 54,
        "endChar": 31
      },
      "revId": "9f54e8dfad28fd9f6deb4b33abc8de6afdc60c1a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7069bba1_79808772",
        "filename": "src/libGLESv2/validationES.h",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2014-09-24T19:22:05Z",
      "side": 1,
      "message": "The design pattern is called a Functor... see http://en.wikipedia.org/wiki/Function_object\n\nThe section on \"Maintaining state\" is particularly relevant. My functor here is slightly different in that it takes several different methods instead of a single operator() method. (This is per Geoff\u0027s suggestion to reuse classes instead of making one class per api call). \n\nWe don\u0027t use this pattern everywhere in ANGLE but we do in a few places. See Std140PaddingHelper or AttributeSorter for some variations.\n\nI\u0027ll add a note of the ephemerality of the class. As you say there\u0027s no performance penalty to putting some variables on the stack, and it does technically save a few bytes of memory. It\u0027s kind of nice to keep them isolated from Context.",
      "parentUuid": "7069bba1_79cec7ee",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 54,
        "endChar": 31
      },
      "revId": "9f54e8dfad28fd9f6deb4b33abc8de6afdc60c1a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "907b8f5f_6806f788",
        "filename": "src/libGLESv2/validationES.h",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1105219
      },
      "writtenOn": "2014-09-24T20:57:09Z",
      "side": 1,
      "message": "Given that the class doesn\u0027t follow the key feature of the pattern by having multiple methods invoked by name rather than using operator(), and its name doesn\u0027t include the pattern name, it\u0027s not a good idea to count on it being recognized as the pattern. I\u0027m not really sure what qualifies it as a functor here, or why the pattern is particularly useful for this case-- we don\u0027t need to pass the validator around or invoke it on the contents of a container, and where the internally maintained state is concerned, mError and mCallHasNoSideEffects aren\u0027t useful or necessary pieces of information to maintain between subsequent validation calls. If this *did* have a single operator() function, it still wouldn\u0027t want to aggregate information with mError-- consecutive calls to validate() would need to be interspersed with validate.error(GL_NO_ERROR) to keep it from stepping on its own toes.",
      "parentUuid": "7069bba1_79808772",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 54,
        "endChar": 31
      },
      "revId": "9f54e8dfad28fd9f6deb4b33abc8de6afdc60c1a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0c347c9_18db3537",
        "filename": "src/libGLESv2/validationES.h",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2014-09-24T21:07:44Z",
      "side": 1,
      "message": "Simply because it stores the state and doesn\u0027t have to pass it around via the stack.",
      "parentUuid": "907b8f5f_6806f788",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 54,
        "endChar": 31
      },
      "revId": "9f54e8dfad28fd9f6deb4b33abc8de6afdc60c1a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}