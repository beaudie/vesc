{
  "comments": [
    {
      "key": {
        "uuid": "0f88c5de_50194518",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T11:16:39Z",
      "side": 1,
      "message": "Hoping we can land this now.",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05dfae45_1bb20a27",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T14:28:45Z",
      "side": 1,
      "message": "Looks much better!",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70663959_eb479d39",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T16:13:01Z",
      "side": 1,
      "message": "Thank you for your help!",
      "parentUuid": "05dfae45_1bb20a27",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6421a4d0_81152455",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T16:13:01Z",
      "side": 1,
      "message": "Couple of quick questions Shabi ...",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4c067746_79c95033",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 13
      },
      "lineNbr": 2914,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T14:28:45Z",
      "side": 1,
      "message": "Could you please add another test based on this scenario?\n\n- Draw\n- Invalidate\n- Enable depth/stencil\n- Some non-draw command that breaks the renderpass\n\nThe invalidate should remain in effect. I checked and it seems that the front-end correctly never syncs this dirty bit except for draw calls, so the assumption that a draw call will follow should hold.",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4bc462e_922361e0",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 13
      },
      "lineNbr": 2914,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T16:13:01Z",
      "side": 1,
      "message": "Just to clarify, did you want the original draw to be preceded by a Disable?\n\nFrom previous test-development, I believe that the 2nd enable in the following sequence will not be processed: Enable-Draw-Enable-Draw",
      "parentUuid": "4c067746_79c95033",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81378373_f64b86b1",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 13
      },
      "lineNbr": 2914,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T16:32:10Z",
      "side": 1,
      "message": "Yes, otherwise the Enable would be noop. Might be good to do something like:\n\n- Enable D/S\n- Draw\n- Disable D/S\n- Draw\n- Invalidate\n- Enable D/S\n- Break the render pass through a non-draw command\n\nThere\u0027s no draw call after Invalidate in my scenario, and some other command is breaking the render pass. The test just ensures that the invalidate is not undone just because there\u0027s an unrelated D/S enable before it.\n\n(The first Enable-Draw-Disable-Draw dance is to avoid triggering optimizations that think the depth buffer was never written to in the render pass to begin with)",
      "parentUuid": "c4bc462e_922361e0",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9fc49ff4_e3dfc797",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.cpp",
        "patchSetId": 13
      },
      "lineNbr": 2914,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T17:34:52Z",
      "side": 1,
      "message": "Thanks, that\u0027s what I was figuring you intended, but wanted to make sure.\n\nDone",
      "parentUuid": "81378373_f64b86b1",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "398dcc4b_34c69a7e",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 734,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T14:28:45Z",
      "side": 1,
      "message": "This part of the comment is a little bit confusing. If glEnable() is called right before glInvalidate(), that\u0027s still the same as \"is being enabled\".",
      "range": {
        "startLine": 733,
        "startChar": 54,
        "endLine": 734,
        "endChar": 65
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46ada0e1_0e6a1462",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 734,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T16:13:01Z",
      "side": 1,
      "message": "Here\u0027s the back story: At one point, I had an ASSERT here (and below) that ensured we were transitioning from disabled to enabled (or vice versa below).  That ASSERT was triggered if I did glEnable() just before glInvalidateFramebuffer().  That\u0027s because the invalidate looks at and records the front-end state at the time of invalidate.  Then, the dirty bit gets processed later, and so it appears that we\u0027re going from enabled to enabled.\n\nShould I just delete this?",
      "parentUuid": "398dcc4b_34c69a7e",
      "range": {
        "startLine": 733,
        "startChar": 54,
        "endLine": 734,
        "endChar": 65
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "075ec59b_da6707dc",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 734,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T16:32:10Z",
      "side": 1,
      "message": "Yes I think it\u0027s best to just delete it.\n\nTo be sure, this is not called from invalidate directly, is it?",
      "parentUuid": "46ada0e1_0e6a1462",
      "range": {
        "startLine": 733,
        "startChar": 54,
        "endLine": 734,
        "endChar": 65
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e486bd14_57fed1f4",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 734,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T17:34:52Z",
      "side": 1,
      "message": "Done\n\n\u003e To be sure, this is not called from invalidate directly, is it?\n\nNo",
      "parentUuid": "075ec59b_da6707dc",
      "range": {
        "startLine": 733,
        "startChar": 54,
        "endLine": 734,
        "endChar": 65
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bf7d335_84fa58bd",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 739,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T14:28:45Z",
      "side": 1,
      "message": "Can move out of the if, as it\u0027s both here and in `else`.",
      "range": {
        "startLine": 735,
        "startChar": 0,
        "endLine": 739,
        "endChar": 9
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "340ed6fc_7b64d806",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 739,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T17:34:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2bf7d335_84fa58bd",
      "range": {
        "startLine": 735,
        "startChar": 0,
        "endLine": 739,
        "endChar": 9
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5de37984_2e752340",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 770,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T14:28:45Z",
      "side": 1,
      "message": "If you reach this function, a draw will necessarily happen AFAICT. If you can confirm that\u0027s the case, can things be further simplified?",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f66a3e4c_3b7a1d01",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 770,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T17:34:52Z",
      "side": 1,
      "message": "Not that I see.  cmdCountDisabled is integral to Jamie\u0027s design ... so that a draw-while-disabled can be distinguished from a draw-while-enabled.  Just to be sure, I commented out this line and tests failed (as I would expect).\n\nDo you have another idea?",
      "parentUuid": "5de37984_2e752340",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a2255916_1439b782",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 770,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T18:32:58Z",
      "side": 1,
      "message": "No that\u0027s fine. It was just a thought. Probably the wording of the comment could be improved to say something like \"while writes to the invalidated attachment was enabled\" (note added \"writes to\").\n\nWhile we\u0027re here, nit: missing )",
      "parentUuid": "f66a3e4c_3b7a1d01",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "149942cf_9f8ac5d4",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 13
      },
      "lineNbr": 770,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T21:13:22Z",
      "side": 1,
      "message": "I improved the comment",
      "parentUuid": "a2255916_1439b782",
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f0afce2_08464080",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 13
      },
      "lineNbr": 998,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T14:28:45Z",
      "side": 1,
      "message": "Looks like you can remove this and use !isInvalidated() instead",
      "range": {
        "startLine": 992,
        "startChar": 0,
        "endLine": 998,
        "endChar": 5
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f76d039_c4e15435",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 13
      },
      "lineNbr": 998,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T17:34:52Z",
      "side": 1,
      "message": "Unfortunately, no.  It causes shouldRestoreDepthStencilAttachment() to return true for never-invalidated attachments.",
      "parentUuid": "7f0afce2_08464080",
      "range": {
        "startLine": 992,
        "startChar": 0,
        "endLine": 998,
        "endChar": 5
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0d28c17_9438e537",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 13
      },
      "lineNbr": 998,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T18:32:58Z",
      "side": 1,
      "message": "Ack. I noticed that the first check (!\u003d infinite) was redundant in `isInvalidated` (1) and mistakenly assumed it\u0027s also redundant here.\n\n(1) I would still keep it though as a micro-optimization.",
      "parentUuid": "9f76d039_c4e15435",
      "range": {
        "startLine": 992,
        "startChar": 0,
        "endLine": 998,
        "endChar": 5
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "04a92593_1aac44ed",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 13
      },
      "lineNbr": 1018,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-09-02T14:28:45Z",
      "side": 1,
      "message": "typo",
      "range": {
        "startLine": 1018,
        "startChar": 86,
        "endLine": 1018,
        "endChar": 88
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61dc7a55_c55e0225",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 13
      },
      "lineNbr": 1018,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2020-09-02T17:34:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "04a92593_1aac44ed",
      "range": {
        "startLine": 1018,
        "startChar": 86,
        "endLine": 1018,
        "endChar": 88
      },
      "revId": "2006a8e0e0ed0b93b359cf9fe9a3e916179b4112",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}