{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "93d52f2b_01f7d115",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-12-12T22:18:02Z",
      "side": 1,
      "message": "LGTM",
      "revId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6aea6e1c_22a15cdd",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 4606,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-12-12T21:51:48Z",
      "side": 1,
      "message": "Instead of weak pointer here and then use mUse to keep them alive, why not just refcounting these linked library, that way it is safer and simpler. Otherwise you could have theoretical case that someone check the mUse and see it is done and destroy the libray but did not check PipelineHelper and still keeps PipelineHelper around and use it later. If any librray must keep alive until all pipeline goes away, have pipeline retain it directly using refcount is a better choice, IMO.",
      "range": {
        "startLine": 4604,
        "startChar": 4,
        "endLine": 4606,
        "endChar": 51
      },
      "revId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f631fcec_ddb4136e",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 4606,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-12-12T22:00:49Z",
      "side": 1,
      "message": "That is impossible though by design. You can\u0027t draw with a (complete) pipeline if any of the partial pipelines are not there anymore:\n\n- For shaders, it means the GL program is destroyed\n- For vertex input / fragment output, it means the context is destroyed.\n\nSo this is really only protecting against a case where the GL program is destroyed followed by a flush of commands that use that program. This just needs to keep the partial pipelines alive as long as the complete pipeline itself.\n\nUsing ref counting is a nice idea, but a much bigger surgery. Would you mind leaving that as a future refactoring?",
      "parentUuid": "6aea6e1c_22a15cdd",
      "range": {
        "startLine": 4604,
        "startChar": 4,
        "endLine": 4606,
        "endChar": 51
      },
      "revId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29cadcc3_d9f4412b",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 4606,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2022-12-12T22:18:02Z",
      "side": 1,
      "message": "future CL is fine. If GPU is not directly accessing partial pipelines, a refcount (smart pointer) is just conceptually simpler and robust. With that, the partial pipeline even do not need to be a Resource object.",
      "parentUuid": "f631fcec_ddb4136e",
      "range": {
        "startLine": 4604,
        "startChar": 4,
        "endLine": 4606,
        "endChar": 51
      },
      "revId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d13c062_178c9a76",
        "filename": "src/libANGLE/renderer/vulkan/vk_cache_utils.cpp",
        "patchSetId": 1
      },
      "lineNbr": 4606,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-12-12T22:31:51Z",
      "side": 1,
      "message": "FWIW, partial pipeline is also a PipelineHelper, and the linked pipeline is just a collection of partial pipelines. So the GPU would be accessing partial pipelines through the partial pipelines.",
      "parentUuid": "29cadcc3_d9f4412b",
      "range": {
        "startLine": 4604,
        "startChar": 4,
        "endLine": 4606,
        "endChar": 51
      },
      "revId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Owners",
        "description": {
          "value": "User with the code owner override approved the change"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "has:enabled_code-owners"
          }
        },
        "submittabilityExpression": {
          "expressionString": "has:approval_code-owners"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Owners-Override\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:enabled_code-owners"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["has:enabled_code-owners"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:approval_code-owners"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["has:approval_code-owners"],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Owners-Override=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Owners-Override=+1"]}
      },
      "patchSetCommitId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "Submit requirement for the \u0027Code-Review\u0027 label"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1 AND -label:Code-Review\u003dMIN"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1 AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1","label:Code-Review=MIN"]}
      },
      "patchSetCommitId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "patchSetCommitId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "Submit requirement for the \u0027Verified\u0027 label"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:false"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:true"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:false"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:true"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "6f01853458ce110d8e1dbb90ca86317ce9f27e73",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}