{
  "comments": [
    {
      "key": {
        "uuid": "ef57c219_884ebe91",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-10-02T05:50:43Z",
      "side": 1,
      "message": "I would add an ASSERT(render pass is not open) everywhere nullptr is sent to releaseImage. It\u0027s not perfect (as it doesn\u0027t include the other contexts), but it\u0027s better than nothing!",
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "927d019f_cf37a54a",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 599,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-10-02T05:50:43Z",
      "side": 1,
      "message": "I wouldn\u0027t reuse this function for this purpose. This will close the RP for _any_ image that\u0027s been used in it. So if the RP samples from some image and that image gets deleted, this change closes the RP which it doesn\u0027t need to.\n\nI think we should track the attachment ImageHelpers separately (or rather duplicated-ly) in the RP, so that this end-RP-on-delete only happens for attachment images.\n\nCurrently we don\u0027t care about color attachments at end RP time, so you might as well only store the D/S attachment and compare against that.\n\n---\n\nI actually have a slightly better idea here. Say the RP tracks all its attachments:\n\n    FramebufferAttachmentsVector\u003cImageHelper *\u003e attachments;\n\nThere\u0027s actually no need to close the RP when an attachment is deleted. We just need to set attachments[index] \u003d nullptr. Later at endRP time, we make sure the image helper is not nullptr before accessing it.\n\nThat also obviates the need to swallow the error in releaseImage.",
      "range": {
        "startLine": 599,
        "startChar": 18,
        "endLine": 599,
        "endChar": 42
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82a6f998_c2e9c857",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 599,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-10-02T13:24:06Z",
      "side": 1,
      "message": "Right. I think this is good advice.",
      "parentUuid": "927d019f_cf37a54a",
      "range": {
        "startLine": 599,
        "startChar": 18,
        "endLine": 599,
        "endChar": 42
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b4affe6_6c227dbd",
        "filename": "src/libANGLE/renderer/vulkan/ContextVk.h",
        "patchSetId": 4
      },
      "lineNbr": 599,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Good point about separate API and don\u0027t actually close the renderpass. The tracking of attachments are actually done in the next CL. For now this CL essentially will become plumbing CL that should not have any function change.",
      "parentUuid": "82a6f998_c2e9c857",
      "range": {
        "startLine": 599,
        "startChar": 18,
        "endLine": 599,
        "endChar": 42
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4930fe6c_97380fba",
        "filename": "src/libANGLE/renderer/vulkan/ImageVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 37,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-10-02T13:24:06Z",
      "side": 1,
      "message": "maybe a TODO + bug link here to handle this? feels like it could lead to very subtle bugs.",
      "range": {
        "startLine": 37,
        "startChar": 39,
        "endLine": 37,
        "endChar": 46
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23618784_527a11c1",
        "filename": "src/libANGLE/renderer/vulkan/ImageVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 37,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4930fe6c_97380fba",
      "range": {
        "startLine": 37,
        "startChar": 39,
        "endLine": 37,
        "endChar": 46
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dbd83043_8d243f0c",
        "filename": "src/libANGLE/renderer/vulkan/RenderbufferVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 243,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-10-02T05:50:43Z",
      "side": 1,
      "message": "Should also take the share group. This image is used as the attachment.\n\nOr is this nullptr because RP would be closed due to mImage being released? In that case, a comment would be good.",
      "range": {
        "startLine": 243,
        "startChar": 50,
        "endLine": 243,
        "endChar": 57
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "018213cf_29d00867",
        "filename": "src/libANGLE/renderer/vulkan/RenderbufferVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 243,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "dbd83043_8d243f0c",
      "range": {
        "startLine": 243,
        "startChar": 50,
        "endLine": 243,
        "endChar": 57
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "56a8908d_6a2acd97",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 230,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-10-02T13:24:06Z",
      "side": 1,
      "message": "similar to the other comments - either an ASSERT or a TODO",
      "range": {
        "startLine": 230,
        "startChar": 33,
        "endLine": 230,
        "endChar": 40
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38df5eae_fe7577ab",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 230,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "56a8908d_6a2acd97",
      "range": {
        "startLine": 230,
        "startChar": 33,
        "endLine": 230,
        "endChar": 40
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "afcf3c89_6ef65358",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1068,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-10-02T05:50:43Z",
      "side": 1,
      "message": "Probably can be nullptr, because the render pass should always be closed before releasing swapchain images? Needs verification.",
      "range": {
        "startLine": 1068,
        "startChar": 50,
        "endLine": 1068,
        "endChar": 79
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17910447_d6118905",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1068,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-10-02T13:24:06Z",
      "side": 1,
      "message": "maybe somewhere an ASSERT that it isn\u0027t used.",
      "parentUuid": "afcf3c89_6ef65358",
      "range": {
        "startLine": 1068,
        "startChar": 50,
        "endLine": 1068,
        "endChar": 79
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6afc5f11_91c9bef0",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1068,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "17910447_d6118905",
      "range": {
        "startLine": 1068,
        "startChar": 50,
        "endLine": 1068,
        "endChar": 79
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "11b74577_f10f9f33",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 2398,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-10-02T05:50:43Z",
      "side": 1,
      "message": "Same here. Should take share group, or add comment.",
      "range": {
        "startLine": 2398,
        "startChar": 41,
        "endLine": 2398,
        "endChar": 48
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74af9d7b_6b4dbb14",
        "filename": "src/libANGLE/renderer/vulkan/TextureVk.cpp",
        "patchSetId": 4
      },
      "lineNbr": 2398,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "11b74577_f10f9f33",
      "range": {
        "startLine": 2398,
        "startChar": 41,
        "endLine": 2398,
        "endChar": 48
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72fd4e86_fa99d0ee",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 4
      },
      "lineNbr": 3051,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2020-10-02T05:50:43Z",
      "side": 1,
      "message": "Should be able to use range-based for loop.",
      "range": {
        "startLine": 3050,
        "startChar": 13,
        "endLine": 3051,
        "endChar": 18
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d81592b0_561ea327",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 4
      },
      "lineNbr": 3051,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-10-02T13:24:06Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "72fd4e86_fa99d0ee",
      "range": {
        "startLine": 3050,
        "startChar": 13,
        "endLine": 3051,
        "endChar": 18
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "437c040a_ff0e1244",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.cpp",
        "patchSetId": 4
      },
      "lineNbr": 3051,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d81592b0_561ea327",
      "range": {
        "startLine": 3050,
        "startChar": 13,
        "endLine": 3051,
        "endChar": 18
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05b4c12d_2bf996b9",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 4
      },
      "lineNbr": 1320,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2020-10-02T13:24:06Z",
      "side": 1,
      "message": "I think here I\u0027d prefer if you were consistent and took a ContextVk * rather than the share group. Also ties in with Shabi\u0027s comments.",
      "range": {
        "startLine": 1320,
        "startChar": 44,
        "endLine": 1320,
        "endChar": 70
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "128e27e6_969b8b2f",
        "filename": "src/libANGLE/renderer/vulkan/vk_helpers.h",
        "patchSetId": 4
      },
      "lineNbr": 1320,
      "author": {
        "id": 1392020
      },
      "writtenOn": "2020-10-02T20:20:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "05b4c12d_2bf996b9",
      "range": {
        "startLine": 1320,
        "startChar": 44,
        "endLine": 1320,
        "endChar": 70
      },
      "revId": "0400c831f9a0eea0a4b081eaeb0a2c3412dc7102",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}