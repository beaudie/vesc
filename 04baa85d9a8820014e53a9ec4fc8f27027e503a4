{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c2d96386_cf764567",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-01-27T02:39:26Z",
      "side": 1,
      "message": "Amirali has work in progress that overlaps with this. We\u0027ll need to make sure this app workaround and that optimization are compatible.\n\n(i.e. expect some delays!)",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "29cb89f6_f0ad1112",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-01-27T21:15:08Z",
      "side": 1,
      "message": "I think efforts are better spent getting the developer to fix the app than add this hack.",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "130cf54b_7d9bbede",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2022-01-27T21:23:36Z",
      "side": 1,
      "message": "Hey Mohan, I have some questions.. I\u0027ll follow up on the issue.",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95f4f69f_21d94bfa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-02-05T19:16:22Z",
      "side": 1,
      "message": "updated with following -\n\n1. Featurized the submit\n2. Added a stub function that overrides features based on app / package name\n3. Updated test to only run with new feature enabled on vulkan backend\n",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39d6d61c_3cfac922",
        "filename": "src/tests/egl_tests/EGLContextSharingTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1112,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-01-27T21:15:08Z",
      "side": 1,
      "message": "I looked the change over again with Amirali, and it does complicate things. In particular, the fact that this change flushes outside RP commands to the primary CB without making a vkQueueSubmit contradicts Amirali\u0027s optimization that does the same but also makes a vkQueueSubmit call.\n\nThe change itself is also very fragile. Like it flushes outside RP every 6 updates, what if the buggy unsynchonizing app does fewer updates than that then expect them to show up? What if the next app update adds one 2D texture upload before the cube map uploads, and now the counter is not in sync with complete-cube-map uploads?\n\nI feel like this level of hackery to make bad apps work just goes too far. Have you tried contacting the developer of the app and point out their bugs to them? I\u0027m sure they\u0027d be compelled to fix it if they hear \"your app will be broken on Samsung phones\".",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5b50407_bf69c5bc",
        "filename": "src/tests/egl_tests/EGLContextSharingTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1112,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-01-27T22:50:31Z",
      "side": 1,
      "message": "\u003e this change flushes outside RP commands to the primary CB without making a vkQueueSubmit contradicts Amirali\u0027s optimization that does the same but also makes a vkQueueSubmit call\n\nim not sure i see a contradiction. I see it as a \"deeper\" flush vs. a more \"shallow\" flush of just the outsideRP commands. More importantly, in this app the context making the updates never renders a frame, it is another non-shared context that consumes the updated textures and does the rendering.\n\n\u003e Like it flushes outside RP every 6 updates, what if the buggy unsynchonizing app does fewer updates than that then expect them to show up? What if the next app update adds one 2D texture upload before the cube map uploads, and now the counter is not in sync with complete-cube-map uploads?\n\nindeed, the number will need to be tweaked with lowest common denominator of bad apps. For now, 6 works without noticeable perf impact\n\n\u003e Have you tried contacting the developer of the app and point out their bugs to them?\n\nnot sure that is something we plan to pursue at this point in time, we could featurize this and enable it only for samsung if you want",
      "parentUuid": "39d6d61c_3cfac922",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a912713_a6b93700",
        "filename": "src/tests/egl_tests/EGLContextSharingTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1112,
      "author": {
        "id": 1300114
      },
      "writtenOn": "2022-01-28T03:22:19Z",
      "side": 1,
      "message": "\u003e im not sure i see a contradiction.\n\nThe shallow flushes make it harder to track how much work there really is accumulated to flush, but maybe we can see your other CL and try to fit these all in together?\n\n\u003e indeed, the number will need to be tweaked with lowest common denominator of bad apps.\n\nYes and that\u0027s the biggest downside IMO. The extra shallow flushes are being applied to every app, just because _one_ app is misbehaving.\n\n\u003e \u003e Have you tried contacting the developer of the app and point out their bugs to them?\n\u003e not sure that is something we plan to pursue at this point in time, we could featurize this and enable it only for samsung if you want\n\nFrank, is this something we could help Samsung with?",
      "parentUuid": "f5b50407_bf69c5bc",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a9ff2fe_47349fbc",
        "filename": "src/tests/egl_tests/EGLContextSharingTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1112,
      "author": {
        "id": 1175714
      },
      "writtenOn": "2022-01-28T16:11:54Z",
      "side": 1,
      "message": "I\u0027ll ask around",
      "parentUuid": "4a912713_a6b93700",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6dc4b882_30580991",
        "filename": "src/tests/egl_tests/EGLContextSharingTest.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1112,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-02-05T21:07:29Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3a9ff2fe_47349fbc",
      "revId": "04baa85d9a8820014e53a9ec4fc8f27027e503a4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}