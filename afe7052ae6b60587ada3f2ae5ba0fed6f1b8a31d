{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0e086c70_97d9c98d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-04-13T17:17:01Z",
      "side": 1,
      "message": "Looks good. I\u0027d need to check the CL spec- the Thread thing seems like a GL-ism.",
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd581b94_ca370d0e",
        "filename": "src/libGLESv2/entry_points_cl_autogen.cpp",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-04-13T17:17:01Z",
      "side": 1,
      "message": "does CL have a bound thread concept?",
      "range": {
        "startLine": 47,
        "startChar": 8,
        "endLine": 47,
        "endChar": 14
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab5d5d86_93406c6b",
        "filename": "src/libGLESv2/entry_points_cl_autogen.cpp",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1499132
      },
      "writtenOn": "2021-04-13T17:27:28Z",
      "side": 1,
      "message": "Actually no, I will remove it.",
      "parentUuid": "bd581b94_ca370d0e",
      "range": {
        "startLine": 47,
        "startChar": 8,
        "endLine": 47,
        "endChar": 14
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9fb2c16a_81105f8b",
        "filename": "src/libGLESv2/entry_points_cl_autogen.cpp",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1499132
      },
      "writtenOn": "2021-04-13T17:57:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab5d5d86_93406c6b",
      "range": {
        "startLine": 47,
        "startChar": 8,
        "endLine": 47,
        "endChar": 14
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1be1bf0_142a5f31",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-04-13T17:17:01Z",
      "side": 1,
      "message": "can you try replacing this with including common/platform.h?",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bf2a8da_ffa76eb8",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1499132
      },
      "writtenOn": "2021-04-13T17:27:28Z",
      "side": 1,
      "message": "I checked common/platform.h before and didn\u0027t use it on purpose as it includes a lot more unused headers which probably can cause more compilation problems.",
      "parentUuid": "d1be1bf0_142a5f31",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b927d3a_72412b14",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-04-13T18:11:06Z",
      "side": 1,
      "message": "I see. If you include angle_common in this project you should be able to include platform.h. I\u0027d recommend using it. You\u0027re effectively duplicating it here.",
      "parentUuid": "8bf2a8da_ffa76eb8",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c6b20d8_84620f9e",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1499132
      },
      "writtenOn": "2021-04-13T18:29:34Z",
      "side": 1,
      "message": "I tried it and it doesn\u0027t compile, same problem with the FAR macro. This might work with the right combination of ANGLE flags (ANGLE_ENABLE_D3D11), but it should always work. I would also expect problems with the UWP includes combined with D3D9.\nlibOpenCL is only a shim, so IMO we should only include the bare minimum to avoid compilation problems.",
      "parentUuid": "8bf2a8da_ffa76eb8",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e371e70_6a4e603c",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1499132
      },
      "writtenOn": "2021-04-13T18:35:45Z",
      "side": 1,
      "message": "I wouldn\u0027t call it duplicating, because I only include windows.h, whereas platform.h includes up to about 20 headers, including UWP. In platform.h you can disable D3D9 if you use UWP, but I can\u0027t disable D3D9 in the CL header.",
      "parentUuid": "3c6b20d8_84620f9e",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b45481f_28b9e952",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-04-13T18:38:52Z",
      "side": 1,
      "message": "Right, you\u0027re duplicating a portion of it. Can you try putting the #undef FAR #define FAR block in platform.h at the end of #ifdef ANGLE_PLATFORM_WINDOWS? If that doesn\u0027t work SGTM on using this pattern.",
      "parentUuid": "8e371e70_6a4e603c",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d368c1b_5cecf5ae",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1499132
      },
      "writtenOn": "2021-04-13T19:09:08Z",
      "side": 1,
      "message": "I found the culprit: common/platform.h, line 86. It\u0027s a bad idea to undefine Microsoft macros in common headers ... Do you know why this was done?",
      "parentUuid": "6b45481f_28b9e952",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58293a3d_3add20b6",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-04-13T19:19:13Z",
      "side": 1,
      "message": "We could git bisect. I don\u0027t recall. Is it working now?",
      "parentUuid": "3d368c1b_5cecf5ae",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "69315dab_4c1fb1f2",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1499132
      },
      "writtenOn": "2021-04-13T19:23:23Z",
      "side": 1,
      "message": "Summary: I solved the problem for this CL by reordering includes. Most Windows headers will not compile if they are included after common/platform.h, because it undefines \u0027far\u0027. This will cause more problems in the future and should be fixed.",
      "parentUuid": "3d368c1b_5cecf5ae",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d28db827_9cad4037",
        "filename": "src/libOpenCL/cl_loader.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2021-04-13T19:30:41Z",
      "side": 1,
      "message": "Good solution. I think including the windows headers before #undef far would be preferred. I think that undef is in there for a reason.",
      "parentUuid": "69315dab_4c1fb1f2",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 38,
        "endChar": 6
      },
      "revId": "afe7052ae6b60587ada3f2ae5ba0fed6f1b8a31d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}