{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "18f5681a_6e18bfd0",
        "filename": "src/libANGLE/capture/FrameCapture.cpp",
        "patchSetId": 3
      },
      "lineNbr": 8766,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-05-18T13:19:45Z",
      "side": 1,
      "message": "This looks like it\u0027s done differently from other similar cases and will certainly break the trace interpreter.\n\nHave you tried doing this following the usual pattern of adding globals to trace_fixture and turning them into function calls in the trace?",
      "range": {
        "startLine": 8766,
        "startChar": 8,
        "endLine": 8766,
        "endChar": 46
      },
      "revId": "8fdb164b45a06e3efc3b4b45bfb0d705043ad0d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f93b0a0_aaf5a9d0",
        "filename": "src/libANGLE/capture/FrameCapture.cpp",
        "patchSetId": 3
      },
      "lineNbr": 8766,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2023-05-18T15:08:20Z",
      "side": 1,
      "message": "Roman, thanks for the feedback. Can you take a look at patch set one on this CL and see if that\u0027s a better approach, and if not, maybe point out an example of the usual pattern?  Thanks!",
      "parentUuid": "18f5681a_6e18bfd0",
      "range": {
        "startLine": 8766,
        "startChar": 8,
        "endLine": 8766,
        "endChar": 46
      },
      "revId": "8fdb164b45a06e3efc3b4b45bfb0d705043ad0d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a80d4958_4fb0553b",
        "filename": "src/libANGLE/capture/FrameCapture.cpp",
        "patchSetId": 3
      },
      "lineNbr": 8766,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-05-18T15:17:58Z",
      "side": 1,
      "message": "Not sure about the first patchset, but the pattern I\u0027m referring is using this kind of wrappers shifting globals to trace_fixture, turning assignment into function calls:\nhttps://crsrc.org/c/third_party/angle/util/capture/trace_fixture.cpp;drc\u003d4e07335654ec2c1fa3a607e924c53f1b6f3d3d34;l\u003d649\n\nWith this you should see some autogen happening as well (codegen scripts pick up functions declared in trace_fixture.h):\nhttps://source.chromium.org/search?q\u003df:angle%20SetCurrentContextID\u0026ss\u003dchromium\n\nInterpreter currently doesn\u0027t support variable assignments (only top-level constant arrays), anything that isn\u0027t a function call will break it. I\u0027ll be enabling a test soon to catch these breakages in presubmits.",
      "parentUuid": "4f93b0a0_aaf5a9d0",
      "range": {
        "startLine": 8766,
        "startChar": 8,
        "endLine": 8766,
        "endChar": 46
      },
      "revId": "8fdb164b45a06e3efc3b4b45bfb0d705043ad0d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69995956_23f1d76b",
        "filename": "src/libANGLE/capture/FrameCapture.cpp",
        "patchSetId": 3
      },
      "lineNbr": 8766,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2023-05-18T15:55:50Z",
      "side": 1,
      "message": "Ah, OK, for sure we can duplicate this pattern. I had hoped to avoid it only because it breaks RenderDoc and makes debugging more difficult.",
      "parentUuid": "a80d4958_4fb0553b",
      "range": {
        "startLine": 8766,
        "startChar": 8,
        "endLine": 8766,
        "endChar": 46
      },
      "revId": "8fdb164b45a06e3efc3b4b45bfb0d705043ad0d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28f6fae7_a47f403a",
        "filename": "src/libANGLE/capture/FrameCapture.cpp",
        "patchSetId": 3
      },
      "lineNbr": 8766,
      "author": {
        "id": 1511618
      },
      "writtenOn": "2023-05-18T17:32:40Z",
      "side": 1,
      "message": "NM about RenderDoc, am now unable to reproduce the issue I had seen.",
      "parentUuid": "69995956_23f1d76b",
      "range": {
        "startLine": 8766,
        "startChar": 8,
        "endLine": 8766,
        "endChar": 46
      },
      "revId": "8fdb164b45a06e3efc3b4b45bfb0d705043ad0d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df35b16f_7b5478f4",
        "filename": "src/libANGLE/capture/FrameCapture.cpp",
        "patchSetId": 3
      },
      "lineNbr": 8766,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2023-05-18T17:50:50Z",
      "side": 1,
      "message": "yeah I\u0027m not sure how this would cause issues with renderdoc, it should be just a slightly different way to access the global state without functional differences. trace_fixture is linked into libs together with the trace itself, just a different object file. If you do end up running into issues it would be good to know why.",
      "parentUuid": "28f6fae7_a47f403a",
      "range": {
        "startLine": 8766,
        "startChar": 8,
        "endLine": 8766,
        "endChar": 46
      },
      "revId": "8fdb164b45a06e3efc3b4b45bfb0d705043ad0d0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}