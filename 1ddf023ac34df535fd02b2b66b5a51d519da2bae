{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4d2f5119_3f8e9cd7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1128437
      },
      "writtenOn": "2022-05-17T21:07:30Z",
      "side": 1,
      "message": ":friendly_ping:",
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c8555656_7c64c6d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1128437
      },
      "writtenOn": "2022-05-18T17:18:01Z",
      "side": 1,
      "message": "kbr: PTAL at the discussion in comments about enabling EXT_texture_norm16 by default for WebGL",
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8f0cfb0_2823df7d",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2022-05-18T17:09:30Z",
      "side": 1,
      "message": "No need to make it webgl/D3D11-only. I\u0027d remove this part.",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b64c219_70a0cce0",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1128437
      },
      "writtenOn": "2022-05-18T17:18:01Z",
      "side": 1,
      "message": "The code disables EXT_texture_norm16 on ES2 if the context is WebGL or if it\u0027s not D3D11 i.e. we only enable EXT_texture_norm16 for non-WebGL D3D11 ES2 contexts.\n\nEXT_texture_norm16 is a requestable extension in WebGL2 so it cannot be enabled by default on WebGL contexts. At least that\u0027s my understanding per the discussion on https://github.com/KhronosGroup/WebGL/pull/3409#issuecomment-1128377499\n\nI\u0027ll remove the D3D11 only restriction if you prefer, and I\u0027ve added kbr@ to clarify the WebGL behavior.",
      "parentUuid": "f8f0cfb0_2823df7d",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d29edfa_fa364d6e",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2022-05-18T18:54:55Z",
      "side": 1,
      "message": "For WebGL contexts, all extensions are disabled (later in the code) and re-enabled on demand by WebGL so it\u0027s not an issue.",
      "parentUuid": "5b64c219_70a0cce0",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6511e7ac_7a196077",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1128437
      },
      "writtenOn": "2022-05-18T18:59:57Z",
      "side": 1,
      "message": "I got a WebGL1 conformance failure which is what I tried to fix in the github PR above. Maybe we only disable the extension on WebGL2 and not WebGL1?",
      "parentUuid": "9d29edfa_fa364d6e",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89d930da_d8d2765d",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2022-05-18T20:46:09Z",
      "side": 1,
      "message": "I\u0027m not really sure why Sunny ran into the conformance failure which was discussed in https://github.com/KhronosGroup/WebGL/pull/3409 . That test should be being run without the WebGL layer enabling GL_EXT_texture_norm16 - on both WebGL 1.0 and 2.0 contexts. (The test, conformance/textures/misc/texture-with-flip-y-and-premultiply-alpha.html , is run against both 1.0 and 2.0 contexts.)\n\nIn WebGL 1.0 though (ES 2.0) we shouldn\u0027t expose this even as an enable-able extension. The WebGL wrapper of EXT_texture_norm16 is defined only against WebGL 2. Possible to leave in at least that restriction?\n\nCan you reproduce the conformance failure locally and confirm that that would address it?",
      "parentUuid": "6511e7ac_7a196077",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4004eaac_d4c6a2bb",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1128437
      },
      "writtenOn": "2022-05-18T21:00:42Z",
      "side": 1,
      "message": "The issue is that the test doesn\u0027t work if EXT_texture_norm16 is enabled for any reason since the test assumes that RGBA/UNSIGNED_SHORT is an invalid format/type combination which is not the case with EXT_texture_norm16. I was able to reproduce the test failure locally and both 1) changing the test to use LUMINANCE/UNSIGNED_SHORT or 2) restricting this change to non-WebGL contexts fixes the issue.\n\nThe previous test failures seem to be WebGL1 unless I\u0027m missing something:\nhttps://ci.chromium.org/ui/p/chromium/builders/try/win-angle-chromium-x64-try/b8813977588818815777/overview\n\nAnother issue is that I\u0027d like to merge this CL to M103 branch ASAP since it\u0027s for a ReleaseBlock-Stable bug so I\u0027ll restrict this to non-WebGL contexts for now and merge the CL. After we decide what to do with WebGL contexts and making the necessary conformance test fixes, we can remove the WebGL restriction here, but that will take a while - getting the conformance PR merged, rolled into Chromium, land ANGLE CL, wait for ANGLE roll, etc.",
      "parentUuid": "89d930da_d8d2765d",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4a31e38_064909c2",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2022-05-19T00:50:22Z",
      "side": 1,
      "message": "I think the problem is that the texture formats in src/libANGLE/formatutils.cpp are considered valid if EXT_texture_norm16 is advertised, regardless of whether the extension\u0027s been enabled, and that\u0027s why the WebGL conformance test was failing. It\u0027s been many months since I touched the associated code so don\u0027t remember all of the gates ANGLE puts in place.\n\nAgree with only exposing this extension on non-WebGL contexts for the time being, merging that back, and refining it later.",
      "parentUuid": "4004eaac_d4c6a2bb",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a88e01f_55dea635",
        "filename": "src/libANGLE/Context.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3612,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2022-05-19T17:10:21Z",
      "side": 1,
      "message": "Sounds good.",
      "parentUuid": "f4a31e38_064909c2",
      "range": {
        "startLine": 3606,
        "startChar": 0,
        "endLine": 3612,
        "endChar": 9
      },
      "revId": "1ddf023ac34df535fd02b2b66b5a51d519da2bae",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}