{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "064cedcd_70984416",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-03-10T18:48:12Z",
      "side": 1,
      "message": "PTAL",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c01cd530_86e8d6e4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2022-03-10T19:32:52Z",
      "side": 1,
      "message": "LGTM.  Trevor is working in this space, and so I\u0027d like him to +2 this CL.",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "610ba180_227ae24f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1452687
      },
      "writtenOn": "2022-03-10T21:07:44Z",
      "side": 1,
      "message": "I am in the middle of rewriting this code to use VK_GOOGLE_surfaceless_query to actually query which specific formats are supported on device.",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cfaa23db_56106320",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-03-10T21:47:45Z",
      "side": 1,
      "message": "would having a query affect the static mapping between EGL and Vulkan colorspace enums?",
      "parentUuid": "610ba180_227ae24f",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2914317f_10ac92d2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1452687
      },
      "writtenOn": "2022-03-10T22:44:18Z",
      "side": 1,
      "message": "Unlikely. But it could.\nOne possibility if you need it to be static is to query for supported formats on start, and store that somewhere for later.\n\nIt\u0027s extremely unlikely to change during runtime though. Hence why a query for every egl format feels fine to me.",
      "parentUuid": "cfaa23db_56106320",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3aec523_66c0b71c",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1175714
      },
      "writtenOn": "2022-03-10T19:06:19Z",
      "side": 1,
      "message": "this is bc bt709 linear ext is only let through the filter in android swapchain code recently, right? do we want to try and fallback?",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8575c15_32c6bcd0",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-03-10T20:21:28Z",
      "side": 1,
      "message": "\u003e this is bc bt709 linear ext is only let through the filter in android swapchain code recently, right?\n\neven now on android `VK_COLOR_SPACE_BT709_LINEAR_EXT` colorspace is not exposed for any format (and i think from Android N or so, srgb is the preferred default) -\u003e https://cs.android.com/android/platform/superproject/+/master:frameworks/native/vulkan/libvulkan/swapchain.cpp;l\u003d712\n\n\u003e do we want to try and fallback?\n\nthis patch does fall back to `VK_COLOR_SPACE_SRGB_NONLINEAR_KHR`, which fallback are you talking about?\n\nAlso, this is not just an Android issue, almost all bots had issues when i did the \"right mapping\". You can see the bot failures with PS1",
      "parentUuid": "e3aec523_66c0b71c",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7893579d_cd7e7b4b",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2022-03-10T20:53:25Z",
      "side": 1,
      "message": "FYI ... Trevor did BT709 on an internal branch, and is in the process of pushing to AOSP.",
      "parentUuid": "f8575c15_32c6bcd0",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6f8e96c_fb7166eb",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-03-10T20:56:02Z",
      "side": 1,
      "message": "one thing to note is that we might need to have different mappings for different OS / platforms given some are more nimble than others",
      "parentUuid": "7893579d_cd7e7b4b",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7ff6d8a_c5da5bce",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1290487
      },
      "writtenOn": "2022-03-10T20:58:34Z",
      "side": 1,
      "message": "Ahh.  It\u0027s good that we\u0027re pushing this to AOSP.  Hopefully, we can collaborate there to make the loader code good for Android.\n\nFYI ... I\u0027m heading off to an appointment for a bit",
      "parentUuid": "c6f8e96c_fb7166eb",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "658fefe0_38705a89",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1452687
      },
      "writtenOn": "2022-03-10T22:08:44Z",
      "side": 1,
      "message": "Why is it okay mapping LINEAR to SRGB_NONLINEAR?\nThat just seems incorrect to me?",
      "parentUuid": "b7ff6d8a_c5da5bce",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99ccf74d_07f510f6",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-03-10T22:27:29Z",
      "side": 1,
      "message": "\u003e Why is it okay mapping LINEAR to SRGB_NONLINEAR?\n\n1. it isn\u0027t, but right now no bots android or otherwise supports `VK_COLOR_SPACE_PASS_THROUGH_EXT` or `VK_COLOR_SPACE_BT709_LINEAR_EXT` (at least from my local testing)\n2. the code has not changed (except for display_p3), i just added clarification comments where it seemed necessary\n\nit may help if you can provide some context on how you intend to fix this issue through querying ICD",
      "parentUuid": "658fefe0_38705a89",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4730e51_864d4d0d",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1452687
      },
      "writtenOn": "2022-03-10T22:44:18Z",
      "side": 1,
      "message": "The surface query CL is up over at https://chromium-review.googlesource.com/c/angle/angle/+/3232815\n\nIt\u0027s at a very rough draft state, but hopefully that gives you an idea of what I mean",
      "parentUuid": "99ccf74d_07f510f6",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba2c8c01_e5e3e50c",
        "filename": "src/libANGLE/renderer/vulkan/SurfaceVk.cpp",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1340649
      },
      "writtenOn": "2022-03-10T23:57:26Z",
      "side": 1,
      "message": "\u003e The surface query CL is up over at ...\n\nin that CL, when `bt709LinearSupport` is false you will end up failing on many bots. How do you plan to address the case where vendor doesn\u0027t support `VK_GOOGLE_surfaceless_query`?",
      "parentUuid": "e4730e51_864d4d0d",
      "revId": "450c9b28ec9d369b18707a563b12389ad5df68e3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}