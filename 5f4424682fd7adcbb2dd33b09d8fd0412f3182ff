{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fc4fb24d_125497a6",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-09-05T13:10:11Z",
      "side": 1,
      "message": "Could you merge this into the command in _GetAdbRoot? This already queries a few things we need, fits right in there: `id -u; which su || echo noroot; stat --format %a /data`",
      "range": {
        "startLine": 62,
        "startChar": 27,
        "endLine": 62,
        "endChar": 76
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d31585f3_c583fff4",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-09-06T00:33:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc4fb24d_125497a6",
      "range": {
        "startLine": 62,
        "startChar": 27,
        "endLine": 62,
        "endChar": 76
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93e9930c_f88f127a",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 72,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-09-05T13:10:11Z",
      "side": 1,
      "message": "Add a little helper like `_Global.IsMultiUser()`?",
      "range": {
        "startLine": 72,
        "startChar": 19,
        "endLine": 72,
        "endChar": 38
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3feb8dc1_a839c4c9",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 72,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-09-06T00:33:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "93e9930c_f88f127a",
      "range": {
        "startLine": 72,
        "startChar": 19,
        "endLine": 72,
        "endChar": 38
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "940280e9_a99b64b4",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 84,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-09-05T13:10:11Z",
      "side": 1,
      "message": "Let\u0027s move all of this stuff to _GetAdbRoot (feel free to rename)? For example, use_run_as is already set in there so we\u0027re getting logic scattered around.",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 84,
        "endChar": 34
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25426f52_6ee10285",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 84,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-09-06T00:33:58Z",
      "side": 1,
      "message": "Took a pass at this with `_GetUserInfo()`, LMKWYT",
      "parentUuid": "940280e9_a99b64b4",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 84,
        "endChar": 34
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c7215d5_9b0a8ac8",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 84,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-09-06T12:55:02Z",
      "side": 1,
      "message": "So my idea was to get rid of the second function and just combine everything into one function.\n\nThis way we can also\n* combine `am get-current-user` with `id -u; which su || echo noroot; stat --format %a /data` above, such as `id -u; am get-current-user; which su || echo noroot; stat --format %a /data`. I think this makes sense as single query and also reduces roundtrips (hasn\u0027t been a focus but is always nice in case of a remote device). We can also rewrite it as `\u0027;\u0027.join(...)` if that feels more readable.\n* have `use_run_as` logic in one place\n\n\nOriginally _GetAdbRoot was just getting adb root but over time it accumulated stuff, and the name no longer makes sense. I think this is now more of a generic \"setup\", with getting adb root just being a part of it? We already have _InitializeAndroid though we\u0027re calling this from, so maybe just get rid of all helpers and have everything inlined in _InitializeAndroid. It\u0027s not going to be all that big. WDYT?",
      "parentUuid": "25426f52_6ee10285",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 84,
        "endChar": 34
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6d518ec_1321efe4",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 84,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-09-06T15:23:18Z",
      "side": 1,
      "message": "Okay, slightly more invasive CL, but I think I captured the previous behavior.",
      "parentUuid": "3c7215d5_9b0a8ac8",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 84,
        "endChar": 34
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4fe9e982_f2f5e3d3",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 367,
      "author": {
        "id": 1531247
      },
      "writtenOn": "2024-09-05T13:10:11Z",
      "side": 1,
      "message": "This repeats a bunch, move to a helper?",
      "range": {
        "startLine": 367,
        "startChar": 22,
        "endLine": 367,
        "endChar": 99
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "458abcba_7e2fea5e",
        "filename": "src/tests/py_utils/android_helper.py",
        "patchSetId": 4
      },
      "lineNbr": 367,
      "author": {
        "id": 1256237
      },
      "writtenOn": "2024-09-06T00:33:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4fe9e982_f2f5e3d3",
      "range": {
        "startLine": 367,
        "startChar": 22,
        "endLine": 367,
        "endChar": 99
      },
      "revId": "5f4424682fd7adcbb2dd33b09d8fd0412f3182ff",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}