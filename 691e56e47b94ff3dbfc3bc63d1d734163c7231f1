{
  "comments": [
    {
      "key": {
        "uuid": "3ec542b4_2760bbaa",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2019-02-01T02:00:18Z",
      "side": 1,
      "message": "Does this cause the driver\u0027s current program to be lost? Should the endTransformFeedback call be followed by a call restoring the current program?",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2eec8f92_c2e44f95",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1117350
      },
      "writtenOn": "2019-02-04T23:58:30Z",
      "side": 1,
      "message": "StateManagerGL::useProgram sets the dirty bit for program state, so next time StateManagerGL::syncState is called, the correct program will be restored. Hopefully this is sufficient, but Jamie or Geoff should probably verify.",
      "parentUuid": "3ec542b4_2760bbaa",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8eb9ad14_486ea2cb",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-02-05T00:11:13Z",
      "side": 1,
      "message": "There will be a local dirty bit flagged for the active program.\n\ndid you try calling resume explicitly instead?",
      "parentUuid": "3ec542b4_2760bbaa",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6b70907_4758740f",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1117350
      },
      "writtenOn": "2019-02-05T01:11:44Z",
      "side": 1,
      "message": "Yes, but resume fails (correctly) because the wrong program is bound.",
      "parentUuid": "8eb9ad14_486ea2cb",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8c722dc_7b125e30",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1117350
      },
      "writtenOn": "2019-02-13T00:46:50Z",
      "side": 1,
      "message": "Geoff, does it seem OK to you that this can set the dirty bit for the active program?",
      "parentUuid": "d6b70907_4758740f",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d52f4f2_8feee2a1",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1117350
      },
      "writtenOn": "2019-02-15T00:07:41Z",
      "side": 1,
      "message": "I think it should be OK.",
      "parentUuid": "d8c722dc_7b125e30",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0cd7918_f4ba2260",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-02-15T14:57:10Z",
      "side": 1,
      "message": "Ah, I missed this comment.  This may be why we see issues, in StateManagerGL it will sync the active program before syncing the transform feedback so no, it wont go back and reset the program to the correct one for the upcoming draw call.  You should reset it here, changing GL state while syncing dirty bits is one place we need to be careful.",
      "parentUuid": "4d52f4f2_8feee2a1",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "27089ef2_ee053a28",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.cpp",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 1117350
      },
      "writtenOn": "2019-02-15T18:46:37Z",
      "side": 1,
      "message": "OK, I\u0027ll prepare a change that restores the correct program after EndTransformFeedback. But we can\u0027t do the same after BeginTransformFeedback because it\u0027s illegal to change programs then. Did I miss some issues caused by this?",
      "parentUuid": "f0cd7918_f4ba2260",
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "123e99e1_72acc1c5",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.h",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1105324
      },
      "writtenOn": "2019-02-01T01:57:01Z",
      "side": 1,
      "message": "could we call this mCurrentProgram?",
      "range": {
        "startLine": 52,
        "startChar": 19,
        "endLine": 52,
        "endChar": 27
      },
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "139ccbf4_92bf9140",
        "filename": "src/libANGLE/renderer/gl/TransformFeedbackGL.h",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1117350
      },
      "writtenOn": "2019-02-04T23:58:30Z",
      "side": 1,
      "message": "I\u0027ve renamed it to mActiveProgram.",
      "parentUuid": "123e99e1_72acc1c5",
      "range": {
        "startLine": 52,
        "startChar": 19,
        "endLine": 52,
        "endChar": 27
      },
      "revId": "691e56e47b94ff3dbfc3bc63d1d734163c7231f1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}