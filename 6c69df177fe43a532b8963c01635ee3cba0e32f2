{
  "comments": [
    {
      "key": {
        "uuid": "a3f77b48_291ef4ad",
        "filename": "src/libANGLE/queryutils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 1437,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2020-03-05T15:22:49Z",
      "side": 1,
      "message": "I hope in the future we can remove the special cases for all the GLfixed data and use our existing conversion functions.  We make a lot of assumptions about the parameter count (4 in this case) and which values need different types of casts.\n\nMy thoughts are that we make a new type, something like:\n\n    namespace gl\n    {\n        struct Fixed\n        {\n            GLfixed value;\n        };\n        static_assert(sizeof(Fixed) \u003d\u003d sizeof(GLFixed), \"Unexpected gl::Fixed struct size\");\n    }\n\nWe can add new CastFromStateValue for gl::Fixed and then just call\n\n    QueryTexParameterBase\u003cfalse\u003e(context, texture, pname, reinterpret_cast\u003cgl::Fixed*\u003e(params));\n\nIf you\u0027re interested in doing this, we would really appreciate it.",
      "range": {
        "startLine": 1423,
        "startChar": 0,
        "endLine": 1437,
        "endChar": 5
      },
      "revId": "6c69df177fe43a532b8963c01635ee3cba0e32f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2f2f922_5027859c",
        "filename": "src/libANGLE/queryutils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 1437,
      "author": {
        "id": 1393148
      },
      "writtenOn": "2020-03-09T06:17:07Z",
      "side": 1,
      "message": "Thanks Geoff!\nI also think the conversion is clumsy between fixed-point and float when I\u0027m coding. I hope  to improve it separately in a new patch, because the ConvertFloatToFixed has been called by several different functions.\nWhat\u0027s more. Do you want me to fix the conversion just here in QueryTexParameterxv or all the related API? And, the special cases also exist in the conversion from fixedPoint to float, do you have suggestion about that?",
      "parentUuid": "a3f77b48_291ef4ad",
      "range": {
        "startLine": 1423,
        "startChar": 0,
        "endLine": 1437,
        "endChar": 5
      },
      "revId": "6c69df177fe43a532b8963c01635ee3cba0e32f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77e3d447_ae4dce39",
        "filename": "src/libANGLE/queryutils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 1437,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2020-03-09T14:40:18Z",
      "side": 1,
      "message": "What I\u0027m hoping is that the existing conversion functions will cover the special cases that exist.  For example: if you look at QueryTexParameterBase, we use different functions like CastFromGLintStateValue, or CastFromStateValue (which passes the pname too) to signal that the input is of some type or pname.  I hope we can move any special case in there, we may need more functions like CastFromGLFloatStateValue.\n\nGetting it fixed here would be a good start, we can see if there is an elegant solution to apply to the other places too.",
      "parentUuid": "d2f2f922_5027859c",
      "range": {
        "startLine": 1423,
        "startChar": 0,
        "endLine": 1437,
        "endChar": 5
      },
      "revId": "6c69df177fe43a532b8963c01635ee3cba0e32f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}