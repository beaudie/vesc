{
  "comments": [
    {
      "key": {
        "uuid": "6a1c2aef_fd99354f",
        "filename": "src/gpu_info_util/SystemInfo_mac.mm",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2019-08-13T23:57:08Z",
      "side": 1,
      "message": "static_cast\u003cint64_t\u003e(gpuIDHigh)",
      "range": {
        "startLine": 62,
        "startChar": 12,
        "endLine": 62,
        "endChar": 19
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dac8c170_aa47843d",
        "filename": "src/gpu_info_util/SystemInfo_mac.mm",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 1356146
      },
      "writtenOn": "2019-08-14T23:51:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6a1c2aef_fd99354f",
      "range": {
        "startLine": 62,
        "startChar": 12,
        "endLine": 62,
        "endChar": 19
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "93f9532b_0a8ad9a1",
        "filename": "src/gpu_info_util/SystemInfo_mac.mm",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2019-08-13T23:57:08Z",
      "side": 1,
      "message": "Need to call IOObjectRelease(gpu_entry) along all early-return code paths. Should null-check the result. See GetMachineModel above as an example.",
      "range": {
        "startLine": 165,
        "startChar": 17,
        "endLine": 165,
        "endChar": 26
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d5a0285_5aeb7dd7",
        "filename": "src/gpu_info_util/SystemInfo_mac.mm",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1356146
      },
      "writtenOn": "2019-08-14T23:51:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "93f9532b_0a8ad9a1",
      "range": {
        "startLine": 165,
        "startChar": 17,
        "endLine": 165,
        "endChar": 26
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e5db848a_db2604a2",
        "filename": "src/gpu_info_util/SystemInfo_mac.mm",
        "patchSetId": 3
      },
      "lineNbr": 210,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2019-08-13T23:57:08Z",
      "side": 1,
      "message": "Nice, very clever.",
      "range": {
        "startLine": 210,
        "startChar": 25,
        "endLine": 210,
        "endChar": 30
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25ee6b0b_c8615afe",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2019-08-13T23:57:08Z",
      "side": 1,
      "message": "Does this slow down ANGLE\u0027s end-to-end tests significantly?\n\nIf it does, then can we please look into an alternate solution where we add a little Mac-specific call like \"FixupTestSystemInfo()\" which sets the system info\u0027s active GPU to the non-Intel GPU? That\u0027s what the tests expect. Honestly I would prefer that solution regardless of the perf impact of removing this cache. The tests don\u0027t expect the GPU to jump from one to the other during runtime.",
      "range": {
        "startLine": 107,
        "startChar": 50,
        "endLine": 107,
        "endChar": 59
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d41cb40_d8470d11",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1329751
      },
      "writtenOn": "2019-08-14T14:44:22Z",
      "side": 1,
      "message": "If we can\u0027t assume we\u0027re on any particular GPU on Mac (e.g. Intel Mac tester doesn\u0027t test Intel) than I recommend you just remove all GPU-specific checks from Mac tests and only check IsOSX().",
      "parentUuid": "25ee6b0b_c8615afe",
      "range": {
        "startLine": 107,
        "startChar": 50,
        "endLine": 107,
        "endChar": 59
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc736c60_4800ce8a",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1105284
      },
      "writtenOn": "2019-08-14T16:38:25Z",
      "side": 1,
      "message": "Agreed that we should just update the expectations by using IsOSX or adding a IsIntelOrNVIDIA/IsIntelOrAMD along with our IsOSX checks.",
      "parentUuid": "0d41cb40_d8470d11",
      "range": {
        "startLine": 107,
        "startChar": 50,
        "endLine": 107,
        "endChar": 59
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45142dbb_ae08eaf5",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1356146
      },
      "writtenOn": "2019-08-14T23:51:20Z",
      "side": 1,
      "message": "Re: performance impact, eliminating this cache does consistently cause a slowdown in end-to-end tests: ~2 seconds on the dual-GPU laptop I tested on. Let me know if this is significant enough to use a Mac-specific call instead of updating test expectations.\n\nRe: updating test expectations, I updated the test expectations to remove GPU-specific checks on IsOSX. I opted not to add IsIntelOrNVIDIA/IsIntelOrAMD like calls because that would imply that the AMD/NVIDIA GPU respectively would be allowed and this isn\u0027t desired behaviour, assuming we can\u0027t be sure of a particular GPU.  \n\nIt might also be worthwhile to note that the tests are actually currently robust to runtime changes in GPU -- this is because the IsAMD/IsIntel-type functions would all call GetTestSystemInfo and fetch the current GPU, and none of the tests seemed to cause a GPU switch after the GetTestSystemInfo call. So we could probably assume a particular GPU at the beginning of a test, but I think we should not rely on this due to risks of flakiness in the future. Please let me know if I missed something!",
      "parentUuid": "cc736c60_4800ce8a",
      "range": {
        "startLine": 107,
        "startChar": 50,
        "endLine": 107,
        "endChar": 59
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "732ea670_fe4940d3",
        "filename": "src/tests/test_utils/angle_test_instantiate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2019-08-16T01:00:53Z",
      "side": 1,
      "message": "Given that the expectations for all of the tests have been updated, would you please delete this block of new code and just add a comment about the fact that on dual-GPU Macs, this code isn\u0027t guaranteed to return one GPU or the other, so any test suppressions for macOS should be done for all GPU types with a comment about which GPU the test actually fails on?\n\nThanks.",
      "parentUuid": "45142dbb_ae08eaf5",
      "range": {
        "startLine": 107,
        "startChar": 50,
        "endLine": 107,
        "endChar": 59
      },
      "revId": "b8c46f281be27c5b67b4dd3ce1b6293d0a484a0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}